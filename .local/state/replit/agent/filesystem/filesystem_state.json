{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Legal Case Management System - replit.md\n\n## Overview\n\nThis is a full-stack legal case management system built with React, Express, and PostgreSQL. The application provides a professional interface for law firms to manage legal cases, track activities, and monitor case progress through a comprehensive dashboard system.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## Authentication System (Updated July 2025)\n\n### Test Accounts\n- **Admin Access**: admin/admin123 (full system access)\n- **Limited Access**: lucas.silva/barone13 (cases only, no dashboard)\n\n### Permission Features\n- **Automatic Redirection**: Users without dashboard access redirect to their allowed pages\n- **Role-based Access**: Granular permissions for pages, fields, and actions\n- **Database-driven**: All permissions stored and read from PostgreSQL\n- **Smart Navigation**: Navigation menu shows only accessible pages\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript\n- **Build Tool**: Vite for fast development and optimized builds\n- **UI Framework**: shadcn/ui components built on Radix UI primitives\n- **Styling**: Tailwind CSS with custom BASE FACILITIES branding\n- **State Management**: TanStack Query (React Query) for server state\n- **Routing**: Wouter for lightweight client-side routing\n- **Forms**: React Hook Form with Zod validation\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js\n- **Language**: TypeScript with ES modules\n- **Database ORM**: Drizzle ORM for type-safe database operations\n- **Authentication**: Replit OAuth integration with session management\n- **Session Storage**: PostgreSQL-based sessions using connect-pg-simple\n- **Development**: Hot reload with Vite integration\n\n### Database Design (Updated August 2025)\n- **Database**: PostgreSQL via Supabase (migrated from Neon for user independence)\n- **Migration**: Successfully completed August 2025 - user now has complete independence\n- **Schema Management**: Drizzle Kit for migrations\n- **Key Tables**:\n  - `users` - User profiles and roles (admin/editor) with permissions system\n  - `cases` - Legal case data with status tracking\n  - `employees` - Employee database with 11-column Excel schema support\n  - `activity_log` - Audit trail for all system actions\n  - `sessions` - Authentication session storage\n  - `dashboard_layouts` - User dashboard customization\n\n## Key Components\n\n### Authentication System\n- **Provider**: Replit OAuth with OpenID Connect\n- **Session Management**: Server-side sessions with PostgreSQL storage\n- **Authorization**: Role-based access control (admin/editor roles)\n- **Security**: Secure HTTP-only cookies with CSRF protection\n\n### Employee Management System (Updated August 2025)\n- **Excel Schema**: Full 11-column support (Empresa|Nome|Matr√≠cula|RG|PIS|Data Admiss√£o|Data Demiss√£o|Sal√°rio|Cargo|Centro Custo|Departamento)\n- **Database Schema**: Updated PostgreSQL tables with all Excel columns\n- **Search Interface**: Professional table-based layout with advanced search modal\n- **Navigation**: Default route corrected to open Dashboard on login\n- **Manual Entry**: Complete forms with all 11 Excel fields for data entry\n\n### Case Management (Updated August 2025)\n- **Field Structure**: Matr√≠cula, Nome, Processo, Prazo de entrega, Audi√™ncia, Status\n- **Process Tags**: Comma-separated processes display as individual badges for analytics\n- **Status System**: NOVOS ‚Üí PENDENTES ‚Üí CONCLU√çDOS + ATRASADOS (automatic calculation)\n- **Smart Ordering**: Always sorted by deadline (most urgent first), not alphabetical\n- **Visual Alerts**: Red (overdue), Yellow (approaching deadline within 3 days), Green (safe)\n- **Automatic Status**: Cases past deadline auto-marked as \"atrasado\" regardless of current status\n- **Dashboard Integration**: Live counters show Resultados, Conclu√≠dos, Pendentes, Atrasados (ordem espec√≠fica conforme design)\n- **Advanced Filtering**: Multi-column filters including matr√≠cula, nome, status, date, and process search\n- **Professional UI**: Enhanced table with borders, professional styling, and responsive design\n- **Automatic Date Tracking**: Data de entrega automatically set when status changes to \"conclu√≠do\"\n- **Update System**: Fixed PATCH endpoint validation for seamless case editing\n\n### Process Analytics\n- **Tag Visualization**: Process fields split by commas into individual badges\n- **Dashboard Integration**: Process tag frequency tracking for legal department insights\n- **Responsive Design**: Mobile-friendly tag display with elegant wrapping\n\n### Activity Logging\n- **Comprehensive Audit**: All user actions are logged with timestamps\n- **Contextual Information**: IP addresses, user agents, and action descriptions\n- **Filtering**: Activity logs can be filtered by action type and date\n\n### Dashboard Analytics\n- **Case Statistics**: Total, completed, in-progress case counts\n- **Performance Metrics**: Average response time calculations\n- **Visual Charts**: Pie charts for status distribution, line charts for trends\n- **Real-time Updates**: Live data refresh using React Query\n\n## Data Flow\n\n### Client-Server Communication\n1. **API Requests**: RESTful endpoints with consistent error handling\n2. **Authentication Flow**: OAuth redirect ‚Üí session creation ‚Üí API access\n3. **State Synchronization**: React Query manages server state caching\n4. **Error Handling**: Centralized error management with user-friendly messages\n\n### Database Operations\n1. **Query Layer**: Drizzle ORM provides type-safe database queries\n2. **Connection Pooling**: Neon serverless handles connection management\n3. **Transaction Support**: ACID compliance for data integrity\n4. **Migration System**: Schema changes managed through Drizzle Kit\n\n## External Dependencies\n\n### Core Technologies\n- **Neon Database**: Serverless PostgreSQL hosting\n- **Replit Auth**: OAuth authentication provider\n- **Radix UI**: Accessible component primitives\n- **Recharts**: Chart visualization library\n\n### Development Tools\n- **Vite**: Fast build tool with HMR\n- **TypeScript**: Type safety across the stack\n- **Tailwind CSS**: Utility-first styling\n- **ESBuild**: Production bundle optimization\n\n## Deployment Strategy\n\n### Development Environment\n- **Hot Reload**: Vite dev server with backend proxy\n- **Database**: Neon serverless connection\n- **Environment Variables**: DATABASE_URL, SESSION_SECRET, REPL_ID\n\n### Production Build\n- **Frontend**: Static assets built to `dist/public`\n- **Backend**: Bundled Node.js server in `dist/index.js`\n- **Startup**: Single production server serving static files and API\n\n### Environment Configuration (Updated August 2025)\n- **Database**: Supabase PostgreSQL (user's independent instance)\n- **Production URL**: postgresql://postgres:BaseF@cilities2025!@db.dnymyzhahgqnxvkrgmoq.supabase.co:5432/postgres\n- **Authentication**: Custom session-based with local strategy  \n- **Sessions**: Secure session management with TTL\n- **Independence**: Complete user independence achieved - no external dependencies\n- **Deployment**: Successfully deployed on Render platform\n\nThe system follows a monorepo structure with clear separation between client, server, and shared code, making it maintainable and scalable for legal case management workflows.","size_bytes":7282},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2627},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/auth.ts":{"content":"import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Express } from \"express\";\nimport session from \"express-session\";\nimport { scrypt, randomBytes, timingSafeEqual } from \"crypto\";\nimport { promisify } from \"util\";\nimport { storage } from \"./storage\";\nimport { User } from \"@shared/schema\";\nimport createMemoryStore from \"memorystore\";\n\ndeclare global {\n  namespace Express {\n    interface User {\n      id: string;\n      username: string | null;\n      email: string | null;\n      role: string;\n    }\n  }\n}\n\nconst scryptAsync = promisify(scrypt);\n\nasync function hashPassword(password: string) {\n  const salt = randomBytes(16).toString(\"hex\");\n  const buf = (await scryptAsync(password, salt, 64)) as Buffer;\n  return `${buf.toString(\"hex\")}.${salt}`;\n}\n\nasync function comparePasswords(supplied: string, stored: string) {\n  if (!stored || !stored.includes('.')) {\n    return false;\n  }\n  const [hashed, salt] = stored.split(\".\");\n  if (!hashed || !salt) {\n    return false;\n  }\n  const hashedBuf = Buffer.from(hashed, \"hex\");\n  const suppliedBuf = (await scryptAsync(supplied, salt, 64)) as Buffer;\n  return timingSafeEqual(hashedBuf, suppliedBuf);\n}\n\nexport function setupAuth(app: Express) {\n  const MemoryStore = createMemoryStore(session);\n  const sessionStore = new MemoryStore({\n    checkPeriod: 86400000,\n  });\n\n  const sessionSettings: session.SessionOptions = {\n    secret: process.env.SESSION_SECRET || \"your-secret-key\",\n    resave: false,\n    saveUninitialized: false,\n    store: sessionStore,\n    cookie: {\n      httpOnly: true,\n      secure: false, // Set to true in production with HTTPS\n      maxAge: 7 * 24 * 60 * 60 * 1000, // 1 week\n    },\n  };\n\n  app.set(\"trust proxy\", 1);\n  app.use(session(sessionSettings));\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  passport.use(\n    new LocalStrategy(async (username, password, done) => {\n      try {\n        console.log(`üîê LOGIN ATTEMPT: ${username}`);\n        const user = await storage.getUserByUsername(username);\n        console.log(`üë§ USER FOUND:`, user ? `${user.username} (${user.id})` : 'null');\n        \n        if (!user) {\n          console.log(`‚ùå USER NOT FOUND: ${username}`);\n          return done(null, false);\n        }\n        \n        // Check password\n        if (!user.password) {\n          console.log(`‚ùå NO PASSWORD SET FOR USER: ${username}`);\n          return done(null, false);\n        }\n        \n        const passwordMatch = await comparePasswords(password, user.password);\n        console.log(`üîë PASSWORD CHECK: supplied=\"${password}\" stored=\"${user.password.substring(0, 10)}...\" match=${passwordMatch}`);\n        \n        if (!passwordMatch) {\n          console.log(`‚ùå INVALID PASSWORD for ${username}`);\n          return done(null, false);\n        }\n        \n        console.log(`‚úÖ LOGIN SUCCESS: ${username}`);\n        return done(null, {\n          id: user.id,\n          username: user.username,\n          email: user.email,\n          role: user.role\n        });\n      } catch (error) {\n        console.error(`üö® LOGIN ERROR:`, error);\n        return done(error);\n      }\n    }),\n  );\n\n  passport.serializeUser((user, done) => done(null, user.id));\n  passport.deserializeUser(async (id: string, done) => {\n    try {\n      const user = await storage.getUser(id);\n      done(null, user);\n    } catch (error) {\n      done(error);\n    }\n  });\n\n  app.post(\"/api/register\", async (req, res, next) => {\n    try {\n      const existingUser = await storage.getUserByUsername(req.body.username);\n      if (existingUser) {\n        return res.status(400).json({ message: \"Username j√° existe\" });\n      }\n\n      const existingEmail = await storage.getUserByEmail(req.body.email);\n      if (existingEmail) {\n        return res.status(400).json({ message: \"Email j√° existe\" });\n      }\n\n      const user = await storage.createUser({\n        ...req.body,\n        password: await hashPassword(req.body.password),\n      });\n\n      req.login(user, (err: any) => {\n        if (err) return next(err);\n        res.status(201).json(user);\n      });\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      res.status(500).json({ message: \"Erro interno do servidor\" });\n    }\n  });\n\n  app.post(\"/api/login\", (req, res, next) => {\n    console.log('üîê LOGIN REQUEST BODY:', req.body);\n    passport.authenticate(\"local\", (err: any, user: any, info: any) => {\n      console.log('üîê PASSPORT RESULT:', { err, user: user ? user.username : null, info });\n      if (err) {\n        console.error('üö® PASSPORT ERROR:', err);\n        return next(err);\n      }\n      if (!user) {\n        console.log('‚ùå AUTHENTICATION FAILED');\n        return res.status(401).json({ message: \"Credenciais inv√°lidas\" });\n      }\n      req.logIn(user, (err: any) => {\n        if (err) {\n          console.error('üö® LOGIN ERROR:', err);\n          return next(err);\n        }\n        console.log('‚úÖ LOGIN SUCCESS:', user.username);\n        res.status(200).json(user);\n      });\n    })(req, res, next);\n  });\n\n  app.post(\"/api/logout\", async (req: any, res, next) => {\n    req.logout((err: any) => {\n      if (err) return next(err);\n      req.session.destroy((destroyErr: any) => {\n        if (destroyErr) {\n          console.error(\"Session destruction error:\", destroyErr);\n        }\n        res.clearCookie('connect.sid');\n        res.sendStatus(200);\n      });\n    });\n  });\n\n  app.get(\"/api/logout\", (req, res, next) => {\n    req.logout((err: any) => {\n      if (err) return next(err);\n      req.session.destroy((destroyErr: any) => {\n        if (destroyErr) {\n          console.error(\"Session destruction error:\", destroyErr);\n        }\n        res.clearCookie('connect.sid');\n        res.redirect(\"/auth\");\n      });\n    });\n  });\n\n  // Remove duplicate user route - it's handled in routes.ts\n}\n\nexport { hashPassword };","size_bytes":5890},"server/db.ts":{"content":"import { Pool } from 'pg';\nimport { drizzle } from 'drizzle-orm/node-postgres';\nimport * as schema from \"@shared/schema\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ \n  connectionString: process.env.DATABASE_URL,\n  ssl: process.env.DATABASE_URL?.includes('sslmode=require') ? { rejectUnauthorized: false } : false\n});\n\nexport const db = drizzle(pool, { schema });","size_bytes":484},"server/importCases2024.ts":{"content":"import { db } from './db';\nimport { cases, employees } from '@shared/schema';\nimport { eq, sql } from 'drizzle-orm';\n\nexport async function importCases2024FromExcel(filePath: string, createdById: string) {\n  try {\n    // Usar dynamic import para XLSX no contexto ESM\n    const { default: XLSX } = await import('xlsx');\n    \n    // Ler arquivo Excel\n    const workbook = XLSX.readFile(filePath);\n    const sheetName = workbook.SheetNames[0];\n    const worksheet = workbook.Sheets[sheetName];\n    \n    // Converter para JSON\n    const data = XLSX.utils.sheet_to_json(worksheet, { header: 1 });\n    \n    // Assumir que a primeira linha s√£o os cabe√ßalhos\n    const headers = data[0] as string[];\n    const rows = data.slice(1) as any[][];\n    \n    console.log('Cabe√ßalhos encontrados:', headers);\n    console.log('Total de linhas:', rows.length);\n    \n    const importedCases = [];\n    let errors = [];\n    let employeeNotFound = [];\n    \n    for (let i = 0; i < rows.length; i++) {\n      const row = rows[i];\n      if (!row || row.length === 0) continue;\n      \n      try {\n        // Mapear dados da planilha com estrutura real identificada:\n        // 0: Matricula, 1: Nome, 2: Processo, 3: Prazo da Entrega, 4: Audiencia, 5: Status, 6: Data da entrega, 7: RESULTADO\n        const matricula = String(row[0] || '').trim();\n        const nome = String(row[1] || '').trim();\n        const processo = String(row[2] || '').trim();\n        const prazoEntrega = row[3] ? parseExcelDate(row[3]) : null;\n        const audiencia = row[4] ? parseExcelDate(row[4]) : null;\n        const statusOriginal = String(row[5] || '').trim();\n        const dataEntrega = row[6] ? parseExcelDate(row[6]) : null;\n        const resultado = String(row[7] || '').trim();\n        \n        const processData = {\n          clientName: nome, // Nome do funcion√°rio\n          processNumber: `${matricula}-2024`, // Usar matr√≠cula como identificador √∫nico\n          description: processo, // Descri√ß√£o do processo\n          status: 'concluido', // Todos os processos de 2024 j√° est√£o conclu√≠dos\n          startDate: new Date('2024-01-01'), // Data in√≠cio estimada\n          dueDate: prazoEntrega, // Prazo de entrega original\n          completedDate: dataEntrega || new Date('2024-12-31'), // Data de conclus√£o\n          dataEntrega: dataEntrega || new Date('2024-12-31'), // Data de entrega\n          tipoProcesso: 'trabalhista',\n          observacoes: resultado ? `Matr√≠cula: ${matricula}. Resultado: ${resultado}` : `Matr√≠cula: ${matricula}`,\n          createdById: createdById,\n          assignedToId: createdById, // Admin que est√° importando\n        };\n        \n        // Validar campos obrigat√≥rios\n        if (!nome || !matricula) {\n          errors.push(`Linha ${i + 2}: Nome e matr√≠cula s√£o obrigat√≥rios`);\n          continue;\n        }\n        \n        // Verificar se processo j√° existe\n        const existing = await db.select().from(cases).where(eq(cases.processNumber, processData.processNumber));\n        \n        if (existing.length > 0) {\n          console.log(`Processo j√° existe: ${processData.processNumber} - pulando`);\n          continue;\n        }\n        \n        // Tentar encontrar funcion√°rio pelo nome para vincular\n        let employeeId = null;\n        try {\n          const employeeMatches = await db.select()\n            .from(employees)\n            .where(sql`LOWER(nome) LIKE ${`%${processData.clientName.toLowerCase()}%`}`)\n            .limit(1);\n            \n          if (employeeMatches.length > 0) {\n            employeeId = employeeMatches[0].id;\n            console.log(`Funcion√°rio encontrado: ${processData.clientName} -> ${employeeMatches[0].nome}`);\n          } else {\n            employeeNotFound.push({\n              clientName: processData.clientName,\n              processNumber: processData.processNumber\n            });\n          }\n        } catch (e) {\n          console.log(`Erro ao buscar funcion√°rio para ${processData.clientName}:`, e.message);\n        }\n        \n        // Inserir novo processo\n        const [newCase] = await db.insert(cases).values({\n          ...processData,\n          employeeId\n        }).returning();\n        \n        console.log(`Processo importado: ${processData.processNumber} - ${processData.clientName}`);\n        importedCases.push(newCase);\n        \n      } catch (error) {\n        errors.push(`Linha ${i + 2}: ${error.message}`);\n        console.error(`Erro na linha ${i + 2}:`, error);\n      }\n    }\n    \n    return {\n      success: true,\n      imported: importedCases.length,\n      errors: errors,\n      employeeNotFound: employeeNotFound.length,\n      employeeNotFoundList: employeeNotFound,\n      message: `Importados ${importedCases.length} processos de 2024 com ${errors.length} erros. ${employeeNotFound.length} funcion√°rios n√£o encontrados.`\n    };\n    \n  } catch (error) {\n    console.error('Erro ao importar processos 2024:', error);\n    return {\n      success: false,\n      error: error.message,\n      message: 'Erro ao processar arquivo Excel de processos 2024'\n    };\n  }\n}\n\n// Fun√ß√£o para converter data do Excel para JavaScript Date\nfunction parseExcelDate(excelDate: any): Date | null {\n  if (!excelDate) return null;\n  \n  // Se j√° √© uma data\n  if (excelDate instanceof Date) return excelDate;\n  \n  // Se √© um n√∫mero (serial date do Excel)\n  if (typeof excelDate === 'number') {\n    // Excel usa 1900-01-01 como base (serial 1), mas precisa de ajustes\n    // Para datas do Excel, usar a f√≥rmula: (serial - 25569) * 86400 * 1000\n    const millisecondsPerDay = 24 * 60 * 60 * 1000;\n    const excelEpoch = new Date(1970, 0, 1).getTime() - (25569 * millisecondsPerDay);\n    return new Date(excelEpoch + (excelDate * millisecondsPerDay));\n  }\n  \n  // Se √© string, tentar parsing\n  if (typeof excelDate === 'string') {\n    const parsed = new Date(excelDate);\n    return isNaN(parsed.getTime()) ? null : parsed;\n  }\n  \n  return null;\n}\n\n// Fun√ß√£o para buscar processos por status e per√≠odo\nexport async function getCases2024Stats() {\n  try {\n    const cases2024 = await db.select()\n      .from(cases)\n      .where(sql`EXTRACT(YEAR FROM created_at) = 2024 OR EXTRACT(YEAR FROM completed_date) = 2024`);\n    \n    const stats = {\n      total: cases2024.length,\n      concluidos: cases2024.filter(c => c.status === 'concluido').length,\n      comFuncionario: cases2024.filter(c => c.employeeId).length,\n      semFuncionario: cases2024.filter(c => !c.employeeId).length,\n    };\n    \n    return stats;\n  } catch (error) {\n    console.error('Erro ao buscar estat√≠sticas 2024:', error);\n    return {\n      total: 0,\n      concluidos: 0,\n      comFuncionario: 0,\n      semFuncionario: 0\n    };\n  }\n}","size_bytes":6694},"server/importEmployees.ts":{"content":"import XLSX from 'xlsx';\nimport * as fs from 'fs';\nimport { db } from './db';\nimport { employees, cases } from '@shared/schema';\nimport { eq, sql, isNull } from 'drizzle-orm';\n\nexport async function importEmployeesFromExcel(filePath: string) {\n  try {\n    // Ler arquivo Excel\n    const fileBuffer = fs.readFileSync(filePath);\n    const workbook = XLSX.read(fileBuffer, { type: 'buffer' });\n    const sheetName = workbook.SheetNames[0];\n    const worksheet = workbook.Sheets[sheetName];\n    \n    // Converter para JSON\n    const data = XLSX.utils.sheet_to_json(worksheet, { header: 1 });\n    \n    // Assumir que a primeira linha s√£o os cabe√ßalhos\n    const headers = data[0] as string[];\n    const rows = data.slice(1) as any[][];\n    \n    console.log('üìä Cabe√ßalhos Excel encontrados:', headers);\n    console.log('üìà Total de linhas para processar:', rows.length);\n    \n    const importedEmployees = [];\n    let errors = [];\n    \n    for (let i = 0; i < rows.length; i++) {\n      const row = rows[i];\n      if (!row || row.length === 0 || !row[0]) continue;\n      \n      try {\n        // Mapear dados da planilha Excel com formato espec√≠fico BASE FACILITIES\n        const employee = {\n          empresa: String(row[0] || 'BASE FACILITIES').trim(),\n          nome: String(row[1] || '').trim(),\n          matricula: String(row[2] || '').trim(),\n          rg: String(row[3] || '').trim() || null,\n          pis: String(row[4] || '').trim() || null,\n          // Converter data Excel para formato ISO\n          dataAdmissao: row[5] && typeof row[5] === 'number' ? \n            new Date(Math.round((row[5] - 25569) * 86400 * 1000)).toISOString().split('T')[0] : null,\n          dataDemissao: row[6] && typeof row[6] === 'number' ? \n            new Date(Math.round((row[6] - 25569) * 86400 * 1000)).toISOString().split('T')[0] : null,\n          salario: row[7] ? String(row[7]).replace(/[^\\d.,]/g, '') : null,\n          cargo: String(row[8] || '').trim() || null,\n          centroCusto: String(row[9] || '').trim() || null,\n          departamento: String(row[10] || '').trim() || null,\n          status: row[6] ? 'demitido' : 'ativo',\n          email: null,\n          telefone: null,\n          endereco: null\n        };\n        \n        // Validar campos obrigat√≥rios\n        if (!employee.matricula || !employee.nome) {\n          errors.push(`Linha ${i + 2}: Matr√≠cula e nome s√£o obrigat√≥rios`);\n          continue;\n        }\n        \n        console.log(`üîÑ Processando: ${employee.nome} (${employee.matricula})`);\n        \n        // Verificar se funcion√°rio j√° existe\n        const existing = await db.select().from(employees).where(eq(employees.matricula, employee.matricula));\n        \n        if (existing.length > 0) {\n          // Atualizar funcion√°rio existente\n          await db.update(employees)\n            .set({\n              ...employee,\n              updatedAt: new Date()\n            })\n            .where(eq(employees.matricula, employee.matricula));\n          console.log(`Funcion√°rio atualizado: ${employee.nome} (${employee.matricula})`);\n        } else {\n          // Inserir novo funcion√°rio\n          await db.insert(employees).values(employee);\n          console.log(`Funcion√°rio criado: ${employee.nome} (${employee.matricula})`);\n        }\n        \n        importedEmployees.push(employee);\n        \n      } catch (error) {\n        errors.push(`Linha ${i + 2}: ${error.message}`);\n      }\n    }\n    \n    return {\n      success: true,\n      imported: importedEmployees.length,\n      errors: errors,\n      message: `Importados ${importedEmployees.length} funcion√°rios com ${errors.length} erros`\n    };\n    \n  } catch (error) {\n    console.error('Erro ao importar funcion√°rios:', error);\n    return {\n      success: false,\n      error: error.message,\n      message: 'Erro ao processar arquivo Excel'\n    };\n  }\n}\n\n// Fun√ß√£o para buscar funcion√°rio por nome (busca inteligente)\nexport async function findEmployeeByName(name: string) {\n  const searchTerm = `%${name.toLowerCase()}%`;\n  \n  const results = await db.select()\n    .from(employees)\n    .where(sql`LOWER(nome) LIKE ${searchTerm}`)\n    .limit(10);\n    \n  return results;\n}\n\n// Fun√ß√£o para conectar processos com funcion√°rios\nexport async function linkCasesToEmployees() {\n  try {\n    // Buscar todos os casos sem funcion√°rio vinculado\n    const cases = await db.select().from(cases).where(isNull(cases.employeeId));\n    \n    let linked = 0;\n    let notFound = [];\n    \n    for (const case_ of cases) {\n      // Tentar encontrar funcion√°rio pelo nome do cliente\n      const employeeMatches = await findEmployeeByName(case_.clientName);\n      \n      if (employeeMatches.length > 0) {\n        // Pegar o primeiro match (pode ser melhorado com fuzzy matching)\n        const employee = employeeMatches[0];\n        \n        await db.update(cases)\n          .set({ employeeId: employee.id })\n          .where(eq(cases.id, case_.id));\n          \n        console.log(`Processo ${case_.processNumber} vinculado ao funcion√°rio ${employee.nome}`);\n        linked++;\n      } else {\n        notFound.push({\n          processNumber: case_.processNumber,\n          clientName: case_.clientName\n        });\n      }\n    }\n    \n    return {\n      success: true,\n      linked,\n      notFound: notFound.length,\n      notFoundCases: notFound\n    };\n    \n  } catch (error) {\n    console.error('Erro ao vincular processos:', error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n}\n\nexport async function importEmployeesFromCSV(filePath: string) {\n  try {\n    // Ler arquivo CSV\n    const csvData = fs.readFileSync(filePath, 'utf8');\n    const lines = csvData.split('\\n').filter(line => line.trim());\n    \n    // Primeira linha s√£o os cabe√ßalhos\n    const headers = lines[0].split(',').map(h => h.trim());\n    console.log('Cabe√ßalhos CSV encontrados:', headers);\n    console.log('Total de linhas CSV:', lines.length - 1);\n    \n    const importedEmployees = [];\n    let errors = [];\n    \n    for (let i = 1; i < lines.length; i++) {\n      const line = lines[i];\n      if (!line.trim()) continue;\n      \n      try {\n        // Parse CSV line (handling commas in quotes)\n        const values = line.split(',').map(v => v.trim().replace(/^\"/, '').replace(/\"$/, ''));\n        \n        // Mapear dados da planilha Base Facilities CSV\n        // Empresa,Nome do Funcion√°rio,C√≥digo do Funcion√°rio,N√∫mero do RG,N√∫mero do PIS,Data Admiss√£o,Data Demiss√£o,Sal√°rio,Descri√ß√£o do Cargo,Centro de Custo,Descri√ß√£o do Custo\n        const employee = {\n          empresa: values[0] || 'BASE FACILITIES',\n          nome: values[1]?.trim() || '',\n          matricula: values[2]?.trim() || '',\n          rg: values[3]?.trim() || null,\n          pis: values[4]?.trim() || null,\n          dataAdmissao: values[5] ? values[5] : null,\n          dataDemissao: values[6]?.trim() || null,\n          salario: values[7] ? values[7].replace(/[^\\d.,]/g, '') : null,\n          cargo: values[8]?.trim() || null,\n          centroCusto: values[9]?.trim() || null,\n          departamento: values[10]?.trim() || null,\n          status: values[6]?.trim() ? 'demitido' : 'ativo', // Se tem data demiss√£o = demitido\n          email: null,\n          telefone: null,\n          endereco: null\n        };\n        \n        // Validar campos obrigat√≥rios\n        if (!employee.matricula || !employee.nome) {\n          errors.push(`Linha ${i + 1}: Matr√≠cula e nome s√£o obrigat√≥rios`);\n          continue;\n        }\n        \n        // Verificar se funcion√°rio j√° existe\n        const existing = await db.select().from(employees).where(eq(employees.matricula, employee.matricula));\n        \n        if (existing.length > 0) {\n          // Atualizar funcion√°rio existente\n          await db.update(employees)\n            .set({\n              ...employee,\n              updatedAt: new Date()\n            })\n            .where(eq(employees.matricula, employee.matricula));\n          console.log(`Funcion√°rio atualizado: ${employee.nome} (${employee.matricula})`);\n        } else {\n          // Inserir novo funcion√°rio\n          await db.insert(employees).values(employee);\n          console.log(`Funcion√°rio criado: ${employee.nome} (${employee.matricula})`);\n        }\n        \n        importedEmployees.push(employee);\n        \n      } catch (error) {\n        errors.push(`Linha ${i + 1}: ${error.message}`);\n      }\n    }\n    \n    return {\n      success: true,\n      imported: importedEmployees.length,\n      errors: errors,\n      message: `Importados ${importedEmployees.length} funcion√°rios com ${errors.length} erros`\n    };\n    \n  } catch (error) {\n    console.error('Erro ao importar funcion√°rios CSV:', error);\n    return {\n      success: false,\n      error: error.message,\n      message: 'Erro ao processar arquivo CSV'\n    };\n  }\n}","size_bytes":8830},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport cors from \"cors\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n// CORS middleware\napp.use(cors({\n  origin: true,\n  credentials: true\n}));\n\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n// Remove this middleware - it may interfere with authentication\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"‚Ä¶\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  // Register routes FIRST before Vite middleware\n  const server = await registerRoutes(app);\n\n  // Error handling middleware\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n    res.status(status).json({ message });\n  });\n\n  // Setup Vite AFTER routes are registered\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2179},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nif (!process.env.REPLIT_DOMAINS) {\n  throw new Error(\"Environment variable REPLIT_DOMAINS not provided\");\n}\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  for (const domain of process.env\n    .REPLIT_DOMAINS!.split(\",\")) {\n    const strategy = new Strategy(\n      {\n        name: `replitauth:${domain}`,\n        config,\n        scope: \"openid email profile offline_access\",\n        callbackURL: `https://${domain}/api/callback`,\n      },\n      verify,\n    );\n    passport.use(strategy);\n  }\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n","size_bytes":4221},"server/routes.ts":{"content":"import type { Express, Request } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport * as fs from \"fs\";\nimport multer from \"multer\";\nimport { storage } from \"./storage\";\nimport { setupAuth } from \"./auth\";\nimport { scrypt, randomBytes } from \"crypto\";\nimport { promisify } from \"util\";\n\nconst scryptAsync = promisify(scrypt);\n\nasync function hashPassword(password: string) {\n  const salt = randomBytes(16).toString(\"hex\");\n  const buf = (await scryptAsync(password, salt, 64)) as Buffer;\n  return `${buf.toString(\"hex\")}.${salt}`;\n}\nimport { insertCaseSchema, insertUserSchema, updateUserSchema, User } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { db, pool } from \"./db\";\nimport { employees } from \"@shared/schema\";\nimport { sql, eq } from \"drizzle-orm\";\n\n\n\n// Extend Request type to include user\ninterface AuthenticatedRequest extends Request {\n  user?: User;\n}\n\n// Authentication middleware\nfunction isAuthenticated(req: any, res: any, next: any) {\n  if (req.isAuthenticated()) {\n    return next();\n  }\n  res.status(401).json({ message: \"Unauthorized\" });\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Test route to verify API routing works\n  app.get('/api/test', (req, res) => {\n    console.log('üü¢ TEST ROUTE HIT');\n    res.json({ message: 'API routing is working', timestamp: new Date().toISOString() });\n  });\n\n  // Auth middleware\n  setupAuth(app);\n\n  // Auth routes\n  app.get('/api/user', async (req: any, res: any) => {\n    console.log('üîç USER CHECK:', req.isAuthenticated(), req.user);\n    if (!req.isAuthenticated()) {\n      return res.status(401).json({ message: \"Unauthorized\" });\n    }\n    \n    try {\n      // Usar storage para buscar o usu√°rio com permiss√µes\n      const user = await storage.getUser(req.user.id);\n      \n      if (!user) {\n        console.log('‚ùå USU√ÅRIO N√ÉO ENCONTRADO');\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      console.log('‚úÖ USU√ÅRIO CARREGADO:', user.username, 'Permiss√µes:', JSON.stringify(user.permissions, null, 2));\n      \n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // Enhanced activity logging middleware\n  const logActivity = async (req: any, action: string, resourceType: string, resourceId: string, description: string, metadata?: any) => {\n    try {\n      if (!req.user || !req.user.id) {\n        console.log('‚ö†Ô∏è LOG ATIVIDADE: Usu√°rio n√£o encontrado, pulando log');\n        return;\n      }\n      \n      const timestamp = new Date().toISOString();\n      const userInfo = `${req.user.firstName} ${req.user.lastName} (${req.user.username})`;\n      const ipAddress = req.ip || req.socket.remoteAddress || req.connection?.remoteAddress || 'Unknown';\n      const userAgent = req.get('User-Agent') || 'Unknown';\n      \n      const detailedDescription = `${userInfo}: ${description}`;\n      \n      await storage.logActivity({\n        userId: req.user.id,\n        action,\n        resourceType,\n        resourceId,\n        description: detailedDescription,\n        ipAddress,\n        userAgent,\n        metadata: metadata ? JSON.stringify(metadata) : undefined,\n      });\n      \n      console.log(`üìã LOG ATIVIDADE: [${action}] ${resourceType} ${resourceId} - ${description} - Usu√°rio: ${userInfo}`);\n    } catch (error) {\n      console.error('‚ùå Falha ao registrar log de atividade:', error);\n    }\n  };\n\n  // Case routes\n  app.get('/api/cases', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { status, search, limit, orderBy } = req.query;\n      const cases = await storage.getCases({\n        status: status as string,\n        search: search as string,\n      });\n      \n      let sortedCases = cases;\n      if (orderBy === 'recent') {\n        sortedCases = cases.sort((a, b) => {\n          const dateA = new Date(a.updatedAt || a.createdAt || 0);\n          const dateB = new Date(b.updatedAt || b.createdAt || 0);\n          return dateB.getTime() - dateA.getTime();\n        });\n      }\n      \n      const result = limit ? sortedCases.slice(0, parseInt(limit as string)) : sortedCases;\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error fetching cases:\", error);\n      res.status(500).json({ message: \"Failed to fetch cases\" });\n    }\n  });\n\n  app.get('/api/cases/:id', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n      const caseData = await storage.getCaseById(id);\n      if (!caseData) {\n        return res.status(404).json({ message: \"Case not found\" });\n      }\n      \n      res.json(caseData);\n    } catch (error) {\n      console.error(\"Error fetching case:\", error);\n      res.status(500).json({ message: \"Failed to fetch case\" });\n    }\n  });\n\n  app.post('/api/cases', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      console.log('üîç Received case creation request:', req.body);\n      console.log('üîç User info:', req.user);\n      \n      if (req.user?.role !== 'admin') {\n        return res.status(403).json({ message: \"Insufficient permissions\" });\n      }\n\n      // Add the authenticated user's ID to the request data\n      const requestData = {\n        ...req.body,\n        createdById: req.user.id // Override with actual authenticated user ID\n      };\n      \n      // Convert date strings to Date objects before validation\n      const dataWithDates = {\n        ...requestData,\n        dueDate: requestData.dueDate ? new Date(requestData.dueDate) : undefined,\n        dataAudiencia: requestData.dataAudiencia ? new Date(requestData.dataAudiencia) : undefined,\n        startDate: requestData.startDate ? new Date(requestData.startDate) : undefined\n      };\n      \n      console.log('üîç Data to validate:', dataWithDates);\n      const validatedData = insertCaseSchema.parse(dataWithDates);\n      console.log('‚úÖ Validation passed:', validatedData);\n      \n      const newCase = await storage.createCase(validatedData);\n      console.log('‚úÖ Case created:', newCase);\n      \n      await logActivity(\n        req,\n        'CREATE_CASE',\n        'CASE',\n        newCase.id,\n        `Criou novo processo ${newCase.processNumber} - Cliente: ${newCase.clientName}`,\n        { \n          processNumber: newCase.processNumber,\n          clientName: newCase.clientName,\n          status: newCase.status,\n          dueDate: newCase.dueDate \n        }\n      );\n\n      res.status(201).json(newCase);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        console.error('‚ùå Validation error:', error.errors);\n        return res.status(400).json({ message: \"Invalid data\", errors: error.errors });\n      }\n      console.error(\"‚ùå Error creating case:\", error);\n      res.status(500).json({ message: \"Failed to create case\" });\n    }\n  });\n\n  app.patch('/api/cases/:id', isAuthenticated, async (req: any, res: any) => {\n    try {\n      const { id } = req.params;\n      \n      console.log('üîß DEBUG: Recebendo dados para atualiza√ß√£o:', req.body);\n\n      const caseData = await storage.getCaseById(id);\n      if (!caseData) {\n        return res.status(404).json({ message: \"Case not found\" });\n      }\n\n      // Check permissions - admin can edit everything, editor can only edit certain fields\n      if (req.user?.role !== 'admin') {\n        const allowedFields = ['description', 'dueDate', 'assignedToId'];\n        const requestedFields = Object.keys(req.body);\n        const hasRestrictedFields = requestedFields.some(field => !allowedFields.includes(field));\n        \n        if (hasRestrictedFields) {\n          return res.status(403).json({ message: \"Insufficient permissions to edit these fields\" });\n        }\n      }\n\n      // Validar apenas os campos permitidos para atualiza√ß√£o\n      const allowedUpdateFields = {\n        clientName: req.body.clientName,\n        processNumber: req.body.processNumber,\n        description: req.body.description,\n        status: req.body.status,\n        dueDate: req.body.dueDate ? new Date(req.body.dueDate) : undefined,\n        startDate: req.body.startDate ? new Date(req.body.startDate) : undefined,\n        observacoes: req.body.observacoes,\n        employeeId: req.body.employeeId,\n        assignedToId: req.body.assignedToId\n      };\n      \n      // Remover campos undefined\n      const cleanData = Object.fromEntries(\n        Object.entries(allowedUpdateFields).filter(([_, value]) => value !== undefined)\n      );\n      \n      console.log('üîß DEBUG: Dados limpos para atualiza√ß√£o:', cleanData);\n      \n      const updatedCase = await storage.updateCase(id, cleanData);\n      \n      // Log atividade apenas se usu√°rio estiver definido\n      if (req.user) {\n        try {\n          await logActivity(\n            req as any,\n            'UPDATE_CASE',\n            'CASE',\n            id,\n            `Editou processo ${caseData.processNumber} - Cliente: ${caseData.clientName}`,\n            { \n              originalData: { processNumber: caseData.processNumber, clientName: caseData.clientName },\n              updatedFields: Object.keys(cleanData),\n              newData: cleanData\n            }\n          );\n        } catch (logError) {\n          console.error('Erro ao fazer log da atividade:', logError);\n          // Continua mesmo se o log falhar\n        }\n      }\n\n      res.json(updatedCase);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid data\", errors: error.errors });\n      }\n      console.error(\"Error updating case:\", error);\n      res.status(500).json({ message: \"Failed to update case\" });\n    }\n  });\n\n  app.patch('/api/cases/:id/status', isAuthenticated, async (req: any, res: any) => {\n    try {\n      const { id } = req.params;\n      const { status } = req.body;\n      \n      if (!status || !['novo', 'pendente', 'concluido', 'atrasado'].includes(status)) {\n        return res.status(400).json({ message: \"Invalid status\" });\n      }\n\n      const caseData = await storage.getCaseById(id);\n      if (!caseData) {\n        return res.status(404).json({ message: \"Case not found\" });\n      }\n\n      // L√≥gica da dataEntrega autom√°tica\n      let dataEntrega = caseData.dataEntrega;\n      let completedDate = caseData.completedDate;\n      \n      // Se mudou para \"concluido\", definir dataEntrega para agora\n      if (status === 'concluido' && caseData.status !== 'concluido') {\n        dataEntrega = new Date();\n        completedDate = new Date();\n      }\n      // Se mudou de \"concluido\" para outro status, limpar dataEntrega\n      else if (status !== 'concluido' && caseData.status === 'concluido') {\n        dataEntrega = null;\n        completedDate = null;\n      }\n      \n      const updatedCase = await storage.updateCaseStatus(id, status, completedDate, dataEntrega);\n      \n      await logActivity(\n        req,\n        'UPDATE_STATUS',\n        'CASE',\n        id,\n        `Alterou status do processo ${caseData.processNumber} de \"${caseData.status}\" para \"${status}\" - Cliente: ${caseData.clientName}`,\n        { \n          processNumber: caseData.processNumber,\n          clientName: caseData.clientName,\n          previousStatus: caseData.status,\n          newStatus: status,\n          completedDate: completedDate,\n          dataEntrega: dataEntrega\n        }\n      );\n\n      res.json(updatedCase);\n    } catch (error) {\n      console.error(\"Error updating case status:\", error);\n      res.status(500).json({ message: \"Failed to update case status\" });\n    }\n  });\n\n  app.delete('/api/cases/:id', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n      \n      if (req.user?.role !== 'admin') {\n        return res.status(403).json({ message: \"Insufficient permissions\" });\n      }\n\n      const caseData = await storage.getCaseById(id);\n      if (!caseData) {\n        return res.status(404).json({ message: \"Case not found\" });\n      }\n\n      await storage.deleteCase(id);\n      \n      await logActivity(\n        req,\n        'DELETE_CASE',\n        'CASE',\n        id,\n        `Excluiu processo ${caseData.processNumber} - Cliente: ${caseData.clientName}`,\n        { \n          deletedData: {\n            processNumber: caseData.processNumber,\n            clientName: caseData.clientName,\n            status: caseData.status,\n            description: caseData.description\n          }\n        }\n      );\n\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting case:\", error);\n      res.status(500).json({ message: \"Failed to delete case\" });\n    }\n  });\n\n  // Dashboard routes\n  app.get('/api/dashboard/stats', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const stats = await storage.getCaseStats();\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Error fetching dashboard stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch dashboard stats\" });\n    }\n  });\n\n  // Dashboard layout endpoints\n  app.get('/api/dashboard/layout', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const layout = await storage.getDashboardLayout(req.user!.id);\n      res.json(layout);\n    } catch (error) {\n      console.error(\"Error fetching dashboard layout:\", error);\n      res.status(500).json({ message: \"Failed to fetch dashboard layout\" });\n    }\n  });\n\n  app.post('/api/dashboard/layout', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { layout, widgets } = req.body;\n      const savedLayout = await storage.saveDashboardLayout(req.user!.id, layout, widgets);\n      \n      await logActivity(\n        req,\n        'UPDATE_DASHBOARD',\n        'DASHBOARD',\n        savedLayout.id,\n        'Personalizou layout do dashboard',\n        { widgetCount: widgets?.length || 0 }\n      );\n\n      res.json(savedLayout);\n    } catch (error) {\n      console.error(\"Error saving dashboard layout:\", error);\n      res.status(500).json({ message: \"Failed to save dashboard layout\" });\n    }\n  });\n\n  // Activity log routes\n  app.get('/api/activity-logs', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { action, date, search, limit, processOnly } = req.query;\n      \n      const logs = await storage.getActivityLogs({\n        action: action as string,\n        date: date as string,\n        search: search as string,\n        limit: limit ? parseInt(limit as string, 10) : undefined,\n        processOnly: processOnly === 'true',\n      });\n      \n      res.json(logs);\n    } catch (error) {\n      console.error(\"‚ùå Erro ao buscar logs de atividade:\", error);\n      res.status(500).json({ message: \"Failed to fetch activity logs\" });\n    }\n  });\n\n  // Employee routes\n  app.get('/api/employees', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { search } = req.query;\n      let employeeList;\n      \n      if (search) {\n        const searchTerm = `%${search.toString().toLowerCase()}%`;\n        employeeList = await db.select()\n          .from(employees)\n          .where(sql`LOWER(nome) LIKE ${searchTerm} OR LOWER(matricula) LIKE ${searchTerm}`)\n          .limit(50);\n      } else {\n        employeeList = await db.select().from(employees).orderBy(employees.nome).limit(100);\n      }\n      \n      res.json(employeeList);\n    } catch (error) {\n      console.error(\"Error fetching employees:\", error);\n      res.status(500).json({ message: \"Failed to fetch employees\" });\n    }\n  });\n\n  // Create employee\n  app.post('/api/employees', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const employeeData = req.body;\n      \n      // Validar dados obrigat√≥rios\n      if (!employeeData.matricula || !employeeData.nome) {\n        return res.status(400).json({ message: \"Matr√≠cula e nome s√£o obrigat√≥rios\" });\n      }\n\n      // Verificar se matr√≠cula j√° existe\n      const existing = await db.select().from(employees).where(sql`matricula = ${employeeData.matricula}`);\n      if (existing.length > 0) {\n        return res.status(400).json({ message: \"Matr√≠cula j√° existe\" });\n      }\n\n      const [newEmployee] = await db.insert(employees).values({\n        matricula: employeeData.matricula,\n        nome: employeeData.nome,\n        rg: employeeData.rg || null,\n        departamento: employeeData.departamento || null,\n        cargo: employeeData.cargo || null,\n        dataAdmissao: employeeData.dataAdmissao ? new Date(employeeData.dataAdmissao) : null,\n        status: employeeData.status || 'ativo',\n        email: employeeData.email || null,\n        telefone: employeeData.telefone || null,\n        endereco: employeeData.endereco || null,\n      }).returning();\n\n      await logActivity(\n        req,\n        'CREATE_EMPLOYEE',\n        'EMPLOYEE',\n        newEmployee.id,\n        `Criou funcion√°rio ${newEmployee.nome} (${newEmployee.matricula})`\n      );\n\n      res.status(201).json(newEmployee);\n    } catch (error) {\n      console.error(\"Error creating employee:\", error);\n      res.status(500).json({ message: \"Failed to create employee\" });\n    }\n  });\n\n  // Update employee\n  app.put('/api/employees/:id', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n      const employeeData = req.body;\n\n      // Verificar se funcion√°rio existe\n      const existing = await db.select().from(employees).where(eq(employees.id, id));\n      if (existing.length === 0) {\n        return res.status(404).json({ message: \"Funcion√°rio n√£o encontrado\" });\n      }\n\n      const [updatedEmployee] = await db.update(employees)\n        .set({\n          ...employeeData,\n          dataAdmissao: employeeData.dataAdmissao && employeeData.dataAdmissao !== '' ? new Date(employeeData.dataAdmissao) : null,\n          dataDemissao: employeeData.dataDemissao && employeeData.dataDemissao !== '' ? new Date(employeeData.dataDemissao) : null,\n          updatedAt: new Date(),\n        })\n        .where(eq(employees.id, id))\n        .returning();\n\n      await logActivity(\n        req,\n        'UPDATE_EMPLOYEE',\n        'EMPLOYEE',\n        id,\n        `Atualizou funcion√°rio ${updatedEmployee.nome} (${updatedEmployee.matricula})`\n      );\n\n      res.json(updatedEmployee);\n    } catch (error) {\n      console.error(\"Error updating employee:\", error);\n      res.status(500).json({ message: \"Failed to update employee\" });\n    }\n  });\n\n  // Delete employee\n  app.delete('/api/employees/:id', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const { id } = req.params;\n\n      // Verificar se funcion√°rio existe\n      const existing = await db.select().from(employees).where(eq(employees.id, id));\n      if (existing.length === 0) {\n        return res.status(404).json({ message: \"Funcion√°rio n√£o encontrado\" });\n      }\n\n      const employee = existing[0];\n      \n      // Soft delete - marcar como deletado em vez de apagar\n      await db.update(employees).set({ \n        status: 'deletado',\n        updatedAt: new Date()\n      }).where(eq(employees.id, id));\n\n      await logActivity(\n        req,\n        'DELETE_EMPLOYEE',\n        'EMPLOYEE',\n        id,\n        `Marcou funcion√°rio como deletado: ${employee.nome} (${employee.matricula})`\n      );\n\n      res.json({ message: \"Funcion√°rio marcado como deletado\", id });\n    } catch (error) {\n      console.error(\"Error deleting employee:\", error);\n      res.status(500).json({ message: \"Failed to delete employee\" });\n    }\n  });\n\n  // Export employees\n  app.get('/api/employees/export', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const allEmployees = await db.select().from(employees).orderBy(employees.nome);\n      \n      const XLSX = require('xlsx');\n      const workbook = XLSX.utils.book_new();\n      \n      const worksheetData = [\n        ['Empresa', 'Nome do Funcion√°rio', 'C√≥digo do Funcion√°rio', 'N√∫mero do RG', 'Email', 'Telefone', 'Data Admiss√£o', 'Status', 'Descri√ß√£o do Cargo', 'Departamento', 'Endere√ßo']\n      ];\n\n      allEmployees.forEach(emp => {\n        worksheetData.push([\n          'BASE FACILITIES',\n          emp.nome,\n          emp.matricula,\n          emp.rg || '',\n          emp.email || '',\n          emp.telefone || '',\n          emp.dataAdmissao ? new Date(emp.dataAdmissao).toLocaleDateString('pt-BR') : '',\n          emp.status,\n          emp.cargo || '',\n          emp.departamento || '',\n          emp.endereco || ''\n        ]);\n      });\n\n      const worksheet = XLSX.utils.aoa_to_sheet(worksheetData);\n      XLSX.utils.book_append_sheet(workbook, worksheet, 'Funcion√°rios');\n\n      const buffer = XLSX.write(workbook, { type: 'buffer', bookType: 'xlsx' });\n\n      res.setHeader('Content-Disposition', `attachment; filename=\"funcionarios_${new Date().toISOString().split('T')[0]}.xlsx\"`);\n      res.setHeader('Content-Type', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n      res.send(buffer);\n\n      await logActivity(\n        req,\n        'EXPORT_EMPLOYEES',\n        'EMPLOYEE',\n        'all',\n        `Exportou ${allEmployees.length} funcion√°rios`\n      );\n\n    } catch (error) {\n      console.error(\"Error exporting employees:\", error);\n      res.status(500).json({ message: \"Failed to export employees\" });\n    }\n  });\n\n  // Setup multer for file uploads\n  const upload = multer({ dest: 'uploads/' });\n  app.post('/api/employees/import', isAuthenticated, upload.single('file'), async (req: AuthenticatedRequest, res) => {\n    try {\n      if (req.user.role !== 'admin') {\n        return res.status(403).json({ message: \"Insufficient permissions\" });\n      }\n\n      if (!req.file) {\n        return res.status(400).json({ success: false, error: 'Nenhum arquivo enviado' });\n      }\n\n      const { importEmployeesFromExcel } = await import('./importEmployees');\n      const result = await importEmployeesFromExcel(req.file.path);\n      \n      // Limpar arquivo tempor√°rio\n      fs.unlinkSync(req.file.path);\n      \n      await logActivity(\n        req,\n        'IMPORT_EMPLOYEES',\n        'EMPLOYEE',\n        'bulk',\n        `Importou ${result.imported} funcion√°rios do Excel`\n      );\n      \n      res.json(result);\n    } catch (error) {\n      console.error(\"Error importing employees:\", error);\n      res.status(500).json({ success: false, error: \"Failed to import employees: \" + error.message });\n    }\n  });\n\n  app.post('/api/employees/link-cases', isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      if (req.user.role !== 'admin') {\n        return res.status(403).json({ message: \"Insufficient permissions\" });\n      }\n\n      const { linkCasesToEmployees } = await import('./importEmployees');\n      const result = await linkCasesToEmployees();\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error linking cases:\", error);\n      res.status(500).json({ message: \"Failed to link cases\" });\n    }\n  });\n\n\n\n  // User management routes\n  app.get(\"/api/users\", isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const currentUser = await storage.getUser(req.user?.id);\n      \n      // Only admins can manage users\n      if (currentUser?.role !== 'admin') {\n        await logActivity(req, 'DENIED_ACCESS', 'USER_MANAGEMENT', 'access', `Tentativa de acesso negada ao gerenciamento de usu√°rios`);\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const users = await storage.getAllUsers();\n      res.json(users);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      res.status(500).json({ message: \"Failed to fetch users\" });\n    }\n  });\n\n  app.post(\"/api/users\", isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      console.log('üîÑ POST /api/users - Criando usu√°rio:', req.body);\n      \n      const currentUser = await storage.getUser(req.user?.id);\n      \n      // Only admins can create users\n      if (currentUser?.role !== 'admin') {\n        console.log('‚ùå Acesso negado - usu√°rio n√£o √© admin:', currentUser?.role);\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const userData = insertUserSchema.parse(req.body);\n      console.log('‚úÖ Dados validados pelo schema:', userData);\n      \n      // Verificar duplicatas\n      const existingByUsername = await storage.getUserByUsername(userData.username);\n      if (existingByUsername) {\n        console.log('‚ùå Username j√° existe:', userData.username);\n        return res.status(400).json({ message: `Usu√°rio \"${userData.username}\" j√° existe` });\n      }\n\n      if (userData.email) {\n        const existingByEmail = await storage.getUserByEmail(userData.email);\n        if (existingByEmail) {\n          console.log('‚ùå Email j√° existe:', userData.email);\n          return res.status(400).json({ message: `Email \"${userData.email}\" j√° est√° em uso` });\n        }\n      }\n      \n      // Se a senha estiver vazia ou undefined, gerar uma senha padr√£o tempor√°ria\n      const password = userData.password && userData.password.trim() !== \"\" \n        ? userData.password \n        : \"temp123\"; // Senha tempor√°ria padr√£o\n      \n      console.log('üîê Hash da senha...');\n      const hashedPassword = await hashPassword(password);\n      \n      console.log('üíæ Criando usu√°rio no banco...');\n      const newUser = await storage.createUser({\n        ...userData,\n        password: hashedPassword,\n        // Garantir que campos opcionais tenham valores padr√£o apropriados\n        email: userData.email || null,\n        username: userData.username || `user_${Date.now()}`,\n        firstName: userData.firstName || null,\n        lastName: userData.lastName || null,\n      });\n      \n      console.log('‚úÖ Usu√°rio criado com sucesso:', newUser.username);\n      \n      await logActivity(\n        req,\n        'CREATE_USER',\n        'USER',\n        newUser.id,\n        `Criou usu√°rio ${newUser.username}`,\n        { username: newUser.username, email: newUser.email }\n      );\n      \n      res.status(201).json(newUser);\n    } catch (error) {\n      console.error(\"‚ùå ERRO COMPLETO AO CRIAR USU√ÅRIO:\", error);\n      \n      if (error instanceof z.ZodError) {\n        console.log('‚ùå Erro de valida√ß√£o Zod:', error.errors);\n        res.status(400).json({ \n          message: \"Dados inv√°lidos\", \n          errors: error.errors,\n          details: error.errors.map(e => `${e.path.join('.')}: ${e.message}`).join(', ')\n        });\n      } else if (error.message?.includes('j√° existe')) {\n        res.status(400).json({ message: error.message });\n      } else {\n        res.status(500).json({ \n          message: \"Falha ao criar usu√°rio\", \n          error: error.message,\n          details: \"Verifique a conex√£o com o banco de dados\"\n        });\n      }\n    }\n  });\n\n  app.put(\"/api/users/:id\", isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const currentUser = await storage.getUser(req.user?.id);\n      \n      // Only admins can update users\n      if (currentUser?.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const userData = updateUserSchema.parse(req.body);\n      \n      // Se h√° uma nova senha, hash ela. Caso contr√°rio, n√£o atualizar a senha\n      let updateData = { ...userData };\n      if (userData.password && userData.password.trim() !== \"\") {\n        updateData.password = await hashPassword(userData.password);\n      } else {\n        // Remove o campo password para n√£o atualizar\n        delete updateData.password;\n      }\n      \n      const updatedUser = await storage.updateUser(req.params.id, updateData);\n      res.json(updatedUser);\n    } catch (error) {\n      console.error(\"Error updating user:\", error);\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ message: \"Dados inv√°lidos\", errors: error.errors });\n      } else {\n        res.status(500).json({ message: \"Failed to update user\" });\n      }\n    }\n  });\n\n  app.delete(\"/api/users/:id\", isAuthenticated, async (req: AuthenticatedRequest, res) => {\n    try {\n      const currentUser = await storage.getUser(req.user?.id);\n      \n      // Only admins can delete users\n      if (currentUser?.role !== 'admin') {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      await storage.deleteUser(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting user:\", error);\n      res.status(500).json({ message: \"Failed to delete user\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":28686},"server/storage.ts":{"content":"import {\n  users,\n  cases,\n  activityLog,\n  type User,\n  type InsertUser,\n  type Case,\n  type InsertCase,\n  type CaseWithRelations,\n  type ActivityLog,\n  type InsertActivityLog,\n  type ActivityLogWithUser,\n  type DashboardLayout,\n} from \"@shared/schema\";\nimport { db, pool } from \"./db\";\nimport { eq, desc, sql, and, or, ilike } from \"drizzle-orm\";\nimport { hashPassword } from \"./auth\";\n\nexport interface IStorage {\n  // User operations\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Case operations\n  createCase(caseData: InsertCase): Promise<Case>;\n  getCases(filters?: { status?: string; search?: string }): Promise<CaseWithRelations[]>;\n  getCaseById(id: string): Promise<CaseWithRelations | undefined>;\n  updateCase(id: string, updates: Partial<InsertCase>): Promise<Case>;\n  deleteCase(id: string): Promise<void>;\n  updateCaseStatus(id: string, status: string, completedDate?: Date | null, dataEntrega?: Date | null): Promise<Case>;\n  \n  // Activity log operations\n  logActivity(activity: InsertActivityLog): Promise<ActivityLog>;\n  getActivityLogs(filters?: { action?: string; date?: string; search?: string; limit?: number; processOnly?: boolean }): Promise<ActivityLogWithUser[]>;\n  \n  // Dashboard statistics\n  getCaseStats(): Promise<{\n    total: number;\n    novos: number;\n    pendentes: number;\n    concluidos: number;\n    atrasados: number;\n    averageResponseTime: number;\n  }>;\n  \n  // Get users for assignment\n  getUsers(): Promise<User[]>;\n  \n  // Additional user management\n  getAllUsers(): Promise<User[]>;\n  updateUser(id: string, data: any): Promise<User>;\n  deleteUser(id: string): Promise<void>;\n  \n  // Dashboard layouts\n  saveDashboardLayout(userId: string, layout: any, widgets: any): Promise<DashboardLayout>;\n  getDashboardLayout(userId: string): Promise<DashboardLayout | undefined>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  private static userCache: User[] = [\n    {\n      id: 'admin-id',\n      email: 'admin@example.com',\n      username: 'admin',\n      password: 'abf4dcbb4d3321558df18aa60b7fc90dd0e17634949da3a47cfd2202938b5f4b4164d323772842d56d18a8ffa3f4955df0d5b31e32c3a349be930b58e91ceb3b.054755060135b94caaeea4f9ae9a1b0b', // admin123\n      firstName: 'Admin',\n      lastName: 'User',\n      profileImageUrl: null,\n      role: 'admin',\n      permissions: {\n        matricula: { view: true, edit: true },\n        nome: { view: true, edit: true },\n        processo: { view: true, edit: true },\n        prazoEntrega: { view: true, edit: true },\n        audiencia: { view: true, edit: true },\n        status: { view: true, edit: true },\n        observacao: { view: true, edit: true },\n        canCreateCases: true,\n        canDeleteCases: true,\n        pages: {\n          dashboard: true,\n          cases: true,\n          activityLog: true,\n          users: true\n        }\n      },\n      createdAt: new Date(),\n      updatedAt: new Date()\n    },\n    {\n      id: 'lucas-id',\n      email: 'lucas.silva@example.com',\n      username: 'lucas.silva',\n      password: 'b26c557fb2496df8b5d770d4a009d086b4b1e6c8a72faa5cac4173363f0aa0c508f013d163991b56a1cf845a14cd73edc85a79a2da4694112e85235cae889408.e7c922b279c802dac9d8e7f51209b9af', // barone13\n      firstName: 'Lucas',\n      lastName: 'Silva',\n      profileImageUrl: null,\n      role: 'viewer',\n      permissions: {\n        matricula: { view: true, edit: false },\n        nome: { view: true, edit: false },\n        processo: { view: true, edit: false },\n        prazoEntrega: { view: true, edit: false },\n        audiencia: { view: true, edit: false },\n        status: { view: true, edit: false },\n        observacao: { view: true, edit: false },\n        canCreateCases: false,\n        canDeleteCases: false,\n        pages: {\n          dashboard: false,\n          cases: true,\n          activityLog: false,\n          users: false\n        }\n      },\n      createdAt: new Date(),\n      updatedAt: new Date()\n    }\n  ];\n  \n  private static activityLogs: ActivityLog[] = []; // Static para persistir entre reinicializa√ß√µes\n  private static casesCache: CaseWithRelations[] = []; // Static para persistir mudan√ßas de status\n  private static dashboardLayouts: DashboardLayout[] = [];\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    console.log(`üîç BUSCANDO USU√ÅRIO: ${id}`);\n    \n    const user = DatabaseStorage.userCache.find(user => user.id === id);\n    if (user) {\n      console.log(`‚úÖ USU√ÅRIO ENCONTRADO: ${user.username} com permiss√µes:`, JSON.stringify(user.permissions, null, 2));\n      return user;\n    }\n    \n    console.log(`‚ùå USU√ÅRIO N√ÉO ENCONTRADO: ${id}`);\n    return undefined;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    console.log(`üîç SEARCHING USER: ${username}`);\n    \n    const user = DatabaseStorage.userCache.find(user => user.username === username);\n    console.log(`‚úÖ FOUND USER:`, user ? `${user.username} (${user.id})` : 'null');\n    return user;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    return DatabaseStorage.userCache.find(user => user.email === email);\n  }\n\n  async createUser(userData: InsertUser): Promise<User> {\n    console.log('üîÑ Tentando criar usu√°rio:', userData.username);\n    \n    // Verificar se usu√°rio j√° existe\n    const existingUser = await this.getUserByUsername(userData.username || '');\n    if (existingUser) {\n      console.log('‚ùå Usu√°rio j√° existe:', userData.username);\n      throw new Error(`Usu√°rio ${userData.username} j√° existe`);\n    }\n\n    const newUser: User = {\n      id: `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      email: userData.email || null,\n      username: userData.username || null,\n      password: userData.password || null,\n      firstName: userData.firstName || null,\n      lastName: userData.lastName || null,\n      profileImageUrl: userData.profileImageUrl || null,\n      role: userData.role || 'viewer',\n      permissions: userData.permissions || {},\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n    \n    DatabaseStorage.userCache.push(newUser);\n    console.log('‚úÖ Usu√°rio criado com sucesso:', newUser.username);\n    return newUser;\n  }\n\n  // Case operations\n  async createCase(caseData: InsertCase): Promise<Case> {\n    const [newCase] = await db\n      .insert(cases)\n      .values(caseData)\n      .returning();\n    return newCase;\n  }\n\n  async getCases(filters?: { status?: string; search?: string }): Promise<CaseWithRelations[]> {\n    try {\n      // Buscar todos os casos do banco de dados\n      let query = `\n        SELECT \n          c.id,\n          c.client_name, \n          c.process_number,\n          c.description,\n          c.status,\n          c.start_date,\n          c.due_date, \n          c.completed_date,\n          c.data_entrega,\n          c.tipo_processo,\n          c.documentos_solicitados,\n          c.documentos_anexados, \n          c.observacoes,\n          c.assigned_to_id,\n          c.created_by_id,\n          c.created_at,\n          c.updated_at,\n          c.employee_id,\n          e.nome as employee_name,\n          e.matricula\n        FROM cases c\n        LEFT JOIN employees e ON c.employee_id = e.id\n        WHERE 1=1\n      `;\n\n      const queryParams: any[] = [];\n      \n      // Aplicar filtros\n      if (filters?.status && filters.status !== \"all\") {\n        query += ` AND c.status = $${queryParams.length + 1}`;\n        queryParams.push(filters.status);\n      }\n      \n      if (filters?.search) {\n        const searchParam = `%${filters.search.toLowerCase()}%`;\n        query += ` AND (\n          LOWER(c.client_name) LIKE $${queryParams.length + 1} OR\n          LOWER(c.process_number) LIKE $${queryParams.length + 2} OR\n          LOWER(c.description) LIKE $${queryParams.length + 3} OR\n          LOWER(COALESCE(e.nome, '')) LIKE $${queryParams.length + 4} OR\n          LOWER(COALESCE(e.matricula::text, '')) LIKE $${queryParams.length + 5}\n        )`;\n        queryParams.push(searchParam, searchParam, searchParam, searchParam, searchParam);\n      }\n\n      // Ordenar por prazo de entrega (mais urgente primeiro), depois por data de cria√ß√£o\n      query += ` ORDER BY \n        CASE \n          WHEN c.due_date IS NULL THEN 1 \n          ELSE 0 \n        END,\n        c.due_date ASC, \n        c.created_at DESC`;\n\n      const result = await pool.query(query, queryParams);\n\n      const today = new Date();\n      const cases = result.rows.map((row: any) => {\n        const dueDate = row.due_date ? new Date(row.due_date) : null;\n        const isOverdue = dueDate && dueDate < today && row.status !== 'concluido';\n        const isNearDue = dueDate && !isOverdue && row.status !== 'concluido' ? \n          (dueDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24) <= 3 : false; // 3 dias ou menos\n        \n        // Calcular tempo de conclus√£o se o processo estiver conclu√≠do\n        let tempoConclucao = null;\n        let tempoConclucaoTexto = null;\n        if (row.status === 'concluido' && row.completed_date && row.created_at) {\n          const criacao = new Date(row.created_at);\n          const conclusao = new Date(row.completed_date);\n          const diffMs = conclusao.getTime() - criacao.getTime();\n          \n          const dias = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n          const horas = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n          const minutos = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\n          \n          tempoConclucao = diffMs;\n          \n          // Formata√ß√£o do texto\n          if (dias > 0) {\n            tempoConclucaoTexto = `${dias} dia${dias > 1 ? 's' : ''}${horas > 0 ? ` e ${horas}h` : ''}`;\n          } else if (horas > 0) {\n            tempoConclucaoTexto = `${horas} hora${horas > 1 ? 's' : ''}${minutos > 0 ? ` e ${minutos}min` : ''}`;\n          } else {\n            tempoConclucaoTexto = `${minutos} minuto${minutos > 1 ? 's' : ''}`;\n          }\n        }\n        \n        // Calcular cor de alerta\n        let alertColor = '';\n        if (isOverdue) {\n          alertColor = 'red'; // Atrasado\n        } else if (isNearDue) {\n          alertColor = 'yellow'; // Pr√≥ximo do prazo\n        } else {\n          alertColor = 'green'; // Normal\n        }\n        \n        return {\n          id: row.id,\n          clientName: row.client_name,\n          processNumber: row.process_number,\n          description: row.description || '',\n          status: isOverdue ? 'atrasado' : row.status, // Atualizar status automaticamente\n          startDate: row.start_date,\n          dueDate: row.due_date,\n          completedDate: row.completed_date,\n          dataEntrega: row.data_entrega,\n          dataAudiencia: row.data_audiencia,\n          tipoProcesso: row.tipo_processo,\n          documentosSolicitados: row.documentos_solicitados,\n          documentosAnexados: row.documentos_anexados,\n          observacoes: row.observacoes,\n          assignedToId: row.assigned_to_id,\n          createdById: row.created_by_id,\n          createdAt: new Date(row.created_at),\n          updatedAt: new Date(row.updated_at),\n          assignedTo: null,\n          createdBy: {\n            id: row.created_by_id,\n            email: null,\n            username: null, \n            password: null,\n            firstName: null,\n            lastName: null,\n            profileImageUrl: null,\n            role: 'admin',\n            permissions: {},\n            createdAt: null,\n            updatedAt: null\n          },\n          // Campos espec√≠ficos do sistema brasileiro\n          matricula: row.matricula,\n          nome: row.employee_name || row.client_name,\n          processo: row.description || '',\n          prazoEntrega: row.due_date,\n          audiencia: null,\n          employeeId: row.employee_id,\n          // Campos para alertas visuais\n          alertColor,\n          isOverdue,\n          isNearDue,\n          // Campos para tempo de conclus√£o\n          tempoConclucao,\n          tempoConclucaoTexto\n        };\n      });\n\n      return cases;\n    } catch (error) {\n      console.error('Erro ao buscar casos:', error);\n      throw new Error('Falha ao buscar casos do banco de dados');\n    }\n  }\n\n  async getCaseById(id: string): Promise<CaseWithRelations | undefined> {\n    const allCases = await this.getCases(); // Garantir que cases s√£o buscados do banco\n    console.log('üîç DEBUG: Buscando caso por ID no storage:', id);\n    console.log('üìã DEBUG: Total casos carregados:', allCases.length);\n    const foundCase = allCases.find(c => c.id === id);\n    console.log('üéØ DEBUG: Caso encontrado:', foundCase ? foundCase.id : 'N√ÉO ENCONTRADO');\n    return foundCase;\n  }\n\n  async updateCase(id: string, updates: Partial<InsertCase>): Promise<Case> {\n    console.log('üîß DEBUG: Iniciando updateCase para ID:', id);\n    console.log('üìù DEBUG: Updates recebidos:', updates);\n    \n    try {\n      // Buscar o caso no banco de dados usando SQL direto\n      const query = `\n        UPDATE cases \n        SET \n          client_name = COALESCE($2, client_name),\n          process_number = COALESCE($3, process_number), \n          description = COALESCE($4, description),\n          status = COALESCE($5, status),\n          due_date = COALESCE($6, due_date),\n          start_date = COALESCE($7, start_date),\n          observacoes = COALESCE($8, observacoes),\n          employee_id = COALESCE($9, employee_id),\n          assigned_to_id = COALESCE($10, assigned_to_id),\n          updated_at = NOW()\n        WHERE id = $1\n        RETURNING *\n      `;\n      \n      const result = await pool.query(query, [\n        id,\n        updates.clientName || null,\n        updates.processNumber || null,\n        updates.description || null,\n        updates.status || null,\n        updates.dueDate || null,\n        updates.startDate || null,\n        updates.observacoes || null,\n        updates.employeeId || null,\n        updates.assignedToId || null\n      ]);\n      \n      if (result.rows.length === 0) {\n        console.log('‚ùå DEBUG: Caso n√£o encontrado no banco');\n        throw new Error(\"Case not found\");\n      }\n      \n      const updatedCase = result.rows[0];\n      console.log('‚úÖ DEBUG: Caso atualizado no banco:', updatedCase.id);\n      \n      // Converter para o formato correto\n      return {\n        id: updatedCase.id,\n        clientName: updatedCase.client_name,\n        processNumber: updatedCase.process_number,\n        description: updatedCase.description,\n        status: updatedCase.status,\n        startDate: updatedCase.start_date,\n        dueDate: updatedCase.due_date,\n        completedDate: updatedCase.completed_date,\n        dataEntrega: updatedCase.data_entrega,\n        tipoProcesso: updatedCase.tipo_processo,\n        documentosSolicitados: updatedCase.documentos_solicitados,\n        documentosAnexados: updatedCase.documentos_anexados,\n        observacoes: updatedCase.observacoes,\n        assignedToId: updatedCase.assigned_to_id,\n        createdById: updatedCase.created_by_id,\n        createdAt: new Date(updatedCase.created_at),\n        updatedAt: new Date(updatedCase.updated_at),\n        employeeId: updatedCase.employee_id,\n        matricula: updatedCase.matricula,\n        dataAudiencia: updatedCase.data_audiencia\n      };\n    } catch (error) {\n      console.error('‚ùå DEBUG: Erro ao atualizar caso:', error);\n      throw error;\n    }\n  }\n\n  async deleteCase(id: string): Promise<void> {\n    console.log('üóëÔ∏è DEBUG: Iniciando exclus√£o do caso:', id);\n    \n    try {\n      // Deletar o caso do banco de dados\n      const deleteQuery = `DELETE FROM cases WHERE id = $1 RETURNING id`;\n      const result = await pool.query(deleteQuery, [id]);\n      \n      if (result.rows.length === 0) {\n        console.log('‚ùå DEBUG: Caso n√£o encontrado para exclus√£o');\n        throw new Error(\"Case not found\");\n      }\n      \n      console.log('‚úÖ DEBUG: Caso exclu√≠do do banco:', result.rows[0].id);\n    } catch (error) {\n      console.error('‚ùå DEBUG: Erro ao excluir caso:', error);\n      throw error;\n    }\n  }\n\n  async updateCaseStatus(id: string, status: string, completedDate?: Date | null, dataEntrega?: Date | null): Promise<Case> {\n    console.log('üîß DEBUG: Atualizando status do caso:', id, 'para:', status);\n    \n    try {\n      // Primeiro verificar se o caso existe\n      const checkQuery = `SELECT id FROM cases WHERE id = $1`;\n      const checkResult = await pool.query(checkQuery, [id]);\n      console.log('üîç DEBUG: Verificando exist√™ncia do caso:', checkResult.rows.length > 0 ? 'EXISTE' : 'N√ÉO EXISTE');\n      \n      if (checkResult.rows.length === 0) {\n        console.log('‚ùå DEBUG: Caso n√£o existe no banco de dados');\n        throw new Error(\"Case not found in database\");\n      }\n      \n      // Atualizar status primeiro\n      const updateStatusQuery = `UPDATE cases SET status = $2, updated_at = NOW() WHERE id = $1`;\n      await pool.query(updateStatusQuery, [id, status]);\n      \n      // Se status for \"conclu√≠do\", atualizar datas\n      if (status === 'concluido') {\n        const updateDatesQuery = `\n          UPDATE cases \n          SET \n            completed_date = COALESCE($2, NOW()),\n            data_entrega = COALESCE($3, NOW())\n          WHERE id = $1\n        `;\n        await pool.query(updateDatesQuery, [id, completedDate, dataEntrega]);\n      }\n      \n      // Buscar o caso atualizado\n      const selectQuery = `SELECT * FROM cases WHERE id = $1`;\n      const result = await pool.query(selectQuery, [id]);\n      \n      if (result.rows.length === 0) {\n        console.log('‚ùå DEBUG: Caso n√£o encontrado no banco para atualiza√ß√£o');\n        throw new Error(\"Case not found\");\n      }\n      \n      const updatedCase = result.rows[0];\n      console.log('‚úÖ DEBUG: Status do caso atualizado no banco:', updatedCase.id, '->', updatedCase.status);\n      \n      // Converter para o formato correto\n      return {\n        id: updatedCase.id,\n        clientName: updatedCase.client_name,\n        processNumber: updatedCase.process_number,\n        description: updatedCase.description,\n        status: updatedCase.status,\n        startDate: updatedCase.start_date,\n        dueDate: updatedCase.due_date,\n        completedDate: updatedCase.completed_date,\n        dataEntrega: updatedCase.data_entrega,\n        tipoProcesso: updatedCase.tipo_processo,\n        documentosSolicitados: updatedCase.documentos_solicitados,\n        documentosAnexados: updatedCase.documentos_anexados,\n        observacoes: updatedCase.observacoes,\n        assignedToId: updatedCase.assigned_to_id,\n        createdById: updatedCase.created_by_id,\n        createdAt: new Date(updatedCase.created_at),\n        updatedAt: new Date(updatedCase.updated_at),\n        employeeId: updatedCase.employee_id,\n        matricula: updatedCase.matricula,\n        dataAudiencia: updatedCase.data_audiencia\n      };\n    } catch (error) {\n      console.error('‚ùå DEBUG: Erro ao atualizar status do caso:', error);\n      throw error;\n    }\n  }\n\n  // Enhanced activity log operations\n  async logActivity(activity: InsertActivityLog): Promise<ActivityLog> {\n    const newLog: ActivityLog = {\n      id: `log_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...activity,\n      ipAddress: activity.ipAddress || null,\n      userAgent: activity.userAgent || null,\n      metadata: activity.metadata || null,\n      createdAt: new Date(),\n    };\n    \n    // Adicionar no in√≠cio para ter os mais recentes primeiro\n    DatabaseStorage.activityLogs.unshift(newLog);\n    \n    // Manter apenas os √∫ltimos 200 logs em mem√≥ria para performance\n    if (DatabaseStorage.activityLogs.length > 200) {\n      DatabaseStorage.activityLogs = DatabaseStorage.activityLogs.slice(0, 200);\n    }\n    \n    // Salvar tamb√©m no banco de dados para persist√™ncia\n    try {\n      await pool.query(`\n        INSERT INTO activity_log (id, action, resource_type, resource_id, description, user_id, ip_address, user_agent, metadata, created_at)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n      `, [\n        newLog.id,\n        newLog.action,\n        newLog.resourceType,\n        newLog.resourceId,\n        newLog.description,\n        newLog.userId,\n        newLog.ipAddress,\n        newLog.userAgent,\n        newLog.metadata ? JSON.stringify(newLog.metadata) : null,\n        newLog.createdAt\n      ]);\n      console.log(`üìã NOVO LOG SALVO: [${newLog.action}] ${newLog.resourceType} - ${newLog.description}`);\n    } catch (error) {\n      console.error('‚ùå ERROR: Falha ao salvar log no banco:', error);\n    }\n    \n    console.log(`üìã TOTAL LOGS NO CACHE EST√ÅTICO: ${DatabaseStorage.activityLogs.length}`);\n    \n    return newLog;\n  }\n\n  async getActivityLogs(filters?: { action?: string; date?: string; search?: string; limit?: number; processOnly?: boolean }): Promise<ActivityLogWithUser[]> {\n    const users = await this.getUsers();\n    \n    try {\n      // Build SQL query with filters\n      let whereConditions = [];\n      let queryParams: any[] = [];\n      let paramIndex = 1;\n\n      // Process-only filter\n      if (filters?.processOnly) {\n        const processActions = ['CREATE_CASE', 'UPDATE_CASE', 'DELETE_CASE', 'UPDATE_CASE_STATUS'];\n        whereConditions.push(`action = ANY($${paramIndex})`);\n        queryParams.push(processActions);\n        paramIndex++;\n      }\n\n      // Action filter\n      if (filters?.action && filters.action !== 'all') {\n        whereConditions.push(`action = $${paramIndex}`);\n        queryParams.push(filters.action);\n        paramIndex++;\n      }\n\n      // Date filter\n      if (filters?.date) {\n        const date = new Date(filters.date);\n        const nextDay = new Date(date.getTime() + 24 * 60 * 60 * 1000);\n        whereConditions.push(`created_at >= $${paramIndex} AND created_at < $${paramIndex + 1}`);\n        queryParams.push(date, nextDay);\n        paramIndex += 2;\n      }\n\n      // Search filter\n      if (filters?.search) {\n        whereConditions.push(`(LOWER(description) LIKE $${paramIndex} OR LOWER(action) LIKE $${paramIndex})`);\n        queryParams.push(`%${filters.search.toLowerCase()}%`);\n        paramIndex++;\n      }\n\n      const whereClause = whereConditions.length > 0 ? `WHERE ${whereConditions.join(' AND ')}` : '';\n      const limit = filters?.limit || 100;\n      \n      const query = `\n        SELECT * FROM activity_log \n        ${whereClause}\n        ORDER BY created_at DESC \n        LIMIT $${paramIndex}\n      `;\n      queryParams.push(limit);\n\n      console.log(`üîç DEBUG: Executando query com filtros: ${JSON.stringify(filters)}`);\n      console.log(`üìã DEBUG: SQL Query: ${query}`);\n      \n      const result = await pool.query(query, queryParams);\n      const dbLogs = result.rows;\n\n      console.log(`‚úÖ DEBUG: Encontrados ${dbLogs.length} logs no banco de dados`);\n\n      // Combine with in-memory logs (for recent activities that might not be in DB yet)\n      const memoryLogs = [...DatabaseStorage.activityLogs];\n      \n      // Filter memory logs with same criteria\n      let filteredMemoryLogs = memoryLogs;\n      if (filters?.processOnly) {\n        const processActions = ['CREATE_CASE', 'UPDATE_CASE', 'DELETE_CASE', 'UPDATE_CASE_STATUS'];\n        filteredMemoryLogs = filteredMemoryLogs.filter(log => processActions.includes(log.action));\n      }\n      if (filters?.action && filters.action !== 'all') {\n        filteredMemoryLogs = filteredMemoryLogs.filter(log => log.action === filters.action);\n      }\n      if (filters?.search) {\n        filteredMemoryLogs = filteredMemoryLogs.filter(log => \n          log.description.toLowerCase().includes(filters.search!.toLowerCase()) ||\n          log.action.toLowerCase().includes(filters.search!.toLowerCase())\n        );\n      }\n\n      // Convert DB logs to ActivityLog format and combine with memory logs\n      const allLogs: ActivityLog[] = [\n        ...filteredMemoryLogs, // Memory logs first (most recent)\n        ...dbLogs.map(row => ({\n          id: row.id,\n          action: row.action,\n          resourceType: row.resource_type,\n          resourceId: row.resource_id,\n          description: row.description,\n          userId: row.user_id,\n          ipAddress: row.ip_address,\n          userAgent: row.user_agent,\n          metadata: row.metadata,\n          createdAt: new Date(row.created_at)\n        }))\n      ];\n\n      // Remove duplicates (prefer memory version if exists)\n      const uniqueLogs = allLogs.filter((log, index, self) => \n        index === self.findIndex(l => l.id === log.id)\n      );\n\n      // Sort by creation date (newest first) and apply limit\n      const sortedLogs = uniqueLogs\n        .sort((a, b) => (b.createdAt?.getTime() || 0) - (a.createdAt?.getTime() || 0))\n        .slice(0, limit);\n\n      const resultWithUsers = sortedLogs.map(log => {\n        // Buscar usu√°rio tanto no cache quanto tentar mapear IDs conhecidos\n        let user = users.find(u => u.id === log.userId);\n        \n        // Se n√£o encontrou, tentar mapear IDs conhecidos do sistema\n        if (!user) {\n          if (log.userId === 'admin-id' || log.userId === 'admin') {\n            user = {\n              id: 'admin-id',\n              username: 'admin',\n              firstName: 'Admin',\n              lastName: 'User',\n              email: 'admin@example.com',\n              password: '',\n              profileImageUrl: null,\n              role: 'admin',\n              permissions: {},\n              createdAt: new Date(),\n              updatedAt: new Date()\n            };\n          } else if (log.userId === 'lucas-id' || log.userId === 'lucas.silva') {\n            user = {\n              id: 'lucas-id',\n              username: 'lucas.silva',\n              firstName: 'Lucas',\n              lastName: 'Silva',\n              email: 'lucas.silva@example.com',\n              password: '',\n              profileImageUrl: null,\n              role: 'viewer',\n              permissions: {},\n              createdAt: new Date(),\n              updatedAt: new Date()\n            };\n          }\n        }\n        \n        console.log(`üë§ DEBUG: Log ${log.id} - UserID: ${log.userId} - User found:`, user ? `${user.firstName} ${user.lastName}` : 'NOT FOUND');\n        \n        return {\n          ...log,\n          user: user || { \n            id: log.userId, \n            username: 'Usuario Desconhecido', \n            firstName: 'Usuario', \n            lastName: 'Desconhecido' \n          } as User\n        };\n      });\n\n      console.log(`‚úÖ DEBUG: Retornando ${resultWithUsers.length} logs processados para interface`);\n      console.log(`üìã DEBUG: Primeiros 3 logs:`, resultWithUsers.slice(0, 3).map(log => ({\n        id: log.id,\n        action: log.action,\n        description: log.description.substring(0, 50) + '...'\n      })));\n      \n      return resultWithUsers;\n    } catch (error) {\n      console.error('‚ùå ERROR: Falha ao buscar logs de atividade:', error);\n      // Fallback to memory only\n      let filteredLogs = [...DatabaseStorage.activityLogs];\n      \n      if (filters?.processOnly) {\n        const processActions = ['CREATE_CASE', 'UPDATE_CASE', 'DELETE_CASE', 'UPDATE_CASE_STATUS'];\n        filteredLogs = filteredLogs.filter(log => processActions.includes(log.action));\n      }\n      \n      const limit = filters?.limit || 100;\n      return filteredLogs.slice(0, limit).map(log => {\n        const user = users.find(u => u.id === log.userId);\n        return {\n          ...log,\n          user: user || { \n            id: log.userId, \n            username: 'Usuario Desconhecido', \n            firstName: 'Usuario', \n            lastName: 'Desconhecido' \n          } as User\n        };\n      });\n    }\n  }\n\n  // Dashboard statistics\n  async getCaseStats(): Promise<{\n    total: number;\n    novos: number;\n    pendentes: number;\n    concluidos: number;\n    atrasados: number;\n    averageResponseTime: number;\n  }> {\n    try {\n      console.log('üìä DEBUG: Iniciando c√°lculo de estat√≠sticas do dashboard');\n      \n      const allCases = await this.getCases();\n      console.log(`üìã DEBUG: Total de casos carregados: ${allCases.length}`);\n      \n      const today = new Date();\n      \n      // Contar por status real dos casos\n      const total = allCases.length;\n      const novos = allCases.filter(c => c.status === 'novo').length;\n      const pendentes = allCases.filter(c => c.status === 'pendente').length;\n      const concluidos = allCases.filter(c => c.status === 'concluido').length;\n      \n      // Calcular atrasados: casos com prazo vencido que n√£o est√£o conclu√≠dos\n      const atrasados = allCases.filter(c => {\n        if (c.status === 'concluido') return false;\n        if (!c.dueDate) return false;\n        const dueDate = new Date(c.dueDate);\n        return dueDate < today;\n      }).length;\n      \n      console.log(`üìä DEBUG: Estat√≠sticas calculadas:`, {\n        total, novos, pendentes, concluidos, atrasados\n      });\n      \n      // Calcular tempo m√©dio de resposta baseado em casos conclu√≠dos\n      const completedCases = allCases.filter(c => \n        c.status === 'concluido' && c.createdAt && (c.completedDate || c.dataEntrega)\n      );\n      \n      let averageResponseTime = 0;\n      \n      if (completedCases.length > 0) {\n        const totalDays = completedCases.reduce((sum, c) => {\n          const created = new Date(c.createdAt!);\n          const completed = new Date(c.completedDate || c.dataEntrega || c.updatedAt!);\n          const days = Math.ceil((completed.getTime() - created.getTime()) / (1000 * 60 * 60 * 24));\n          return sum + Math.max(days, 0); // Evitar valores negativos\n        }, 0);\n        averageResponseTime = Math.round(totalDays / completedCases.length);\n      }\n      \n      const stats = {\n        total,\n        novos,\n        pendentes,\n        concluidos,\n        atrasados,\n        averageResponseTime,\n      };\n      \n      console.log('‚úÖ DEBUG: Estat√≠sticas finais retornadas:', stats);\n      return stats;\n      \n    } catch (error) {\n      console.error('‚ùå ERRO ao calcular estat√≠sticas do dashboard:', error);\n      \n      // Retornar valores padr√£o em caso de erro\n      return {\n        total: 0,\n        novos: 0,\n        pendentes: 0,\n        concluidos: 0,\n        atrasados: 0,\n        averageResponseTime: 0,\n      };\n    }\n  }\n\n  // Get users for assignment\n  async getUsers(): Promise<User[]> {\n    return DatabaseStorage.userCache;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return DatabaseStorage.userCache;\n  }\n\n  async updateUser(id: string, data: any): Promise<User> {\n    const userIndex = DatabaseStorage.userCache.findIndex(u => u.id === id);\n    if (userIndex === -1) throw new Error('User not found');\n    \n    DatabaseStorage.userCache[userIndex] = {\n      ...DatabaseStorage.userCache[userIndex],\n      ...data,\n      updatedAt: new Date()\n    };\n    \n    return DatabaseStorage.userCache[userIndex];\n  }\n\n  async deleteUser(id: string): Promise<void> {\n    const userIndex = DatabaseStorage.userCache.findIndex(u => u.id === id);\n    if (userIndex === -1) throw new Error('User not found');\n    \n    DatabaseStorage.userCache.splice(userIndex, 1);\n  }\n\n  // Dashboard layouts\n  async saveDashboardLayout(userId: string, layout: any, widgets: any): Promise<DashboardLayout> {\n    const layoutData: DashboardLayout = {\n      id: `layout_${userId}`,\n      userId,\n      layout,\n      widgets,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    \n    const existingIndex = DatabaseStorage.dashboardLayouts.findIndex(l => l.userId === userId);\n    if (existingIndex >= 0) {\n      DatabaseStorage.dashboardLayouts[existingIndex] = layoutData;\n    } else {\n      DatabaseStorage.dashboardLayouts.push(layoutData);\n    }\n    \n    return layoutData;\n  }\n\n  async getDashboardLayout(userId: string): Promise<DashboardLayout | undefined> {\n    return DatabaseStorage.dashboardLayouts.find(l => l.userId === userId);\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":32039},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { sql } from 'drizzle-orm';\nimport { relations } from 'drizzle-orm';\nimport {\n  index,\n  jsonb,\n  pgTable,\n  timestamp,\n  varchar,\n  text,\n  integer,\n  boolean,\n  date,\n  decimal,\n} from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table - required for Replit Auth\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  username: varchar(\"username\").unique(),\n  password: varchar(\"password\"),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  role: varchar(\"role\").notNull().default(\"viewer\"), // admin, editor, or viewer\n  permissions: jsonb(\"permissions\").default(sql`'{\n    \"matricula\": {\"view\": true, \"edit\": false},\n    \"nome\": {\"view\": true, \"edit\": false},\n    \"processo\": {\"view\": true, \"edit\": false},\n    \"prazoEntrega\": {\"view\": true, \"edit\": false},\n    \"audiencia\": {\"view\": true, \"edit\": false},\n    \"status\": {\"view\": true, \"edit\": false},\n    \"observacao\": {\"view\": true, \"edit\": false},\n    \"canCreateCases\": false,\n    \"canDeleteCases\": false,\n    \"pages\": {\n      \"dashboard\": true,\n      \"cases\": true,\n      \"activityLog\": false,\n      \"users\": false\n    }\n  }'::jsonb`),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Legal cases table\nexport const cases = pgTable(\"cases\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  clientName: varchar(\"client_name\").notNull(),\n  employeeId: varchar(\"employee_id\").references(() => employees.id), // Link para funcion√°rio\n  processNumber: varchar(\"process_number\").notNull(),\n  description: text(\"description\").notNull(),\n  status: varchar(\"status\").notNull().default(\"novo\"), // novo, pendente, concluido, atrasado\n  startDate: timestamp(\"start_date\"),\n  dueDate: timestamp(\"due_date\"),\n  dataAudiencia: timestamp(\"data_audiencia\"), // Data da audi√™ncia\n  completedDate: timestamp(\"completed_date\"),\n  dataEntrega: timestamp(\"data_entrega\"), // Data autom√°tica quando status vira \"concluido\"\n  matricula: varchar(\"matricula\"), // Matr√≠cula do funcion√°rio relacionado\n  tipoProcesso: varchar(\"tipo_processo\"), // trabalhista, rescisao_indireta, dano_moral, etc\n  documentosSolicitados: jsonb(\"documentos_solicitados\"), // lista de documentos necess√°rios \n  documentosAnexados: jsonb(\"documentos_anexados\"), // lista de documentos enviados com links\n  observacoes: text(\"observacoes\"),\n  assignedToId: varchar(\"assigned_to_id\").references(() => users.id),\n  createdById: varchar(\"created_by_id\").notNull().references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Nova tabela para tipos de processos\nexport const tiposProcesso = pgTable(\"tipos_processo\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  nome: varchar(\"nome\").notNull(),\n  descricao: text(\"descricao\"),\n  documentosPadrao: jsonb(\"documentos_padrao\"), // documentos t√≠picos para este tipo\n  cor: varchar(\"cor\").default(\"#3b82f6\"), // cor para identifica√ß√£o visual\n  ativo: boolean(\"ativo\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Funcion√°rios table - 11 colunas do Excel\nexport const employees = pgTable(\"employees\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  empresa: varchar(\"empresa\"), // Coluna 1: Empresa\n  nome: varchar(\"nome\").notNull(), // Coluna 2: Nome\n  matricula: varchar(\"matricula\").unique().notNull(), // Coluna 3: Matr√≠cula\n  rg: varchar(\"rg\"), // Coluna 4: RG\n  pis: varchar(\"pis\"), // Coluna 5: PIS\n  dataAdmissao: date(\"data_admissao\"), // Coluna 6: Data Admiss√£o\n  dataDemissao: date(\"data_demissao\"), // Coluna 7: Data Demiss√£o\n  salario: varchar(\"salario\"), // Coluna 8: Sal√°rio\n  cargo: varchar(\"cargo\"), // Coluna 9: Cargo\n  centroCusto: varchar(\"centro_custo\"), // Coluna 10: Centro Custo\n  departamento: varchar(\"departamento\"), // Coluna 11: Departamento\n  // Campos adicionais do sistema\n  cpf: varchar(\"cpf\").unique(),\n  status: varchar(\"status\").default(\"ativo\"), // ativo, inativo, demitido\n  email: varchar(\"email\"),\n  telefone: varchar(\"telefone\"),\n  endereco: text(\"endereco\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Activity log table\nexport const activityLog = pgTable(\"activity_log\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  action: varchar(\"action\").notNull(), // create, edit, delete, status_change\n  resourceType: varchar(\"resource_type\").notNull(), // case, user\n  resourceId: varchar(\"resource_id\").notNull(),\n  description: text(\"description\").notNull(),\n  ipAddress: varchar(\"ip_address\"),\n  userAgent: text(\"user_agent\"),\n  metadata: text(\"metadata\"), // JSON metadata for additional details\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Dashboard layouts table - for drag-and-drop widget customization\nexport const dashboardLayouts = pgTable(\"dashboard_layouts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  layout: jsonb(\"layout\").notNull(), // Grid layout configuration  \n  widgets: jsonb(\"widgets\").notNull(), // Widget configurations\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  assignedCases: many(cases, { relationName: \"assignedTo\" }),\n  createdCases: many(cases, { relationName: \"createdBy\" }),\n  activityLogs: many(activityLog),\n}));\n\nexport const casesRelations = relations(cases, ({ one }) => ({\n  assignedTo: one(users, {\n    fields: [cases.assignedToId],\n    references: [users.id],\n    relationName: \"assignedTo\",\n  }),\n  createdBy: one(users, {\n    fields: [cases.createdById],\n    references: [users.id],\n    relationName: \"createdBy\",\n  }),\n  employee: one(employees, {\n    fields: [cases.employeeId],\n    references: [employees.id],\n  }),\n}));\n\nexport const employeesRelations = relations(employees, ({ many }) => ({\n  cases: many(cases),\n}));\n\nexport const activityLogRelations = relations(activityLog, ({ one }) => ({\n  user: one(users, {\n    fields: [activityLog.userId],\n    references: [users.id],\n  }),\n}));\n\n// Schemas\n// User insert and update schemas - all fields optional except role\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n}).partial().extend({\n  role: z.enum([\"admin\", \"editor\", \"viewer\"]).default(\"viewer\")\n});\n\nexport const updateUserSchema = insertUserSchema.partial();\n\nexport const loginUserSchema = z.object({\n  username: z.string().min(1, \"Username √© obrigat√≥rio\"),\n  password: z.string().min(1, \"Senha √© obrigat√≥ria\"),\n});\n\nexport const insertCaseSchema = createInsertSchema(cases).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n  completedDate: true,\n});\n\nexport const insertActivityLogSchema = createInsertSchema(activityLog).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type LoginUser = z.infer<typeof loginUserSchema>;\nexport type Case = typeof cases.$inferSelect;\nexport type InsertCase = z.infer<typeof insertCaseSchema>;\nexport type ActivityLog = typeof activityLog.$inferSelect;\nexport type InsertActivityLog = z.infer<typeof insertActivityLogSchema>;\n\n// Case with relations type\nexport type CaseWithRelations = Case & {\n  assignedTo?: User | null;\n  createdBy: User;\n};\n\n// Activity log with user type\nexport type ActivityLogWithUser = ActivityLog & {\n  user: User;\n};\n\n// Employee types\nexport type Employee = typeof employees.$inferSelect;\nexport type InsertEmployee = typeof employees.$inferInsert;\n\nexport const insertEmployeeSchema = createInsertSchema(employees).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\n// Dashboard layout schemas\nexport const insertDashboardLayoutSchema = createInsertSchema(dashboardLayouts).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\n// Dashboard layout types\nexport type DashboardLayout = {\n  id: string;\n  userId: string;\n  layout: any;\n  widgets: any;\n  createdAt: Date;\n  updatedAt: Date;\n};\n\nexport type InsertDashboardLayout = z.infer<typeof insertDashboardLayoutSchema>;\n\n// Widget types for dashboard\nexport interface WidgetConfig {\n  id: string;\n  type: 'stats' | 'chart' | 'recent-cases' | 'case-distribution' | 'activity-feed' | 'quick-actions';\n  title: string;\n  data?: any;\n  refreshInterval?: number;\n}\n\nexport interface LayoutItem {\n  i: string; // widget id\n  x: number;\n  y: number; \n  w: number;\n  h: number;\n  minW?: number;\n  minH?: number;\n  maxW?: number;\n  maxH?: number;\n}\n","size_bytes":9257},"client/src/App.tsx":{"content":"import { Switch, Route, useLocation } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport NotFound from \"@/pages/not-found\";\n\nimport AuthPage from \"@/pages/AuthPage\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport Cases from \"@/pages/Cases\";\nimport Users from \"@/pages/Users\";\nimport ActivityLog from \"@/pages/ActivityLog\";\nimport Employees from \"@/pages/Employees\";\nimport Layout from \"@/components/Layout\";\n\nfunction Router() {\n  const { isAuthenticated, isLoading, user } = useAuth();\n  const [location, navigate] = useLocation();\n\n  // Mostrar loading apenas por um breve momento\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Se n√£o h√° usu√°rio autenticado, mostrar p√°gina de login\n  if (!isAuthenticated || !user) {\n    return <AuthPage />;\n  }\n\n  // Fun√ß√£o para verificar se tem permiss√£o para uma p√°gina\n  const hasPagePermission = (page: string) => {\n    if (user?.role === 'admin') return true;\n    return (user as any)?.permissions?.pages?.[page] === true;\n  };\n\n  // Encontrar a primeira p√°gina que o usu√°rio tem permiss√£o\n  const getFirstAllowedPage = () => {\n    if (hasPagePermission('dashboard')) return 'dashboard';\n    if (hasPagePermission('cases')) return 'cases';\n    if (hasPagePermission('activityLog')) return 'activityLog';\n    if (hasPagePermission('users')) return 'users';\n    return null;\n  };\n\n  const firstAllowedPage = getFirstAllowedPage();\n\n  // N√£o fazer redirecionamentos autom√°ticos - deixar as rotas funcionarem naturalmente\n\n  // Se n√£o tem permiss√£o para nenhuma p√°gina, mostrar erro\n  if (!firstAllowedPage) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center p-8 bg-white rounded-lg shadow-lg max-w-md\">\n          <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Acesso Negado</h2>\n          <p className=\"text-gray-600 mb-4\">\n            Voc√™ n√£o tem permiss√£o para acessar nenhuma p√°gina do sistema.\n            Entre em contato com o administrador.\n          </p>\n          <Button onClick={() => window.location.href = \"/api/logout\"} variant=\"outline\">\n            Sair\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Layout>\n      <Switch>\n        {/* Dashboard na p√°gina principal se tiver permiss√£o */}\n        {hasPagePermission('dashboard') ? (\n          <Route path=\"/\" component={Dashboard} />\n        ) : firstAllowedPage === 'cases' ? (\n          <Route path=\"/\" component={Cases} />\n        ) : firstAllowedPage === 'activityLog' ? (\n          <Route path=\"/\" component={ActivityLog} />\n        ) : firstAllowedPage === 'users' ? (\n          <Route path=\"/\" component={Users} />\n        ) : (\n          <Route path=\"/\" component={NotFound} />\n        )}\n        {hasPagePermission('cases') && <Route path=\"/cases\" component={Cases} />}\n        <Route path=\"/employees\" component={Employees} />\n        {hasPagePermission('users') && <Route path=\"/users\" component={Users} />}\n        {hasPagePermission('activityLog') && <Route path=\"/activity-log\" component={ActivityLog} />}\n        <Route component={NotFound} />\n      </Switch>\n    </Layout>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":3979},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0, 0%, 100%);\n  --foreground: hsl(20, 14.3%, 4.1%);\n  --muted: hsl(60, 4.8%, 95.9%);\n  --muted-foreground: hsl(25, 5.3%, 44.7%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(20, 14.3%, 4.1%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(20, 14.3%, 4.1%);\n  --border: hsl(20, 5.9%, 90%);\n  --input: hsl(20, 5.9%, 90%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(60, 4.8%, 95.9%);\n  --secondary-foreground: hsl(24, 9.8%, 10%);\n  --accent: hsl(60, 4.8%, 95.9%);\n  --accent-foreground: hsl(24, 9.8%, 10%);\n  --destructive: hsl(0, 84.2%, 60.2%);\n  --destructive-foreground: hsl(60, 9.1%, 97.8%);\n  --ring: hsl(20, 14.3%, 4.1%);\n  --radius: 0.5rem;\n  \n  /* BASE FACILITIES Brand Colors */\n  --base-navy: hsl(218, 79%, 33%);\n  --base-red: hsl(0, 73%, 50%);\n  --base-light: hsl(210, 40%, 98%);\n}\n\n.dark {\n  --background: hsl(240, 10%, 3.9%);\n  --foreground: hsl(0, 0%, 98%);\n  --muted: hsl(240, 3.7%, 15.9%);\n  --muted-foreground: hsl(240, 5%, 64.9%);\n  --popover: hsl(240, 10%, 3.9%);\n  --popover-foreground: hsl(0, 0%, 98%);\n  --card: hsl(240, 10%, 3.9%);\n  --card-foreground: hsl(0, 0%, 98%);\n  --border: hsl(240, 3.7%, 15.9%);\n  --input: hsl(240, 3.7%, 15.9%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(240, 3.7%, 15.9%);\n  --secondary-foreground: hsl(0, 0%, 98%);\n  --accent: hsl(240, 3.7%, 15.9%);\n  --accent-foreground: hsl(0, 0%, 98%);\n  --destructive: hsl(0, 62.8%, 30.6%);\n  --destructive-foreground: hsl(0, 0%, 98%);\n  --ring: hsl(240, 4.9%, 83.9%);\n  --radius: 0.5rem;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n    font-family: 'Inter', sans-serif;\n  }\n}\n\n@layer utilities {\n  .gradient-bg {\n    background: linear-gradient(135deg, hsl(0, 73%, 50%) 0%, hsl(16, 85%, 24%) 50%, hsl(218, 79%, 33%) 100%);\n  }\n  \n  .base-navy {\n    color: hsl(218, 79%, 33%);\n  }\n  \n  .bg-base-navy {\n    background-color: hsl(218, 79%, 33%);\n  }\n  \n  .base-red {\n    color: hsl(0, 73%, 50%);\n  }\n  \n  .bg-base-red {\n    background-color: hsl(0, 73%, 50%);\n  }\n  \n  .bg-base-light {\n    background-color: hsl(210, 40%, 98%);\n  }\n\n  /* Status colors for case rows */\n  .status-novo {\n    background-color: hsl(45, 93%, 93%);\n    border-left: 4px solid hsl(43, 89%, 38%);\n  }\n  \n  .status-andamento {\n    background-color: hsl(214, 95%, 93%);\n    border-left: 4px solid hsl(221, 83%, 53%);\n  }\n  \n  .status-concluido {\n    background-color: hsl(142, 76%, 91%);\n    border-left: 4px solid hsl(159, 64%, 52%);\n  }\n  \n  .status-pendente {\n    background-color: hsl(0, 93%, 94%);\n    border-left: 4px solid hsl(0, 84%, 60%);\n  }\n\n  .hover-row:hover {\n    background-color: hsl(210, 40%, 96%);\n    transform: translateY(-1px);\n    transition: all 0.2s ease;\n  }\n}\n\n/* Password field styling */\n.password-field[type=\"password\"] {\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;\n  font-size: 14px;\n  letter-spacing: 0.05em;\n}\n\n.password-field[type=\"password\"]:not(:placeholder-shown) {\n  letter-spacing: 0.2em;\n}\n\n/* Base styles loaded */\n","size_bytes":3251},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/CaseModal.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertCaseSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\n\ninterface CaseModalProps {\n  trigger: React.ReactNode;\n  caseData?: any;\n  onSubmit: (data: any) => void;\n  isSubmitting?: boolean;\n}\n\nconst formSchema = z.object({\n  matricula: z.string().min(1, \"Matr√≠cula √© obrigat√≥ria\"),\n  nome: z.string().min(1, \"Nome √© obrigat√≥rio\"),\n  processo: z.string().min(1, \"Descri√ß√£o do processo √© obrigat√≥ria\"),\n  prazoEntrega: z.string().optional(),\n  audiencia: z.string().optional(),\n  observacao: z.string().optional(),\n  status: z.string().default(\"novo\"),\n});\n\nexport default function CaseModal({ trigger, caseData, onSubmit, isSubmitting }: CaseModalProps) {\n  const [open, setOpen] = useState(false);\n\n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      matricula: caseData?.matricula || \"\",\n      nome: caseData?.nome || \"\",\n      processo: caseData?.processo || \"\",\n      prazoEntrega: caseData?.prazoEntrega ? new Date(caseData.prazoEntrega).toISOString().split('T')[0] : \"\",\n      audiencia: caseData?.audiencia ? new Date(caseData.audiencia).toISOString().split('T')[0] : \"\",\n      observacao: caseData?.observacao || \"\",\n      status: caseData?.status || \"novo\",\n    },\n  });\n\n  const handleSubmit = (values: z.infer<typeof formSchema>) => {\n    const submitData = {\n      ...values,\n      prazoEntrega: values.prazoEntrega ? new Date(values.prazoEntrega) : null,\n      audiencia: values.audiencia ? new Date(values.audiencia) : null,\n      observacao: values.observacao || null,\n    };\n    onSubmit(submitData);\n    setOpen(false);\n    form.reset();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        {trigger}\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[525px]\">\n        <DialogHeader>\n          <DialogTitle>\n            {caseData ? \"Editar Caso\" : \"Novo Caso\"}\n          </DialogTitle>\n        </DialogHeader>\n        \n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"matricula\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Matr√≠cula</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"Ex: 1500258\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            \n            <FormField\n              control={form.control}\n              name=\"nome\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Nome</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"Nome completo\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            \n            <FormField\n              control={form.control}\n              name=\"processo\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Descri√ß√£o do Processo</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      placeholder=\"Descreva os processos separados por v√≠rgula (ex: TRABALHISTA, Rescis√£o indireta, Dano Moral)\"\n                      className=\"min-h-[80px]\"\n                      {...field} \n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"prazoEntrega\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Prazo de Entrega</FormLabel>\n                    <FormControl>\n                      <Input type=\"date\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              \n              <FormField\n                control={form.control}\n                name=\"audiencia\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Data Audi√™ncia</FormLabel>\n                    <FormControl>\n                      <Input type=\"date\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"observacao\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Observa√ß√£o</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      placeholder=\"Observa√ß√µes adicionais sobre o processo (opcional)\"\n                      className=\"min-h-[60px]\"\n                      {...field} \n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end space-x-2 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => setOpen(false)}\n              >\n                Cancelar\n              </Button>\n              <Button type=\"submit\" disabled={isSubmitting}>\n                {isSubmitting ? \"Salvando...\" : (caseData ? \"Salvar\" : \"Criar\")}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":6275},"client/src/components/ConfirmStatusDialog.tsx":{"content":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface ConfirmStatusDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onConfirm: () => void;\n  currentStatus: string;\n  newStatus: string;\n  processNumber: string;\n  clientName: string;\n}\n\nexport default function ConfirmStatusDialog({\n  open,\n  onOpenChange,\n  onConfirm,\n  currentStatus,\n  newStatus,\n  processNumber,\n  clientName,\n}: ConfirmStatusDialogProps) {\n  const statusLabels = {\n    'novo': 'Novo',\n    'andamento': 'Em Andamento',\n    'concluido': 'Conclu√≠do',\n    'pendente': 'Pendente'\n  };\n\n  const currentLabel = statusLabels[currentStatus as keyof typeof statusLabels];\n  const newLabel = statusLabels[newStatus as keyof typeof statusLabels];\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'novo': return 'text-yellow-600';\n      case 'andamento': return 'text-blue-600';\n      case 'concluido': return 'text-green-600';\n      case 'pendente': return 'text-red-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent className=\"max-w-md\">\n        <AlertDialogHeader>\n          <AlertDialogTitle className=\"text-lg font-semibold\">\n            Confirmar Altera√ß√£o de Status\n          </AlertDialogTitle>\n          <AlertDialogDescription className=\"text-sm text-gray-600 space-y-3\">\n            <div className=\"bg-gray-50 p-3 rounded-lg border\">\n              <p><strong>Processo:</strong> {processNumber}</p>\n              <p><strong>Cliente:</strong> {clientName}</p>\n            </div>\n            \n            <div className=\"flex items-center justify-center space-x-4 py-2\">\n              <div className=\"text-center\">\n                <span className={`inline-block px-3 py-1 rounded-full text-sm font-medium bg-gray-100 ${getStatusColor(currentStatus)}`}>\n                  {currentLabel}\n                </span>\n                <p className=\"text-xs text-gray-500 mt-1\">Status atual</p>\n              </div>\n              \n              <div className=\"text-gray-400\">‚Üí</div>\n              \n              <div className=\"text-center\">\n                <span className={`inline-block px-3 py-1 rounded-full text-sm font-medium bg-gray-100 ${getStatusColor(newStatus)}`}>\n                  {newLabel}\n                </span>\n                <p className=\"text-xs text-gray-500 mt-1\">Novo status</p>\n              </div>\n            </div>\n\n            <p className=\"text-center text-sm\">\n              Tem certeza que deseja alterar o status deste processo?\n            </p>\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        \n        <AlertDialogFooter className=\"gap-2\">\n          <AlertDialogCancel className=\"bg-gray-100 hover:bg-gray-200 text-gray-800\">\n            Cancelar\n          </AlertDialogCancel>\n          <AlertDialogAction \n            onClick={onConfirm}\n            className={`${\n              newStatus === 'concluido' \n                ? 'bg-green-600 hover:bg-green-700' \n                : newStatus === 'andamento'\n                ? 'bg-blue-600 hover:bg-blue-700'\n                : 'bg-gray-600 hover:bg-gray-700'\n            } text-white`}\n          >\n            Confirmar Altera√ß√£o\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}","size_bytes":3542},"client/src/components/DeadlineAlert.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { AlertTriangle, Clock, CheckCircle } from \"lucide-react\";\n\ninterface DeadlineAlertProps {\n  prazoEntrega: string | null;\n  status: string;\n}\n\nexport default function DeadlineAlert({ prazoEntrega, status }: DeadlineAlertProps) {\n  if (!prazoEntrega || status === 'concluido') {\n    return status === 'concluido' ? (\n      <Badge className=\"bg-green-100 text-green-800\">\n        <CheckCircle size={12} className=\"mr-1\" />\n        Conclu√≠do\n      </Badge>\n    ) : (\n      <span className=\"text-gray-500 text-sm\">-</span>\n    );\n  }\n\n  const today = new Date();\n  const deadline = new Date(prazoEntrega);\n  const diffTime = deadline.getTime() - today.getTime();\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n  // Cores baseadas na proximidade do prazo\n  if (diffDays < 0) {\n    return (\n      <Badge className=\"bg-red-100 text-red-800 animate-pulse\">\n        <AlertTriangle size={12} className=\"mr-1\" />\n        Atrasado ({Math.abs(diffDays)}d)\n      </Badge>\n    );\n  } else if (diffDays === 0) {\n    return (\n      <Badge className=\"bg-red-100 text-red-800 animate-pulse\">\n        <AlertTriangle size={12} className=\"mr-1\" />\n        Hoje\n      </Badge>\n    );\n  } else if (diffDays === 1) {\n    return (\n      <Badge className=\"bg-orange-100 text-orange-800\">\n        <Clock size={12} className=\"mr-1\" />\n        Amanh√£\n      </Badge>\n    );\n  } else if (diffDays <= 3) {\n    return (\n      <Badge className=\"bg-orange-100 text-orange-800\">\n        <Clock size={12} className=\"mr-1\" />\n        {diffDays} dias\n      </Badge>\n    );\n  } else if (diffDays <= 7) {\n    return (\n      <Badge className=\"bg-yellow-100 text-yellow-800\">\n        <Clock size={12} className=\"mr-1\" />\n        {diffDays} dias\n      </Badge>\n    );\n  } else {\n    return (\n      <Badge className=\"bg-green-100 text-green-800\">\n        <Clock size={12} className=\"mr-1\" />\n        {diffDays} dias\n      </Badge>\n    );\n  }\n}","size_bytes":1971},"client/src/components/DocumentManager.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  FileText, \n  Upload, \n  Link2, \n  Check, \n  X, \n  Plus,\n  ExternalLink,\n  Folder,\n  Clock\n} from \"lucide-react\";\n\ninterface DocumentManagerProps {\n  caseId: string;\n  tipoProcesso?: string;\n  documentosSolicitados?: string[];\n  documentosAnexados?: any[];\n  onUpdateDocuments?: (data: any) => void;\n}\n\nexport default function DocumentManager({ \n  caseId, \n  tipoProcesso, \n  documentosSolicitados = [], \n  documentosAnexados = [],\n  onUpdateDocuments \n}: DocumentManagerProps) {\n  const [newDocumentName, setNewDocumentName] = useState(\"\");\n  const [newDocumentLink, setNewDocumentLink] = useState(\"\");\n  const [observacoes, setObservacoes] = useState(\"\");\n  const [selectedDocuments, setSelectedDocuments] = useState<string[]>([]);\n\n  // Documentos padr√£o por tipo de processo\n  const documentosPadrao: Record<string, string[]> = {\n    'Trabalhista': [\n      'Carteira de Trabalho',\n      'Comprovante de Resid√™ncia',\n      'RG',\n      'CPF',\n      'Comprovantes de Pagamento',\n      'Declara√ß√£o de Testemunhas'\n    ],\n    'Rescis√£o Indireta': [\n      'Carta de Rescis√£o',\n      'Testemunhas',\n      'E-mails/Mensagens',\n      'Atestados M√©dicos',\n      'Comprovantes de Falta de Pagamento',\n      'Registro de Ponto'\n    ],\n    'Dano Moral': [\n      'Boletim de Ocorr√™ncia',\n      'Laudos M√©dicos',\n      'Testemunhas',\n      'Fotos/V√≠deos',\n      'Comprovantes de Gastos',\n      'Correspond√™ncias'\n    ],\n    'Previdenci√°rio': [\n      'Documentos Pessoais',\n      'CNIS',\n      'Carteira de Trabalho',\n      'Laudos M√©dicos',\n      'Comprovantes de Contribui√ß√£o'\n    ],\n    'C√≠vel': [\n      'Contratos',\n      'Comprovantes',\n      'Correspond√™ncias',\n      'Documentos Pessoais'\n    ]\n  };\n\n  const documentosNecessarios = tipoProcesso ? documentosPadrao[tipoProcesso] || [] : [];\n  const documentosCustom = documentosSolicitados.filter(doc => !documentosNecessarios.includes(doc));\n\n  const handleAddCustomDocument = () => {\n    if (newDocumentName.trim()) {\n      const updatedDocs = [...documentosSolicitados, newDocumentName.trim()];\n      onUpdateDocuments?.({\n        documentosSolicitados: updatedDocs\n      });\n      setNewDocumentName(\"\");\n    }\n  };\n\n  const handleAttachDocument = () => {\n    if (newDocumentLink.trim()) {\n      const newAttachment = {\n        nome: newDocumentName.trim() || \"Documento Anexado\",\n        link: newDocumentLink.trim(),\n        dataAnexo: new Date().toISOString(),\n        tipo: \"link\"\n      };\n      \n      const updatedAttachments = [...documentosAnexados, newAttachment];\n      onUpdateDocuments?.({\n        documentosAnexados: updatedAttachments,\n        observacoes\n      });\n      \n      setNewDocumentName(\"\");\n      setNewDocumentLink(\"\");\n    }\n  };\n\n  const getDocumentStatus = (docName: string) => {\n    const isAttached = documentosAnexados.some(doc => \n      doc.nome?.toLowerCase().includes(docName.toLowerCase())\n    );\n    return isAttached;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Documentos Solicitados */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center text-gray-800\">\n            <FileText className=\"mr-2 h-5 w-5\" />\n            Documentos Necess√°rios\n            {tipoProcesso && (\n              <Badge variant=\"outline\" className=\"ml-2\">\n                {tipoProcesso}\n              </Badge>\n            )}\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Documentos Padr√£o */}\n          {documentosNecessarios.length > 0 && (\n            <div>\n              <h4 className=\"text-sm font-semibold text-gray-700 mb-3\">Documentos Padr√£o</h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                {documentosNecessarios.map((doc, index) => {\n                  const isAttached = getDocumentStatus(doc);\n                  return (\n                    <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Checkbox\n                          checked={isAttached}\n                          disabled\n                          className={isAttached ? \"data-[state=checked]:bg-green-500\" : \"\"}\n                        />\n                        <span className={`text-sm ${isAttached ? 'text-green-700 font-medium' : 'text-gray-700'}`}>\n                          {doc}\n                        </span>\n                      </div>\n                      {isAttached ? (\n                        <Check className=\"w-4 h-4 text-green-500\" />\n                      ) : (\n                        <Clock className=\"w-4 h-4 text-orange-500\" />\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          {/* Documentos Customizados */}\n          {documentosCustom.length > 0 && (\n            <div>\n              <h4 className=\"text-sm font-semibold text-gray-700 mb-3\">Documentos Espec√≠ficos</h4>\n              <div className=\"space-y-2\">\n                {documentosCustom.map((doc, index) => {\n                  const isAttached = getDocumentStatus(doc);\n                  return (\n                    <div key={index} className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Checkbox checked={isAttached} disabled />\n                        <span className={`text-sm ${isAttached ? 'text-blue-700 font-medium' : 'text-blue-600'}`}>\n                          {doc}\n                        </span>\n                      </div>\n                      {isAttached ? (\n                        <Check className=\"w-4 h-4 text-green-500\" />\n                      ) : (\n                        <Clock className=\"w-4 h-4 text-orange-500\" />\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          {/* Adicionar Documento Customizado */}\n          <div className=\"border-t pt-4\">\n            <h4 className=\"text-sm font-semibold text-gray-700 mb-3\">Adicionar Documento Espec√≠fico</h4>\n            <div className=\"flex space-x-2\">\n              <Input\n                placeholder=\"Nome do documento\"\n                value={newDocumentName}\n                onChange={(e) => setNewDocumentName(e.target.value)}\n                className=\"flex-1\"\n              />\n              <Button onClick={handleAddCustomDocument} size=\"sm\">\n                <Plus className=\"w-4 h-4 mr-1\" />\n                Adicionar\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Anexar Documentos */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center text-gray-800\">\n            <Upload className=\"mr-2 h-5 w-5\" />\n            Anexar Documentos\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\n            <div className=\"flex items-start space-x-3\">\n              <Folder className=\"w-5 h-5 text-blue-600 mt-1\" />\n              <div className=\"flex-1\">\n                <h4 className=\"text-sm font-semibold text-blue-800\">Organiza√ß√£o no Drive</h4>\n                <p className=\"text-xs text-blue-600 mt-1\">\n                  Recomendamos criar uma pasta espec√≠fica para este processo no seu Google Drive ou outro servi√ßo de nuvem.\n                  Estrutura sugerida: Processos/{tipoProcesso || 'Geral'}/{caseId}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <Label className=\"text-sm font-medium\">Nome do Documento</Label>\n              <Input\n                placeholder=\"Ex: Carteira de Trabalho - Jo√£o Silva\"\n                value={newDocumentName}\n                onChange={(e) => setNewDocumentName(e.target.value)}\n              />\n            </div>\n            <div>\n              <Label className=\"text-sm font-medium\">Link do Documento</Label>\n              <Input\n                placeholder=\"Ex: https://drive.google.com/file/...\"\n                value={newDocumentLink}\n                onChange={(e) => setNewDocumentLink(e.target.value)}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label className=\"text-sm font-medium\">Observa√ß√µes</Label>\n            <Textarea\n              placeholder=\"Observa√ß√µes sobre os documentos...\"\n              value={observacoes}\n              onChange={(e) => setObservacoes(e.target.value)}\n              rows={3}\n            />\n          </div>\n\n          <Button onClick={handleAttachDocument} className=\"w-full\">\n            <Link2 className=\"w-4 h-4 mr-2\" />\n            Anexar Link do Documento\n          </Button>\n        </CardContent>\n      </Card>\n\n      {/* Documentos Anexados */}\n      {documentosAnexados.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center text-gray-800\">\n              <Check className=\"mr-2 h-5 w-5 text-green-600\" />\n              Documentos Anexados ({documentosAnexados.length})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {documentosAnexados.map((doc, index) => (\n                <div key={index} className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\">\n                  <div className=\"flex items-center space-x-3\">\n                    <FileText className=\"w-4 h-4 text-blue-600\" />\n                    <div>\n                      <p className=\"text-sm font-medium text-gray-900\">{doc.nome}</p>\n                      <p className=\"text-xs text-gray-500\">\n                        Anexado em {new Date(doc.dataAnexo).toLocaleDateString('pt-BR')}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Badge variant=\"outline\" className=\"bg-green-50 text-green-700\">\n                      Anexado\n                    </Badge>\n                    <Button size=\"sm\" variant=\"outline\" asChild>\n                      <a href={doc.link} target=\"_blank\" rel=\"noopener noreferrer\">\n                        <ExternalLink className=\"w-3 h-3\" />\n                      </a>\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","size_bytes":11103},"client/src/components/EmployeeSearchModal.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, User, Building, MapPin, Calendar, DollarSign, Plus } from \"lucide-react\";\nimport type { Employee as EmployeeType } from \"@shared/schema\";\n\ninterface EmployeeSearchModalProps {\n  onSelectEmployee: (employee: { codigo: string; nomeCompleto: string }) => void;\n  trigger?: React.ReactNode;\n}\n\nexport default function EmployeeSearchModal({ onSelectEmployee, trigger }: EmployeeSearchModalProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchType, setSearchType] = useState<\"nome\" | \"codigo\" | \"rg\" | \"pis\">(\"nome\");\n\n  // Buscar funcion√°rios reais da API\n  const { data: allEmployees, isLoading } = useQuery({\n    queryKey: [\"/api/employees\"],\n    queryFn: async () => {\n      const response = await fetch(`/api/employees`, {\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      return response.json() as Promise<EmployeeType[]>;\n    },\n  });\n\n  // Filtrar funcion√°rios excluindo deletados e aplicando busca\n  const filteredEmployees = (allEmployees || []).filter(emp => {\n    // N√£o mostrar funcion√°rios deletados\n    if (emp.status === 'deletado') return false;\n    \n    if (!searchTerm) return true;\n    \n    const searchLower = searchTerm.toLowerCase();\n    switch (searchType) {\n      case \"nome\":\n        return emp.nome?.toLowerCase().includes(searchLower);\n      case \"codigo\":\n        return emp.matricula?.toString().toLowerCase().includes(searchLower);\n      case \"rg\":\n        return emp.rg?.toString().toLowerCase().includes(searchLower);\n      case \"pis\":\n        return emp.pis?.toString().toLowerCase().includes(searchLower);\n      default:\n        return true;\n    }\n  });\n\n  const handleSelectEmployee = (employee: EmployeeType) => {\n    onSelectEmployee({\n      codigo: employee.matricula || '',\n      nomeCompleto: employee.nome || ''\n    });\n    setIsOpen(false);\n    setSearchTerm(\"\");\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogTrigger asChild>\n        {trigger || (\n          <Button variant=\"outline\" size=\"sm\">\n            <Search className=\"h-4 w-4 mr-2\" />\n            Buscar Funcion√°rio\n          </Button>\n        )}\n      </DialogTrigger>\n      <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-hidden\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <User className=\"h-5 w-5\" />\n            Buscar Funcion√°rio na Base de Dados\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-4\">\n          {/* Filtros de busca */}\n          <div className=\"flex gap-4\">\n            <div className=\"flex-1\">\n              <Input\n                placeholder={`Buscar por ${searchType === 'nome' ? 'nome' : searchType === 'codigo' ? 'c√≥digo' : searchType === 'rg' ? 'RG' : 'PIS'}...`}\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full\"\n              />\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant={searchType === \"nome\" ? \"default\" : \"outline\"} \n                size=\"sm\"\n                onClick={() => setSearchType(\"nome\")}\n              >\n                Nome\n              </Button>\n              <Button\n                variant={searchType === \"codigo\" ? \"default\" : \"outline\"} \n                size=\"sm\"\n                onClick={() => setSearchType(\"codigo\")}\n              >\n                C√≥digo\n              </Button>\n              <Button\n                variant={searchType === \"rg\" ? \"default\" : \"outline\"} \n                size=\"sm\"\n                onClick={() => setSearchType(\"rg\")}\n              >\n                RG\n              </Button>\n              <Button\n                variant={searchType === \"pis\" ? \"default\" : \"outline\"} \n                size=\"sm\"\n                onClick={() => setSearchType(\"pis\")}\n              >\n                PIS\n              </Button>\n            </div>\n          </div>\n\n          {/* Resultados da busca */}\n          <div className=\"border rounded-lg max-h-96 overflow-y-auto\">\n            <Table>\n              <TableHeader className=\"bg-gray-50 sticky top-0\">\n                <TableRow>\n                  <TableHead>C√≥digo</TableHead>\n                  <TableHead>Nome Completo</TableHead>\n                  <TableHead>Cargo</TableHead>\n                  <TableHead>Centro de Custo</TableHead>\n                  <TableHead>Admiss√£o</TableHead>\n                  <TableHead>A√ß√µes</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {isLoading ? (\n                  <TableRow>\n                    <TableCell colSpan={6} className=\"text-center py-8\">\n                      <div className=\"flex items-center justify-center space-x-2\">\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\n                        <span>Carregando funcion√°rios...</span>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ) : filteredEmployees.length === 0 ? (\n                  <TableRow>\n                    <TableCell colSpan={6} className=\"text-center py-8 text-gray-500\">\n                      {searchTerm ? \"Nenhum funcion√°rio encontrado com os crit√©rios de busca.\" : \"Nenhum funcion√°rio encontrado.\"}\n                      <br />\n                      <span className=\"text-sm\">Tente buscar por nome, c√≥digo, RG ou PIS.</span>\n                    </TableCell>\n                  </TableRow>\n                ) : (\n                  filteredEmployees.map((employee) => (\n                    <TableRow key={employee.id} className=\"hover:bg-gray-50\">\n                      <TableCell className=\"font-mono font-medium\">\n                        {employee.matricula}\n                      </TableCell>\n                      <TableCell className=\"font-medium\">\n                        {employee.nome}\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"space-y-1\">\n                          <div className=\"text-sm\">{employee.cargo || \"-\"}</div>\n                          {employee.salario && (\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              <DollarSign className=\"h-3 w-3 mr-1\" />\n                              R$ {Number(employee.salario).toLocaleString('pt-BR')}\n                            </Badge>\n                          )}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"space-y-1\">\n                          <div className=\"text-sm font-medium\">{employee.centroCusto || \"-\"}</div>\n                          <div className=\"text-xs text-gray-500\">{employee.departamento || \"-\"}</div>\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-1 text-sm\">\n                          <Calendar className=\"h-3 w-3\" />\n                          {employee.dataAdmissao ? new Date(employee.dataAdmissao).toLocaleDateString('pt-BR') : \"-\"}\n                        </div>\n                      </TableCell>\n                      <TableCell>\n                        <Button\n                          size=\"sm\"\n                          onClick={() => handleSelectEmployee(employee)}\n                          className=\"bg-blue-600 hover:bg-blue-700\"\n                        >\n                          Selecionar\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))\n                )}\n              </TableBody>\n            </Table>\n          </div>\n\n          {/* Info sobre a base de dados */}\n          <div className=\"bg-blue-50 p-3 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <div className=\"flex items-center gap-2 text-blue-700 text-sm\">\n                  <Building className=\"h-4 w-4\" />\n                  <span className=\"font-medium\">Base de Dados:</span>\n                  <span>{allEmployees?.length || 0} funcion√°rios cadastrados</span>\n                </div>\n                <p className=\"text-xs text-blue-600 mt-1\">\n                  Busque por nome completo, c√≥digo funcional, RG ou n√∫mero do PIS para localizar rapidamente.\n                </p>\n              </div>\n              <Button \n                onClick={() => {\n                  setIsOpen(false);\n                  // Navegar para p√°gina de funcion√°rios para criar novo\n                  window.location.href = '/employees';\n                }}\n                className=\"bg-green-600 hover:bg-green-700 text-white\"\n                size=\"sm\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Cadastrar Novo\n              </Button>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":9636},"client/src/components/ImportCases2024Modal.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient, useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { FileSpreadsheet, Upload, CheckCircle, AlertTriangle, Users, Calendar } from \"lucide-react\";\n\ninterface ImportStats {\n  total: number;\n  concluidos: number;\n  comFuncionario: number;\n  semFuncionario: number;\n}\n\ninterface ImportResult {\n  success: boolean;\n  imported: number;\n  errors: string[];\n  employeeNotFound: number;\n  employeeNotFoundList: Array<{ clientName: string; processNumber: string }>;\n  message: string;\n}\n\nexport default function ImportCases2024Modal() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [importResult, setImportResult] = useState<ImportResult | null>(null);\n\n  // Buscar estat√≠sticas atuais dos processos 2024\n  const { data: stats, isLoading: statsLoading } = useQuery<ImportStats>({\n    queryKey: [\"/api/cases/stats-2024\"],\n  });\n\n  const importMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", \"/api/cases/import-2024\");\n      return await response.json();\n    },\n    onSuccess: (result: ImportResult) => {\n      setImportResult(result);\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases/stats-2024\"] });\n      \n      if (result.success) {\n        toast({\n          title: \"Importa√ß√£o Conclu√≠da\",\n          description: result.message,\n        });\n      } else {\n        toast({\n          title: \"Erro na Importa√ß√£o\",\n          description: result.message,\n          variant: \"destructive\",\n        });\n      }\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao importar processos de 2024\",\n        variant: \"destructive\",\n      });\n      console.error(\"Import error:\", error);\n    },\n  });\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-6 space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <FileSpreadsheet className=\"mr-2 h-5 w-5 text-blue-600\" />\n            Importar Processos de 2024\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Estat√≠sticas atuais */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-3 flex items-center\">\n              <Calendar className=\"mr-2 h-4 w-4\" />\n              Situa√ß√£o Atual dos Processos 2024\n            </h3>\n            {statsLoading ? (\n              <div className=\"animate-pulse bg-gray-200 h-16 rounded\"></div>\n            ) : (\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <Card className=\"p-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{stats?.total || 0}</div>\n                    <div className=\"text-sm text-gray-600\">Total</div>\n                  </div>\n                </Card>\n                <Card className=\"p-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-green-600\">{stats?.concluidos || 0}</div>\n                    <div className=\"text-sm text-gray-600\">Conclu√≠dos</div>\n                  </div>\n                </Card>\n                <Card className=\"p-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-purple-600\">{stats?.comFuncionario || 0}</div>\n                    <div className=\"text-sm text-gray-600\">Vinculados</div>\n                  </div>\n                </Card>\n                <Card className=\"p-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-orange-600\">{stats?.semFuncionario || 0}</div>\n                    <div className=\"text-sm text-gray-600\">Sem V√≠nculo</div>\n                  </div>\n                </Card>\n              </div>\n            )}\n          </div>\n\n          <Separator />\n\n          {/* Informa√ß√µes sobre a importa√ß√£o */}\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-blue-800 mb-2\">Sobre a Importa√ß√£o</h3>\n            <ul className=\"text-sm text-blue-700 space-y-1\">\n              <li>‚Ä¢ Arquivo: processos 2024_1753977488884.xlsx</li>\n              <li>‚Ä¢ Total de registros na planilha: 213 processos</li>\n              <li>‚Ä¢ Todos os processos ser√£o marcados como \"conclu√≠do\"</li>\n              <li>‚Ä¢ Sistema tentar√° vincular funcion√°rios automaticamente</li>\n              <li>‚Ä¢ Processos duplicados ser√£o ignorados</li>\n            </ul>\n          </div>\n\n          {/* Bot√£o de importa√ß√£o */}\n          <div className=\"text-center\">\n            <Button\n              onClick={() => importMutation.mutate()}\n              disabled={importMutation.isPending}\n              size=\"lg\"\n              className=\"bg-green-600 hover:bg-green-700\"\n            >\n              {importMutation.isPending ? (\n                <div className=\"flex items-center\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Importando...\n                </div>\n              ) : (\n                <div className=\"flex items-center\">\n                  <Upload className=\"mr-2 h-4 w-4\" />\n                  Importar Processos de 2024\n                </div>\n              )}\n            </Button>\n          </div>\n\n          {/* Resultado da importa√ß√£o */}\n          {importResult && (\n            <div className=\"mt-6\">\n              <Separator className=\"mb-4\" />\n              <div className={`p-4 rounded-lg ${importResult.success ? 'bg-green-50' : 'bg-red-50'}`}>\n                <div className=\"flex items-center mb-3\">\n                  {importResult.success ? (\n                    <CheckCircle className=\"h-5 w-5 text-green-600 mr-2\" />\n                  ) : (\n                    <AlertTriangle className=\"h-5 w-5 text-red-600 mr-2\" />\n                  )}\n                  <h3 className={`font-semibold ${importResult.success ? 'text-green-800' : 'text-red-800'}`}>\n                    Resultado da Importa√ß√£o\n                  </h3>\n                </div>\n                \n                <p className={`mb-4 ${importResult.success ? 'text-green-700' : 'text-red-700'}`}>\n                  {importResult.message}\n                </p>\n\n                {importResult.success && (\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4\">\n                    <div className=\"text-center\">\n                      <Badge variant=\"outline\" className=\"text-green-600 border-green-600\">\n                        {importResult.imported} Importados\n                      </Badge>\n                    </div>\n                    <div className=\"text-center\">\n                      <Badge variant=\"outline\" className=\"text-red-600 border-red-600\">\n                        {importResult.errors.length} Erros\n                      </Badge>\n                    </div>\n                    <div className=\"text-center\">\n                      <Badge variant=\"outline\" className=\"text-orange-600 border-orange-600\">\n                        {importResult.employeeNotFound} Sem Funcion√°rio\n                      </Badge>\n                    </div>\n                  </div>\n                )}\n\n                {/* Lista de erros */}\n                {importResult.errors.length > 0 && (\n                  <div className=\"mt-4\">\n                    <h4 className=\"font-medium text-red-800 mb-2\">Erros Encontrados:</h4>\n                    <div className=\"max-h-32 overflow-y-auto bg-red-100 p-3 rounded text-sm\">\n                      {importResult.errors.map((error, index) => (\n                        <div key={index} className=\"text-red-700\">{error}</div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Lista de funcion√°rios n√£o encontrados */}\n                {importResult.employeeNotFoundList && importResult.employeeNotFoundList.length > 0 && (\n                  <div className=\"mt-4\">\n                    <h4 className=\"font-medium text-orange-800 mb-2\">Funcion√°rios N√£o Encontrados:</h4>\n                    <div className=\"max-h-32 overflow-y-auto bg-orange-100 p-3 rounded text-sm\">\n                      {importResult.employeeNotFoundList.slice(0, 10).map((item, index) => (\n                        <div key={index} className=\"text-orange-700\">\n                          {item.clientName} - Processo: {item.processNumber}\n                        </div>\n                      ))}\n                      {importResult.employeeNotFoundList.length > 10 && (\n                        <div className=\"text-orange-600 font-medium\">\n                          ... e mais {importResult.employeeNotFoundList.length - 10} registros\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9441},"client/src/components/Layout.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Bell, BarChart3, FileText, History, UserCog, LogOut, Menu, X, Users, Check } from \"lucide-react\";\nimport facilityLogo from \"@assets/449265_6886_1753882292906.jpg\";\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function Layout({ children }: LayoutProps) {\n  const [location] = useLocation();\n  const { user } = useAuth();\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [notificationsRead, setNotificationsRead] = useState(false);\n\n  // Buscar notifica√ß√µes recentes (√∫ltimos logs)\n  const { data: recentLogs } = useQuery({\n    queryKey: [\"/api/activity-logs\", { limit: 5, processOnly: true }],\n    queryFn: async () => {\n      const response = await fetch(`/api/activity-logs?limit=5&processOnly=true`, {\n        credentials: 'include',\n      });\n      if (!response.ok) return [];\n      return await response.json();\n    },\n    refetchInterval: 10000, // Atualizar a cada 10 segundos\n    enabled: !!user,\n  });\n\n  // Update time every minute\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 60000);\n    return () => clearInterval(timer);\n  }, []);\n\n  const handleLogout = () => {\n    // Clear all cached data\n    localStorage.clear();\n    sessionStorage.clear();\n    \n    // Force logout and redirect\n    fetch(\"/api/logout\", {\n      method: \"POST\",\n      credentials: \"include\"\n    }).then(() => {\n      window.location.href = \"/auth\";\n    }).catch(() => {\n      window.location.href = \"/auth\";\n    });\n  };\n\n  // Fun√ß√£o para verificar se tem permiss√£o para uma p√°gina\n  const hasPagePermission = (page: string) => {\n    if (user?.role === 'admin') return true;\n    return (user as any)?.permissions?.pages?.[page] === true;\n  };\n\n  const navItems = [\n    ...(hasPagePermission('dashboard') ? [\n      { path: \"/\", icon: BarChart3, label: \"Dashboard\", description: \"Vis√£o geral e m√©tricas\" }\n    ] : []),\n    ...(hasPagePermission('cases') ? [\n      { path: \"/cases\", icon: FileText, label: \"Processos\", description: \"Gerenciar processos jur√≠dicos\" }\n    ] : []),\n    ...(hasPagePermission('activityLog') ? [\n      { path: \"/activity-log\", icon: History, label: \"Atividades\", description: \"Log de a√ß√µes do sistema\" }\n    ] : []),\n    ...(hasPagePermission('users') ? [\n      { path: \"/users\", icon: UserCog, label: \"Usu√°rios\", description: \"Gerenciar usu√°rios\" }\n    ] : []),\n  ].filter(Boolean);\n\n  const getPageTitle = () => {\n    const titles: Record<string, string> = {\n      \"/\": \"Dashboard - Vis√£o Geral\",\n      \"/cases\": \"Gerenciamento de Processos\",\n      \"/employees\": \"Base de Funcion√°rios\",\n      \"/activity-log\": \"Log de Atividades\",\n      \"/users\": \"Gerenciamento de Usu√°rios\",\n    };\n    return titles[location] || \"Dashboard\";\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Mobile Sidebar Overlay */}\n      {sidebarOpen && (\n        <div \n          className=\"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden\"\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n\n      {/* Navigation Sidebar */}\n      <div className={`fixed inset-y-0 left-0 z-50 w-72 bg-gradient-to-b from-slate-900 to-slate-800 shadow-2xl transform transition-transform duration-300 ease-in-out ${\n        sidebarOpen ? 'translate-x-0' : '-translate-x-full'\n      } lg:translate-x-0`}>\n        \n        {/* Mobile Close Button */}\n        <div className=\"flex justify-end p-4 lg:hidden\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"text-slate-300 hover:bg-slate-700\"\n            onClick={() => setSidebarOpen(false)}\n          >\n            <X size={20} />\n          </Button>\n        </div>\n\n        {/* User Info */}\n        <div className=\"p-6 border-b border-slate-700 mt-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center\">\n              <span className=\"text-white font-semibold text-lg\">\n                {user?.firstName?.charAt(0) || 'U'}\n              </span>\n            </div>\n            <div>\n              <div className=\"text-white font-medium\">{user?.firstName} {user?.lastName}</div>\n              <div className=\"text-slate-400 text-sm capitalize\">{user?.role}</div>\n              <div className=\"text-slate-500 text-xs\">{user?.email}</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Navigation */}\n        <nav className=\"flex-1 p-4 space-y-2\">\n          {navItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = location === item.path;\n            \n            return (\n              <Link key={item.path} href={item.path}>\n                <div className={`group flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 cursor-pointer ${\n                  isActive \n                    ? 'bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg' \n                    : 'text-slate-300 hover:bg-slate-700/50 hover:text-white'\n                }`}>\n                  <Icon size={20} className={`${isActive ? 'text-white' : 'text-slate-400 group-hover:text-white'}`} />\n                  <div className=\"flex-1\">\n                    <div className=\"font-medium\">{item.label}</div>\n                    <div className={`text-xs ${isActive ? 'text-blue-100' : 'text-slate-500 group-hover:text-slate-400'}`}>\n                      {item.description}\n                    </div>\n                  </div>\n                </div>\n              </Link>\n            );\n          })}\n        </nav>\n\n        {/* Footer */}\n        <div className=\"p-4 border-t border-slate-700\">\n          <Button\n            onClick={handleLogout}\n            variant=\"ghost\"\n            className=\"w-full flex items-center justify-center space-x-2 text-slate-300 hover:text-white hover:bg-slate-700/50 py-3\"\n          >\n            <LogOut size={18} />\n            <span>Sair do Sistema</span>\n          </Button>\n          \n          <div className=\"mt-4 pt-4 border-t border-slate-700\">\n            <div className=\"text-center text-xs text-slate-500\">\n              ¬© 2024 BASE FACILITIES\n            </div>\n            <div className=\"text-center text-xs text-slate-600 mt-1\">\n              {currentTime.toLocaleString('pt-BR')}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"lg:ml-72 flex-1\">\n        {/* Header */}\n        <header className=\"bg-white shadow-sm border-b border-gray-200 h-16 flex items-center justify-between px-6 sticky top-0 z-30\">\n          <div className=\"flex items-center space-x-4\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"lg:hidden\"\n              onClick={() => setSidebarOpen(true)}\n            >\n              <Menu size={20} />\n            </Button>\n            <h1 className=\"text-xl font-semibold text-gray-900\">\n              {getPageTitle()}\n            </h1>\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            <Popover>\n              <PopoverTrigger asChild>\n                <Button \n                  variant=\"ghost\" \n                  size=\"sm\" \n                  className=\"relative p-2 text-gray-400 hover:text-gray-600\"\n                  onClick={() => setNotificationsRead(true)}\n                >\n                  <Bell size={20} />\n                  {!notificationsRead && recentLogs && recentLogs.length > 0 && (\n                    <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n                      {recentLogs.length}\n                    </span>\n                  )}\n                </Button>\n              </PopoverTrigger>\n              <PopoverContent className=\"w-80 p-0\" align=\"end\">\n                <div className=\"p-4 border-b\">\n                  <div className=\"flex items-center justify-between\">\n                    <h3 className=\"font-medium\">Atividades Recentes</h3>\n                    <Button \n                      variant=\"ghost\" \n                      size=\"sm\"\n                      onClick={() => setNotificationsRead(true)}\n                      className=\"text-xs\"\n                    >\n                      <Check className=\"h-3 w-3 mr-1\" />\n                      Marcar como lida\n                    </Button>\n                  </div>\n                </div>\n                <div className=\"max-h-80 overflow-y-auto\">\n                  {recentLogs && recentLogs.length > 0 ? (\n                    recentLogs.map((log: any, index: number) => (\n                      <div key={index} className=\"p-3 border-b last:border-b-0 hover:bg-gray-50\">\n                        <div className=\"text-sm font-medium text-gray-900 mb-1\">\n                          {log.action?.replace(/_/g, ' ')}\n                        </div>\n                        <div className=\"text-xs text-gray-600 mb-1\">\n                          {log.description}\n                        </div>\n                        <div className=\"text-xs text-gray-400\">\n                          {new Date(log.timestamp).toLocaleString('pt-BR')}\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <div className=\"p-4 text-center text-gray-500 text-sm\">\n                      Nenhuma atividade recente\n                    </div>\n                  )}\n                </div>\n                <div className=\"p-3 border-t\">\n                  <Link href=\"/activity-log\">\n                    <Button variant=\"outline\" size=\"sm\" className=\"w-full\">\n                      Ver todas as atividades\n                    </Button>\n                  </Link>\n                </div>\n              </PopoverContent>\n            </Popover>\n            <div className=\"hidden md:block text-sm text-gray-600\">\n              {currentTime.toLocaleString('pt-BR')}\n            </div>\n          </div>\n        </header>\n\n        {/* Page Content */}\n        <main className=\"p-6\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}","size_bytes":10555},"client/src/components/NewCaseModal.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { CaseWithRelations } from \"@shared/schema\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Search } from \"lucide-react\";\nimport * as React from \"react\";\n\ninterface NewCaseModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (data: any) => void;\n  isSubmitting?: boolean;\n  caseData?: CaseWithRelations | null;\n}\n\nconst formSchema = z.object({\n  matricula: z.string().min(1, \"Matr√≠cula √© obrigat√≥ria\"),\n  clientName: z.string().min(1, \"Nome do cliente √© obrigat√≥rio\"),\n  processType: z.string().min(1, \"Tipo de processo √© obrigat√≥rio\"),\n  dueDate: z.string().min(1, \"Prazo de entrega √© obrigat√≥rio\"),\n  audienceDate: z.string().optional(),\n  observacoes: z.string().optional(),\n});\n\ntype FormSchema = z.infer<typeof formSchema>;\n\nexport default function NewCaseModal({ isOpen, onClose, onSubmit, isSubmitting, caseData }: NewCaseModalProps) {\n  const { toast } = useToast();\n  const [isSearchingEmployee, setIsSearchingEmployee] = React.useState(false);\n  \n  const form = useForm<FormSchema>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      matricula: caseData?.matricula || \"\",\n      clientName: caseData?.clientName || \"\",\n      processType: caseData?.processNumber || \"\",\n      dueDate: caseData?.dueDate ? new Date(caseData.dueDate).toISOString().split('T')[0] : \"\",\n      audienceDate: caseData?.dataAudiencia ? new Date(caseData.dataAudiencia).toISOString().split('T')[0] : \"\",\n      observacoes: caseData?.observacoes || \"\",\n    },\n  });\n\n  // Query para buscar funcion√°rios\n  const { data: employees } = useQuery({\n    queryKey: [\"/api/employees\"],\n    queryFn: async () => {\n      const response = await fetch('/api/employees', {\n        credentials: 'include',\n      });\n      if (!response.ok) throw new Error('Failed to fetch employees');\n      return response.json();\n    },\n  });\n\n  // Fun√ß√£o para buscar funcion√°rio por matr√≠cula\n  const handleMatriculaSearch = React.useCallback(async (matricula: string) => {\n    if (!matricula || matricula.length < 3) return;\n    \n    setIsSearchingEmployee(true);\n    try {\n      const employee = employees?.find((emp: any) => \n        emp.matricula && emp.matricula.toLowerCase().includes(matricula.toLowerCase())\n      );\n      \n      if (employee) {\n        form.setValue('clientName', employee.nome || '');\n        toast({\n          title: \"Funcion√°rio encontrado\",\n          description: `${employee.nome} - Matr√≠cula: ${employee.matricula}`,\n        });\n      } else {\n        toast({\n          title: \"Funcion√°rio n√£o encontrado\",\n          description: \"Verifique a matr√≠cula e tente novamente\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao buscar funcion√°rio:', error);\n    } finally {\n      setIsSearchingEmployee(false);\n    }\n  }, [employees, form, toast]);\n\n  // Watch matr√≠cula field to trigger search\n  const matriculaValue = form.watch('matricula');\n  React.useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      if (matriculaValue && matriculaValue.length >= 3) {\n        handleMatriculaSearch(matriculaValue);\n      }\n    }, 500);\n    \n    return () => clearTimeout(timeoutId);\n  }, [matriculaValue, handleMatriculaSearch]);\n\n  // Resetar formul√°rio quando caseData muda (para edi√ß√£o)\n  React.useEffect(() => {\n    if (caseData) {\n      form.reset({\n        matricula: (caseData as any).matricula || \"\",\n        clientName: caseData.clientName || \"\",\n        processType: caseData.processNumber || \"\",\n        dueDate: caseData.dueDate ? new Date(caseData.dueDate).toISOString().split('T')[0] : \"\",\n        audienceDate: caseData.dataAudiencia ? new Date(caseData.dataAudiencia).toISOString().split('T')[0] : \"\",\n        observacoes: caseData.observacoes || \"\",\n      });\n    } else {\n      form.reset({\n        matricula: \"\",\n        clientName: \"\",\n        processType: \"\",\n        dueDate: \"\",\n        audienceDate: \"\",\n        observacoes: \"\",\n      });\n    }\n  }, [caseData, form]);\n\n  const handleSubmit = (values: FormSchema) => {\n    const submitData = {\n      clientName: values.clientName,\n      processNumber: values.processType, // Using processType as processNumber for backend compatibility\n      description: values.processType || 'Processo Jur√≠dico', // Required field\n      dueDate: values.dueDate ? new Date(values.dueDate).toISOString() : null,\n      dataAudiencia: values.audienceDate ? new Date(values.audienceDate).toISOString() : null,\n      observacoes: values.observacoes || '',\n      matricula: values.matricula,\n      status: 'novo', // Default status\n      createdById: 'admin-id' // This will be overridden by the server based on authenticated user\n    };\n    \n    console.log('üöÄ Sending data to API:', submitData);\n    onSubmit(submitData);\n    form.reset();\n  };\n\n  const handleClose = () => {\n    form.reset();\n    onClose();\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-[600px] max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-xl font-semibold text-gray-900\">\n            {caseData ? \"Editar Processo\" : \"Novo Processo\"}\n          </DialogTitle>\n        </DialogHeader>\n        \n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"matricula\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-sm font-medium text-gray-700\">Matr√≠cula</FormLabel>\n                    <FormControl>\n                      <div className=\"relative\">\n                        <Input\n                          placeholder=\"Digite a matr√≠cula do funcion√°rio\"\n                          {...field}\n                          className=\"border-gray-300 pr-10\"\n                        />\n                        {isSearchingEmployee && (\n                          <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                            <div className=\"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\n                          </div>\n                        )}\n                      </div>\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"clientName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-sm font-medium text-gray-700\">Nome do Cliente</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Nome ser√° preenchido automaticamente\"\n                        {...field}\n                        className=\"border-gray-300 bg-gray-50\"\n                        readOnly\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"processType\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-sm font-medium text-gray-700\">Tipo de Processo</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"Ex: Trabalhista, Rescis√£o Contratual, Acordo Coletivo...\"\n                      {...field}\n                      className=\"border-gray-300\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"dueDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-sm font-medium text-gray-700\">Prazo de Entrega *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"date\"\n                        {...field}\n                        className=\"border-gray-300\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"audienceDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-sm font-medium text-gray-700\">Data Audi√™ncia</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"date\"\n                        {...field}\n                        className=\"border-gray-300\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"observacoes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"text-sm font-medium text-gray-700\">Observa√ß√µes</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Detalhes adicionais: valores envolvidos, situa√ß√£o atual, documentos necess√°rios...\"\n                      className=\"border-gray-300 min-h-[80px] resize-none\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end space-x-3 pt-6 border-t\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={handleClose}\n                disabled={isSubmitting}\n              >\n                Cancelar\n              </Button>\n              <Button \n                type=\"submit\" \n                disabled={isSubmitting}\n                className=\"bg-blue-600 hover:bg-blue-700\"\n              >\n                {isSubmitting ? (\n                  <div className=\"flex items-center\">\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n                    Salvando...\n                  </div>\n                ) : (\n                  caseData ? \"Atualizar Processo\" : \"Criar Processo\"\n                )}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":11422},"client/src/components/ProcessTagRenderer.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\n\ninterface ProcessTagRendererProps {\n  processo: string;\n}\n\nexport default function ProcessTagRenderer({ processo }: ProcessTagRendererProps) {\n  const processos = processo.split(',').map(p => p.trim()).filter(p => p.length > 0);\n  \n  return (\n    <div className=\"flex flex-wrap gap-1 max-w-sm\">\n      {processos.map((proc, index) => (\n        <Badge \n          key={index} \n          variant=\"secondary\" \n          className=\"text-xs bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors whitespace-nowrap\"\n        >\n          {proc}\n        </Badge>\n      ))}\n    </div>\n  );\n}","size_bytes":634},"client/src/components/ProcessTypeChart.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { BarChart3 } from \"lucide-react\";\nimport { BarChart, Bar, XAxis, YAxis, ResponsiveContainer, Tooltip, Cell } from 'recharts';\n\ninterface ProcessTypeChartProps {\n  cases: any[];\n}\n\nexport default function ProcessTypeChart({ cases }: ProcessTypeChartProps) {\n  // Contar tipos de processos\n  const processCounts = cases.reduce((acc, caseData) => {\n    const tipo = caseData.tipoProcesso || 'N√£o Classificado';\n    acc[tipo] = (acc[tipo] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  // Cores para cada tipo\n  const colors: Record<string, string> = {\n    'Trabalhista': '#ef4444',\n    'Rescis√£o Indireta': '#f97316',\n    'Dano Moral': '#8b5cf6',\n    'Previdenci√°rio': '#06b6d4',\n    'C√≠vel': '#10b981',\n    'N√£o Classificado': '#6b7280'\n  };\n\n  const chartData = Object.entries(processCounts).map(([name, value]) => ({\n    name,\n    value,\n    fill: colors[name] || '#6b7280'\n  }));\n\n  return (\n    <Card className=\"shadow-lg\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center text-gray-800\">\n          <BarChart3 className=\"mr-2 h-5 w-5\" />\n          Tipos de Processos Mais Comuns\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <BarChart data={chartData}>\n            <XAxis \n              dataKey=\"name\" \n              angle={-45} \n              textAnchor=\"end\" \n              height={80} \n              fontSize={12}\n              interval={0}\n            />\n            <YAxis />\n            <Tooltip />\n            <Bar dataKey=\"value\">\n              {chartData.map((entry, index) => (\n                <Cell key={`cell-${index}`} fill={entry.fill} />\n              ))}\n            </Bar>\n          </BarChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":1896},"client/src/components/UserModal.tsx":{"content":"import { useState } from \"react\";\nimport React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport type { User } from \"@shared/schema\";\nimport { Shield, Eye, Edit } from \"lucide-react\";\n\nconst userSchema = z.object({\n  username: z.string().min(1, \"Nome de usu√°rio √© obrigat√≥rio\").optional().or(z.literal(\"\")),\n  email: z.string().email(\"Email inv√°lido\").optional().or(z.literal(\"\")),\n  firstName: z.string().optional().or(z.literal(\"\")),\n  lastName: z.string().optional().or(z.literal(\"\")),\n  password: z.string().optional().or(z.literal(\"\")),\n  role: z.enum([\"admin\", \"editor\", \"viewer\"]),\n  permissions: z.object({\n    matricula: z.object({\n      view: z.boolean().optional().default(false),\n      edit: z.boolean().optional().default(false),\n    }).optional(),\n    nome: z.object({\n      view: z.boolean().optional().default(false),\n      edit: z.boolean().optional().default(false),\n    }).optional(),\n    processo: z.object({\n      view: z.boolean().optional().default(false),\n      edit: z.boolean().optional().default(false),\n    }).optional(),\n    prazoEntrega: z.object({\n      view: z.boolean().optional().default(false),\n      edit: z.boolean().optional().default(false),\n    }).optional(),\n    audiencia: z.object({\n      view: z.boolean().optional().default(false),\n      edit: z.boolean().optional().default(false),\n    }).optional(),\n    status: z.object({\n      view: z.boolean().optional().default(false),\n      edit: z.boolean().optional().default(false),\n    }).optional(),\n    pages: z.object({\n      dashboard: z.boolean().optional().default(false),\n      cases: z.boolean().optional().default(false),\n      users: z.boolean().optional().default(false),\n      activityLog: z.boolean().optional().default(false),\n    }).optional(),\n    canCreateCases: z.boolean().optional().default(false),\n    canDeleteCases: z.boolean().optional().default(false),\n  }).optional(),\n});\n\ntype UserForm = z.infer<typeof userSchema>;\n\ninterface UserModalProps {\n  user?: User | null;\n  onSubmit: (data: any) => void;\n  onClose: () => void;\n  isSubmitting?: boolean;\n}\n\nconst defaultPermissions = {\n  matricula: { view: true, edit: false },\n  nome: { view: true, edit: false },\n  processo: { view: true, edit: false },\n  prazoEntrega: { view: true, edit: false },\n  audiencia: { view: true, edit: false },\n  status: { view: true, edit: false },\n  observacao: { view: true, edit: false },\n  canCreateCases: false,\n  canDeleteCases: false,\n  pages: {\n    dashboard: true,\n    cases: true,\n    activityLog: false,\n    users: false\n  }\n};\n\nexport default function UserModal({ user, onSubmit, onClose, isSubmitting }: UserModalProps) {\n  const [showPassword, setShowPassword] = useState(false);\n\n  const form = useForm<UserForm>({\n    resolver: zodResolver(userSchema),\n    defaultValues: {\n      username: user?.username || \"\",\n      email: user?.email || \"\",\n      firstName: user?.firstName || \"\",\n      lastName: user?.lastName || \"\",\n      password: \"\",\n      role: (user?.role as \"admin\" | \"editor\" | \"viewer\") || \"viewer\",\n      permissions: user ? (user as any)?.permissions : defaultPermissions,\n    },\n  });\n\n  // Recarregar valores quando o usu√°rio muda\n  React.useEffect(() => {\n    if (user) {\n      const userPermissions = (user as any)?.permissions;\n      console.log('üîÑ CARREGANDO PERMISS√ïES DO USU√ÅRIO:', user.username, userPermissions);\n      \n      form.reset({\n        username: user.username || \"\",\n        email: user.email || \"\",\n        firstName: user.firstName || \"\",\n        lastName: user.lastName || \"\",\n        password: \"\",\n        role: (user.role as \"admin\" | \"editor\" | \"viewer\") || \"viewer\",\n        permissions: userPermissions || defaultPermissions,\n      });\n    } else {\n      // Para novo usu√°rio, usar permiss√µes padr√£o\n      form.reset({\n        username: \"\",\n        email: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        password: \"\",\n        role: \"viewer\",\n        permissions: defaultPermissions,\n      });\n    }\n  }, [user, form]);\n\n  const handleSubmit = (values: UserForm) => {\n    const submitData = {\n      ...values,\n      ...(values.password ? { password: values.password } : {}),\n    };\n    onSubmit(submitData);\n  };\n\n  const setRolePresets = (role: string) => {\n    let permissions = defaultPermissions;\n    \n    if (role === \"admin\") {\n      permissions = {\n        matricula: { view: true, edit: true },\n        nome: { view: true, edit: true },\n        processo: { view: true, edit: true },\n        prazoEntrega: { view: true, edit: true },\n        audiencia: { view: true, edit: true },\n        status: { view: true, edit: true },\n        observacao: { view: true, edit: true },\n        canCreateCases: true,\n        canDeleteCases: true,\n        pages: {\n          dashboard: true,\n          cases: true,\n          activityLog: true,\n          users: true\n        }\n      };\n    } else if (role === \"editor\") {\n      permissions = {\n        matricula: { view: true, edit: true },\n        nome: { view: true, edit: true },\n        processo: { view: true, edit: true },\n        prazoEntrega: { view: true, edit: true },\n        audiencia: { view: true, edit: true },\n        status: { view: true, edit: false },\n        observacao: { view: true, edit: true },\n        canCreateCases: true,\n        canDeleteCases: false,\n        pages: {\n          dashboard: true,\n          cases: true,\n          activityLog: false,\n          users: false\n        }\n      };\n    } else if (role === \"viewer\") {\n      permissions = {\n        matricula: { view: true, edit: false },\n        nome: { view: true, edit: false },\n        processo: { view: true, edit: false },\n        prazoEntrega: { view: true, edit: false },\n        audiencia: { view: true, edit: false },\n        status: { view: true, edit: false },\n        observacao: { view: true, edit: false },\n        canCreateCases: false,\n        canDeleteCases: false,\n        pages: {\n          dashboard: true,\n          cases: true,\n          activityLog: false,\n          users: false\n        }\n      };\n    }\n    \n    form.setValue(\"permissions\", permissions);\n  };\n\n  const fieldLabels = {\n    matricula: \"Matr√≠cula\",\n    nome: \"Nome\",\n    processo: \"Processo\",\n    prazoEntrega: \"Prazo de Entrega\",\n    audiencia: \"Audi√™ncia\",\n    status: \"Status\",\n    observacao: \"Observa√ß√£o\",\n  };\n\n  return (\n    <Dialog open onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[700px] max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>\n            {user ? \"Editar Usu√°rio\" : \"Novo Usu√°rio\"}\n          </DialogTitle>\n        </DialogHeader>\n        \n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n            {/* Dados B√°sicos */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-sm\">Dados B√°sicos</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"firstName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Nome (Opcional)</FormLabel>\n                        <FormControl>\n                          <Input {...field} />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                  <FormField\n                    control={form.control}\n                    name=\"lastName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Sobrenome (Opcional)</FormLabel>\n                        <FormControl>\n                          <Input {...field} />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n                \n                <FormField\n                  control={form.control}\n                  name=\"username\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Nome de Usu√°rio (Opcional)</FormLabel>\n                      <FormControl>\n                        <Input {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email (Opcional)</FormLabel>\n                      <FormControl>\n                        <Input type=\"email\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"password\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{user ? \"Nova Senha (Opcional - deixe em branco para manter)\" : \"Senha (Opcional)\"}</FormLabel>\n                      <FormControl>\n                        <Input type=\"password\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </CardContent>\n            </Card>\n\n            {/* Papel e Permiss√µes */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-sm flex items-center\">\n                  <Shield className=\"mr-2 h-4 w-4\" />\n                  Papel e Permiss√µes\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"role\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Papel do Usu√°rio</FormLabel>\n                      <Select \n                        value={field.value} \n                        onValueChange={(value) => {\n                          field.onChange(value);\n                          setRolePresets(value);\n                        }}\n                      >\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"admin\">Administrador - Acesso total</SelectItem>\n                          <SelectItem value=\"editor\">Editor - Pode editar mas n√£o excluir</SelectItem>\n                          <SelectItem value=\"viewer\">Visualizador - Apenas visualiza√ß√£o</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                {/* Permiss√µes por Campo */}\n                <div className=\"space-y-4\">\n                  <h4 className=\"font-medium text-sm\">Permiss√µes por Campo</h4>\n                  \n                  <div className=\"grid grid-cols-1 gap-3\">\n                    {Object.entries(fieldLabels).map(([field, label]) => (\n                      <div key={field} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                        <span className=\"font-medium text-sm\">{label}</span>\n                        <div className=\"flex items-center space-x-4\">\n                          <FormField\n                            control={form.control}\n                            name={`permissions.${field}.view` as any}\n                            render={({ field: checkboxField }) => (\n                              <FormItem className=\"flex items-center space-x-2\">\n                                <FormControl>\n                                  <Checkbox\n                                    checked={checkboxField.value}\n                                    onCheckedChange={checkboxField.onChange}\n                                  />\n                                </FormControl>\n                                <FormLabel className=\"text-xs flex items-center\">\n                                  <Eye className=\"mr-1 h-3 w-3\" />\n                                  Ver\n                                </FormLabel>\n                              </FormItem>\n                            )}\n                          />\n                          \n                          <FormField\n                            control={form.control}\n                            name={`permissions.${field}.edit` as any}\n                            render={({ field: checkboxField }) => (\n                              <FormItem className=\"flex items-center space-x-2\">\n                                <FormControl>\n                                  <Checkbox\n                                    checked={checkboxField.value}\n                                    onCheckedChange={checkboxField.onChange}\n                                  />\n                                </FormControl>\n                                <FormLabel className=\"text-xs flex items-center\">\n                                  <Edit className=\"mr-1 h-3 w-3\" />\n                                  Editar\n                                </FormLabel>\n                              </FormItem>\n                            )}\n                          />\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  {/* Permiss√µes de P√°ginas */}\n                  <div className=\"space-y-3 pt-4 border-t\">\n                    <h4 className=\"font-medium text-sm\">Acesso √†s P√°ginas</h4>\n                    <p className=\"text-xs text-gray-500 mb-3\">Selecione quais p√°ginas o usu√°rio pode acessar</p>\n                    \n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <FormField\n                        control={form.control}\n                        name=\"permissions.pages.dashboard\"\n                        render={({ field }) => (\n                          <FormItem className=\"flex items-center space-x-2\">\n                            <FormControl>\n                              <Checkbox\n                                checked={field.value}\n                                onCheckedChange={field.onChange}\n                              />\n                            </FormControl>\n                            <FormLabel className=\"text-sm\">Dashboard</FormLabel>\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={form.control}\n                        name=\"permissions.pages.cases\"\n                        render={({ field }) => (\n                          <FormItem className=\"flex items-center space-x-2\">\n                            <FormControl>\n                              <Checkbox\n                                checked={field.value}\n                                onCheckedChange={field.onChange}\n                              />\n                            </FormControl>\n                            <FormLabel className=\"text-sm\">Gerenciar Processos</FormLabel>\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={form.control}\n                        name=\"permissions.pages.users\"\n                        render={({ field }) => (\n                          <FormItem className=\"flex items-center space-x-2\">\n                            <FormControl>\n                              <Checkbox\n                                checked={field.value}\n                                onCheckedChange={field.onChange}\n                              />\n                            </FormControl>\n                            <FormLabel className=\"text-sm\">Gerenciar Usu√°rios</FormLabel>\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={form.control}\n                        name=\"permissions.pages.activityLog\"\n                        render={({ field }) => (\n                          <FormItem className=\"flex items-center space-x-2\">\n                            <FormControl>\n                              <Checkbox\n                                checked={field.value}\n                                onCheckedChange={field.onChange}\n                              />\n                            </FormControl>\n                            <FormLabel className=\"text-sm\">Log de Atividades</FormLabel>\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n                  </div>\n\n                  {/* Permiss√µes Gerais - Opcionais */}\n                  <div className=\"space-y-3 pt-4 border-t\">\n                    <h4 className=\"font-medium text-sm\">Permiss√µes Gerais (Opcional)</h4>\n                    <p className=\"text-xs text-gray-500 mb-3\">Deixe desmarcado para n√£o conceder essas permiss√µes</p>\n                    \n                    <FormField\n                      control={form.control}\n                      name=\"permissions.canCreateCases\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex items-center space-x-2\">\n                          <FormControl>\n                            <Checkbox\n                              checked={field.value ?? false}\n                              onCheckedChange={field.onChange}\n                            />\n                          </FormControl>\n                          <FormLabel className=\"text-sm\">Pode criar novos processos</FormLabel>\n                        </FormItem>\n                      )}\n                    />\n                    \n                    <FormField\n                      control={form.control}\n                      name=\"permissions.canDeleteCases\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex items-center space-x-2\">\n                          <FormControl>\n                            <Checkbox\n                              checked={field.value ?? false}\n                              onCheckedChange={field.onChange}\n                            />\n                          </FormControl>\n                          <FormLabel className=\"text-sm\">Pode excluir processos</FormLabel>\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n\n                </div>\n              </CardContent>\n            </Card>\n\n            <div className=\"flex justify-end space-x-2 pt-4\">\n              <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n                Cancelar\n              </Button>\n              <Button type=\"submit\" disabled={isSubmitting}>\n                {isSubmitting ? \"Salvando...\" : (user ? \"Salvar\" : \"Criar\")}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":20271},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { User } from \"@shared/schema\";\nimport { getQueryFn } from \"@/lib/queryClient\";\n\nexport function useAuth() {\n  const { data: user, isLoading, error } = useQuery<User | undefined>({\n    queryKey: [\"/api/user\"],\n    queryFn: getQueryFn({ on401: \"returnNull\" }),\n    retry: false,\n    refetchOnWindowFocus: false,\n    staleTime: 1 * 60 * 1000, // 1 minuto\n    refetchOnMount: true,\n  });\n\n  return {\n    user: user ?? null,\n    isLoading,\n    isAuthenticated: !!user,\n    error,\n  };\n}","size_bytes":539},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}","size_bytes":115},"client/src/lib/permissions.ts":{"content":"// Sistema de permiss√µes para controle de status\nexport interface UserPermissions {\n  canChangeToNovo: boolean;\n  canChangeToAndamento: boolean;\n  canChangeToPendente: boolean;\n  canChangeToConcluido: boolean;\n  canEditAllCases: boolean;\n  canDeleteCases: boolean;\n}\n\nexport function getUserPermissions(user: any): UserPermissions {\n  if (!user) {\n    return {\n      canChangeToNovo: false,\n      canChangeToAndamento: false,\n      canChangeToPendente: false,\n      canChangeToConcluido: false,\n      canEditAllCases: false,\n      canDeleteCases: false,\n    };\n  }\n\n  // Administrador tem todas as permiss√µes\n  if (user.role === 'admin') {\n    return {\n      canChangeToNovo: true,\n      canChangeToAndamento: true,\n      canChangeToPendente: true,\n      canChangeToConcluido: true,\n      canEditAllCases: true,\n      canDeleteCases: true,\n    };\n  }\n\n  // Permiss√µes espec√≠ficas para lucas.silva\n  if (user.username === 'lucas.silva') {\n    return {\n      canChangeToNovo: false,\n      canChangeToAndamento: true, // Pode reabrir processos\n      canChangeToPendente: false,\n      canChangeToConcluido: true, // Pode marcar como conclu√≠do\n      canEditAllCases: false,\n      canDeleteCases: false,\n    };\n  }\n\n  // Editores padr√£o\n  if (user.role === 'editor') {\n    return {\n      canChangeToNovo: false,\n      canChangeToAndamento: true,\n      canChangeToPendente: false,\n      canChangeToConcluido: true,\n      canEditAllCases: false,\n      canDeleteCases: false,\n    };\n  }\n\n  // Usu√°rios sem permiss√µes espec√≠ficas\n  return {\n    canChangeToNovo: false,\n    canChangeToAndamento: false,\n    canChangeToPendente: false,\n    canChangeToConcluido: true, // Todos podem marcar como conclu√≠do\n    canEditAllCases: false,\n    canDeleteCases: false,\n  };\n}\n\nexport function canChangeStatus(user: any, fromStatus: string, toStatus: string): boolean {\n  const permissions = getUserPermissions(user);\n  \n  switch (toStatus) {\n    case 'novo':\n      return permissions.canChangeToNovo;\n    case 'andamento':\n      return permissions.canChangeToAndamento;\n    case 'pendente':\n      return permissions.canChangeToPendente;\n    case 'concluido':\n      return permissions.canChangeToConcluido;\n    default:\n      return false;\n  }\n}","size_bytes":2233},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  console.log(`üåê API REQUEST: ${method} ${url}`, data ? 'with data' : 'no data');\n  \n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  console.log(`üì° API RESPONSE: ${res.status} ${res.statusText}`);\n  const responseText = await res.clone().text();\n  console.log(`üìÑ RESPONSE TYPE:`, responseText.startsWith('<!DOCTYPE') ? 'HTML' : 'JSON/TEXT');\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: 5 * 60 * 1000, // 5 minutos\n      retry: false,\n      refetchOnMount: true,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1735},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/ActivityLog.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useState } from \"react\";\nimport { History, Filter, Download, Search, Calendar } from \"lucide-react\";\n\nexport default function ActivityLog() {\n  const [actionFilter, setActionFilter] = useState(\"all\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const { data: logs, isLoading, refetch } = useQuery({\n    queryKey: [\"/api/activity-logs\", { action: actionFilter, search: searchTerm }],\n    queryFn: async ({ queryKey }) => {\n      const [, params] = queryKey as [string, { action: string; search: string }];\n      const searchParams = new URLSearchParams();\n      if (params.action && params.action !== 'all') searchParams.set('action', params.action);\n      if (params.search) searchParams.set('search', params.search);\n      \n      const response = await fetch(`/api/activity-logs?${searchParams.toString()}`, {\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch activity logs');\n      }\n      \n      const result = await response.json();\n      console.log('üîç FRONTEND: Logs recebidos:', result.length);\n      return result;\n    },\n    refetchInterval: 2000, // Refetch a cada 2 segundos para logs em tempo real\n    refetchOnWindowFocus: true,\n    staleTime: 0, // Sempre considerar dados como stale\n  });\n\n  const getActionColor = (action: string) => {\n    switch (action) {\n      case 'CREATE_CASE': return 'bg-green-100 text-green-800 border-green-200';\n      case 'UPDATE_CASE': return 'bg-blue-100 text-blue-800 border-blue-200';\n      case 'UPDATE_STATUS': return 'bg-amber-100 text-amber-800 border-amber-200';\n      case 'DELETE_CASE': return 'bg-red-100 text-red-800 border-red-200';\n      case 'VIEW_CASES': return 'bg-indigo-100 text-indigo-800 border-indigo-200';\n      case 'VIEW_DASHBOARD': return 'bg-purple-100 text-purple-800 border-purple-200';\n      case 'VIEW_USERS': return 'bg-cyan-100 text-cyan-800 border-cyan-200';\n      case 'CREATE_EMPLOYEE': return 'bg-teal-100 text-teal-800 border-teal-200';\n      case 'UPDATE_EMPLOYEE': return 'bg-blue-100 text-blue-800 border-blue-200';\n      case 'DELETE_EMPLOYEE': return 'bg-red-100 text-red-800 border-red-200';\n      case 'IMPORT_EMPLOYEES': return 'bg-orange-100 text-orange-800 border-orange-200';\n      case 'EXPORT_EMPLOYEES': return 'bg-lime-100 text-lime-800 border-lime-200';\n      case 'LOGIN': return 'bg-emerald-100 text-emerald-800 border-emerald-200';\n      case 'LOGOUT': return 'bg-gray-100 text-gray-800 border-gray-200';\n      case 'DENIED_ACCESS': return 'bg-red-100 text-red-800 border-red-200';\n      default: return 'bg-slate-100 text-slate-800 border-slate-200';\n    }\n  };\n\n  const getActionLabel = (action: string) => {\n    switch (action) {\n      case 'CREATE_CASE': return 'Processo Criado';\n      case 'UPDATE_CASE': return 'Processo Editado';\n      case 'UPDATE_STATUS': return 'Status Alterado';\n      case 'DELETE_CASE': return 'Processo Exclu√≠do';\n      case 'VIEW_CASES': return 'Visualizou Processos';\n      case 'VIEW_DASHBOARD': return 'Acessou Dashboard';\n      case 'VIEW_USERS': return 'Acessou Usu√°rios';\n      case 'CREATE_EMPLOYEE': return 'Funcion√°rio Criado';\n      case 'UPDATE_EMPLOYEE': return 'Funcion√°rio Editado';\n      case 'DELETE_EMPLOYEE': return 'Funcion√°rio Deletado';\n      case 'IMPORT_EMPLOYEES': return 'Importa√ß√£o Excel';\n      case 'EXPORT_EMPLOYEES': return 'Exporta√ß√£o Excel';\n      case 'LOGIN': return 'Login';\n      case 'LOGOUT': return 'Logout';\n      case 'DENIED_ACCESS': return 'Acesso Negado';\n      default: return action.replace(/_/g, ' ');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <Card>\n          <CardHeader>\n            <Skeleton className=\"h-6 w-48\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {[1, 2, 3, 4, 5].map((i) => (\n                <div key={i} className=\"flex items-center space-x-4\">\n                  <Skeleton className=\"h-10 w-10 rounded-full\" />\n                  <div className=\"flex-1 space-y-2\">\n                    <Skeleton className=\"h-4 w-3/4\" />\n                    <Skeleton className=\"h-3 w-1/2\" />\n                  </div>\n                  <Skeleton className=\"h-6 w-20\" />\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"border-b border-gray-200 pb-6\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Log de Modifica√ß√µes</h1>\n        <p className=\"text-gray-600\">Acompanhe todas as modifica√ß√µes de dados realizadas no sistema</p>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\n            <div className=\"flex items-center space-x-4\">\n              <Button \n                variant=\"outline\" \n                onClick={() => refetch()}\n                className=\"bg-blue-600 text-white hover:bg-blue-700\"\n              >\n                <Search className=\"mr-2\" size={16} />\n                Atualizar\n              </Button>\n              <Button variant=\"outline\" className=\"bg-green-600 text-white hover:bg-green-700\">\n                <Download className=\"mr-2\" size={16} />\n                Exportar Log\n              </Button>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <Select value={actionFilter} onValueChange={setActionFilter}>\n                <SelectTrigger className=\"w-48\">\n                  <SelectValue placeholder=\"Todas as A√ß√µes\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todas as Modifica√ß√µes</SelectItem>\n                  <SelectItem value=\"CREATE_CASE\">Cria√ß√£o de Processo</SelectItem>\n                  <SelectItem value=\"UPDATE_CASE\">Edi√ß√£o de Processo</SelectItem>\n                  <SelectItem value=\"UPDATE_STATUS\">Altera√ß√£o de Status</SelectItem>\n                  <SelectItem value=\"DELETE_CASE\">Exclus√£o de Processo</SelectItem>\n                  <SelectItem value=\"DENIED_ACCESS\">Acesso Negado</SelectItem>\n                </SelectContent>\n              </Select>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n                <Input\n                  placeholder=\"Buscar modifica√ß√µes...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"pl-10 w-64\"\n                />\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Activity Log Table */}\n      <Card>\n        <CardHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50\">\n          <CardTitle className=\"text-lg font-semibold flex items-center\">\n            <History className=\"mr-2\" size={20} />\n            Registro de Modifica√ß√µes de Dados\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <Table>\n            <TableHeader>\n              <TableRow className=\"bg-gray-50\">\n                <TableHead className=\"font-semibold\">Data/Hora</TableHead>\n                <TableHead className=\"font-semibold\">Usu√°rio</TableHead>\n                <TableHead className=\"font-semibold\">A√ß√£o</TableHead>\n                <TableHead className=\"font-semibold\">Descri√ß√£o</TableHead>\n                <TableHead className=\"font-semibold\">IP</TableHead>\n                <TableHead className=\"font-semibold\">Status</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {logs && logs.length > 0 ? (\n                logs.map((log: any) => {\n                  console.log('üîç FRONTEND: Renderizando log:', log.id, log.action);\n                  return (\n                <TableRow key={log.id} className=\"hover:bg-gray-50 transition-colors\">\n                  <TableCell className=\"font-medium\">\n                    <div className=\"flex items-center space-x-2\">\n                      <Calendar size={16} className=\"text-gray-400\" />\n                      <div>\n                        <div className=\"text-sm font-medium\">\n                          {new Date(log.createdAt).toLocaleDateString('pt-BR')}\n                        </div>\n                        <div className=\"text-xs text-gray-500\">\n                          {new Date(log.createdAt).toLocaleTimeString('pt-BR')}\n                        </div>\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center\">\n                        <span className=\"text-white text-xs font-semibold\">\n                          {log.user?.firstName?.charAt(0) || 'U'}\n                        </span>\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-sm\">\n                          {log.user ? `${log.user.firstName} ${log.user.lastName}` : 'Sistema'}\n                        </div>\n                        <div className=\"text-xs text-gray-500\">\n                          {log.user?.role}\n                        </div>\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <Badge className={getActionColor(log.action)}>\n                      {getActionLabel(log.action)}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"max-w-md\">\n                      <p className=\"text-sm\">{log.description}</p>\n                      {log.details && (\n                        <p className=\"text-xs text-gray-500 mt-1\">{log.details}</p>\n                      )}\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <code className=\"px-2 py-1 bg-gray-100 rounded text-xs\">\n                      {log.ipAddress || '127.0.0.1'}\n                    </code>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"flex items-center\">\n                      <div className=\"w-2 h-2 bg-green-500 rounded-full mr-2\"></div>\n                      <span className=\"text-sm text-green-600\">Sucesso</span>\n                    </div>\n                  </TableCell>\n                </TableRow>\n                  );\n                })\n              ) : (\n                <TableRow>\n                  <TableCell colSpan={6} className=\"text-center py-12\">\n                    <div className=\"flex flex-col items-center space-y-4\">\n                      <History className=\"w-16 h-16 text-gray-300\" />\n                      <div>\n                        <h3 className=\"text-lg font-medium text-gray-900 mb-1\">\n                          Nenhuma atividade encontrada\n                        </h3>\n                        <p className=\"text-gray-500\">\n                          Ainda n√£o h√° registros de atividades para exibir.\n                        </p>\n                      </div>\n                    </div>\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n\n      {/* Summary Stats */}\n      {logs && logs.length > 0 && (\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <div className=\"text-2xl font-bold text-blue-600 mb-2\">\n                {logs.length}\n              </div>\n              <div className=\"text-sm text-gray-600\">Total de Atividades</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <div className=\"text-2xl font-bold text-green-600 mb-2\">\n                {logs.filter((log: any) => log.action.includes('CREATE')).length}\n              </div>\n              <div className=\"text-sm text-gray-600\">Cria√ß√µes</div>\n            </CardContent>\n          </Card>\n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <div className=\"text-2xl font-bold text-purple-600 mb-2\">\n                {[...new Set(logs.map((log: any) => log.userId))].length}\n              </div>\n              <div className=\"text-sm text-gray-600\">Usu√°rios Ativos</div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  );\n}","size_bytes":13349},"client/src/pages/AuthPage.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Lock, User, Eye, EyeOff, Building2, Scale } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { User as UserType } from \"@shared/schema\";\n\nconst loginSchema = z.object({\n  username: z.string().min(1, \"Usu√°rio √© obrigat√≥rio\"),\n  password: z.string().min(1, \"Senha √© obrigat√≥ria\"),\n});\n\ntype LoginForm = z.infer<typeof loginSchema>;\n\nexport default function AuthPage() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const { toast } = useToast();\n\n  const loginForm = useForm<LoginForm>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      username: \"\",\n      password: \"\",\n    },\n  });\n\n  const handleLogin = async (data: LoginForm) => {\n    setIsLoading(true);\n    try {\n      const response = await apiRequest(\"POST\", \"/api/login\", data);\n      const user: UserType = await response.json();\n      queryClient.setQueryData([\"/api/user\"], user);\n      queryClient.invalidateQueries({ queryKey: [\"/api/user\"] });\n      toast({\n        title: \"Acesso autorizado\",\n        description: `Bem-vindo, ${user.firstName}!`,\n        duration: 2000,\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Acesso negado\",\n        description: \"Credenciais inv√°lidas. Verifique usu√°rio e senha.\",\n        variant: \"destructive\",\n        duration: 4000,\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 flex\">\n      {/* Left Panel - Branding */}\n      <div className=\"hidden lg:flex lg:flex-1 relative overflow-hidden bg-gradient-to-br from-blue-900 via-slate-800 to-blue-950\">\n        <div className=\"absolute inset-0 bg-gradient-to-br from-blue-600/20 to-slate-800/40\"></div>\n        \n        {/* Centered Content Container */}\n        <div className=\"relative z-10 flex flex-col justify-center items-center w-full h-full p-8\">\n          <div className=\"max-w-sm w-full text-center space-y-8\">\n            \n            {/* Logo and Brand */}\n            <div className=\"space-y-8\">\n              <div className=\"space-y-4\">\n                <h1 className=\"text-4xl font-bold text-white tracking-tight leading-tight\">\n                  LegalCore Pro\n                </h1>\n                <p className=\"text-xl text-blue-100 font-medium leading-relaxed\">\n                  Sistema Avan√ßado de Gest√£o Jur√≠dica\n                </p>\n                <div className=\"w-16 h-1 bg-gradient-to-r from-blue-400 to-blue-300 rounded-full mx-auto\"></div>\n              </div>\n            </div>\n\n            {/* Features Cards */}\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3 text-blue-100 bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10\">\n                <div className=\"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0\">\n                  <Building2 className=\"w-4 h-4 text-white\" />\n                </div>\n                <span className=\"text-sm font-medium\">Gest√£o Corporativa Integrada</span>\n              </div>\n              \n              <div className=\"flex items-center space-x-3 text-blue-100 bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10\">\n                <div className=\"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0\">\n                  <Scale className=\"w-4 h-4 text-white\" />\n                </div>\n                <span className=\"text-sm font-medium\">Controle de Processos Jur√≠dicos</span>\n              </div>\n              \n              <div className=\"flex items-center space-x-3 text-blue-100 bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-white/10\">\n                <div className=\"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0\">\n                  <Lock className=\"w-4 h-4 text-white\" />\n                </div>\n                <span className=\"text-sm font-medium\">Seguran√ßa e Conformidade</span>\n              </div>\n            </div>\n\n            {/* Security Information */}\n            <div className=\"pt-6 border-t border-white/20\">\n              <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <p className=\"text-sm font-semibold text-white\">LegalCore Pro¬Æ - Sistema Propriet√°rio</p>\n                  <div className=\"text-xs text-blue-200 space-y-1\">\n                    <p>Criptografia SHA-256 ‚Ä¢ Conforme LGPD</p>\n                    <p>Acesso restrito e monitorado</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex justify-center space-x-3\">\n                  <div className=\"flex items-center space-x-2 px-3 py-1.5 bg-white/10 rounded-full border border-white/20 backdrop-blur-sm\">\n                    <Lock className=\"w-3 h-3 text-white\" />\n                    <span className=\"text-xs font-medium text-white\">Certificado Digital</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2 px-3 py-1.5 bg-white/10 rounded-full border border-white/20 backdrop-blur-sm\">\n                    <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\n                    <span className=\"text-xs font-medium text-white\">SSL/TLS</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n          </div>\n        </div>\n      </div>\n\n      {/* Right Panel - Login Form */}\n      <div className=\"flex-1 flex items-center justify-center min-h-screen bg-white p-4\">\n        <div className=\"w-full max-w-md\">\n          <div className=\"space-y-8\">\n            {/* Mobile Header */}\n            <div className=\"text-center lg:hidden\">\n              <div className=\"w-16 h-16 mx-auto bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mb-4 shadow-lg\">\n                <Scale className=\"w-8 h-8 text-white\" />\n              </div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">BASE FACILITIES</h2>\n              <p className=\"text-gray-600 mt-2\">Sistema Jur√≠dico</p>\n            </div>\n\n            {/* Login Form */}\n            <Card className=\"shadow-2xl border border-gray-100 bg-white\">\n              <CardHeader className=\"space-y-4 pb-6 text-center\">\n                <div className=\"hidden lg:block mb-4\">\n                  <div className=\"w-12 h-12 mx-auto bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg\">\n                    <Scale className=\"w-6 h-6 text-white\" />\n                  </div>\n                </div>\n                <div>\n                  <h2 className=\"text-2xl font-bold text-gray-900\">Acesso ao Sistema</h2>\n                  <p className=\"text-gray-600 mt-2\">Entre com suas credenciais corporativas</p>\n                </div>\n              </CardHeader>\n              \n              <CardContent className=\"space-y-6 px-8 pb-8\">\n                <Form {...loginForm}>\n                  <form onSubmit={loginForm.handleSubmit(handleLogin)} className=\"space-y-5\">\n                    <FormField\n                      control={loginForm.control}\n                      name=\"username\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-gray-700 font-medium text-sm\">Usu√°rio</FormLabel>\n                          <FormControl>\n                            <div className=\"relative\">\n                              <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                              <Input \n                                {...field} \n                                className=\"pl-10 h-11 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 rounded-lg text-sm\" \n                                placeholder=\"Digite seu usu√°rio\"\n                              />\n                            </div>\n                          </FormControl>\n                          <FormMessage className=\"text-xs\" />\n                        </FormItem>\n                      )}\n                    />\n                    \n                    <FormField\n                      control={loginForm.control}\n                      name=\"password\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-gray-700 font-medium text-sm\">Senha</FormLabel>\n                          <FormControl>\n                            <div className=\"relative\">\n                              <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                              <Input \n                                {...field} \n                                type={showPassword ? \"text\" : \"password\"}\n                                className=\"pl-10 pr-10 h-11 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 rounded-lg text-sm password-field\" \n                                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                              />\n                              <button\n                                type=\"button\"\n                                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors\"\n                                onClick={() => setShowPassword(!showPassword)}\n                              >\n                                {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                              </button>\n                            </div>\n                          </FormControl>\n                          <FormMessage className=\"text-xs\" />\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"pt-2\">\n                      <Button \n                        type=\"submit\" \n                        className=\"w-full h-11 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-medium shadow-lg transition-all duration-200 rounded-lg\"\n                        disabled={isLoading}\n                      >\n                        {isLoading ? (\n                          <div className=\"flex items-center justify-center space-x-2\">\n                            <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                            <span>Entrando...</span>\n                          </div>\n                        ) : (\n                          \"Entrar no Sistema\"\n                        )}\n                      </Button>\n                    </div>\n                  </form>\n                </Form>\n\n                <div className=\"text-center text-xs text-gray-400 pt-6 border-t border-gray-100\">\n                  <p>¬© 2024 LegalCore Pro. Todos os direitos reservados.</p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":11646},"client/src/pages/AuthPageOld.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Lock, User, Eye, EyeOff } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { User as UserType } from \"@shared/schema\";\nimport facilityLogo from \"@assets/449265_6886_1753882292906.jpg\";\n\nconst loginSchema = z.object({\n  username: z.string().min(1, \"Usu√°rio √© obrigat√≥rio\"),\n  password: z.string().min(1, \"Senha √© obrigat√≥ria\"),\n});\n\ntype LoginForm = z.infer<typeof loginSchema>;\n\nexport default function AuthPage() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const { toast } = useToast();\n\n  const loginForm = useForm<LoginForm>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      username: \"\",\n      password: \"\",\n    },\n  });\n\n  const handleLogin = async (data: LoginForm) => {\n    setIsLoading(true);\n    try {\n      const response = await apiRequest(\"POST\", \"/api/login\", data);\n      const user: UserType = await response.json();\n      queryClient.setQueryData([\"/api/user\"], user);\n      toast({\n        title: \"Acesso autorizado\",\n        description: `Bem-vindo, ${user.firstName}!`,\n        duration: 2000,\n      });\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 500);\n    } catch (error: any) {\n      toast({\n        title: \"Acesso negado\",\n        description: \"Credenciais inv√°lidas. Verifique usu√°rio e senha.\",\n        variant: \"destructive\",\n        duration: 4000,\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex\">\n      {/* Left Panel - Branding */}\n      <div className=\"hidden lg:flex lg:flex-1 relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gradient-to-br from-blue-600/20 to-indigo-800/40\"></div>\n        <div className=\"relative z-10 flex flex-col justify-center items-center p-12 text-white\">\n          <div className=\"text-center space-y-8\">\n            <div className=\"space-y-4\">\n              <div className=\"mx-auto\">\n                <img \n                  src={facilityLogo} \n                  alt=\"BASE FACILITIES\" \n                  className=\"w-32 h-24 object-contain\"\n                />\n              </div>\n              <div>\n                <h1 className=\"text-4xl font-bold tracking-tight mb-2\">BASE FACILITIES</h1>\n                <p className=\"text-xl text-blue-100 font-light\">Gest√£o Jur√≠dica Corporativa</p>\n              </div>\n            </div>\n\n            <div className=\"space-y-6 max-w-md\">\n              <p className=\"text-lg text-blue-50/90 leading-relaxed\">\n                Plataforma integrada para controle de processos, gest√£o de casos e auditoria completa de atividades jur√≠dicas.\n              </p>\n              \n              <div className=\"grid gap-4\">\n                <div className=\"flex items-center gap-3 text-blue-100\">\n                  <div className=\"w-2 h-2 bg-blue-400 rounded-full\"></div>\n                  <span>Controle total de casos e processos</span>\n                </div>\n                <div className=\"flex items-center gap-3 text-blue-100\">\n                  <div className=\"w-2 h-2 bg-blue-400 rounded-full\"></div>\n                  <span>Auditoria e rastreamento de atividades</span>\n                </div>\n                <div className=\"flex items-center gap-3 text-blue-100\">\n                  <div className=\"w-2 h-2 bg-blue-400 rounded-full\"></div>\n                  <span>Dashboard anal√≠tico em tempo real</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Right Panel - Login Form */}\n      <div className=\"flex-1 lg:flex-initial lg:w-[500px] flex items-center justify-center p-8 bg-white\">\n        <div className=\"w-full max-w-md space-y-8\">\n          {/* Mobile Logo */}\n          <div className=\"lg:hidden text-center space-y-4\">\n            <img \n              src={facilityLogo} \n              alt=\"BASE FACILITIES\" \n              className=\"w-16 h-16 mx-auto rounded-full object-cover\"\n            />\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">BASE FACILITIES</h1>\n              <p className=\"text-gray-600\">Gest√£o Jur√≠dica Corporativa</p>\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            <div className=\"text-center lg:text-left\">\n              <h2 className=\"text-3xl font-bold text-gray-900\">√Årea Restrita</h2>\n              <p className=\"mt-2 text-gray-600\">Acesse sua conta corporativa</p>\n            </div>\n\n            <Card className=\"border-0 shadow-xl bg-white\">\n              <CardHeader className=\"space-y-1 pb-8\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto lg:mx-0\">\n                  <Lock className=\"w-6 h-6 text-blue-600\" />\n                </div>\n              </CardHeader>\n              <CardContent className=\"pt-0\">\n                <Form {...loginForm}>\n                  <form onSubmit={loginForm.handleSubmit(handleLogin)} className=\"space-y-6\">\n                    <FormField\n                      control={loginForm.control}\n                      name=\"username\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-sm font-semibold text-gray-700\">Usu√°rio</FormLabel>\n                          <FormControl>\n                            <div className=\"relative\">\n                              <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n                              <Input \n                                placeholder=\"Digite seu usu√°rio\"\n                                className=\"pl-10 h-12 border-2 focus:border-blue-500 transition-colors\"\n                                {...field} \n                              />\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    <FormField\n                      control={loginForm.control}\n                      name=\"password\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel className=\"text-sm font-semibold text-gray-700\">Senha</FormLabel>\n                          <FormControl>\n                            <div className=\"relative\">\n                              <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n                              <Input \n                                type={showPassword ? \"text\" : \"password\"}\n                                placeholder=\"Digite sua senha\"\n                                className=\"pl-10 pr-10 h-12 border-2 focus:border-blue-500 transition-colors\"\n                                {...field} \n                              />\n                              <button\n                                type=\"button\"\n                                onClick={() => setShowPassword(!showPassword)}\n                                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n                              >\n                                {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                              </button>\n                            </div>\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    <Button \n                      type=\"submit\" \n                      className=\"w-full h-12 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl\" \n                      disabled={isLoading}\n                    >\n                      {isLoading ? (\n                        <div className=\"flex items-center gap-2\">\n                          <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                          Autenticando...\n                        </div>\n                      ) : (\n                        \"Acessar Sistema\"\n                      )}\n                    </Button>\n                  </form>\n                </Form>\n              </CardContent>\n            </Card>\n\n            <div className=\"text-center\">\n              <p className=\"text-xs text-gray-500\">\n                ¬© 2024 BASE FACILITIES - Sistema Corporativo de Gest√£o Jur√≠dica\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":9253},"client/src/pages/Cases.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport NewCaseModal from \"@/components/NewCaseModal\";\nimport { Plus, FileDown, Eye, Edit, Check, Trash2, Clock, CheckCircle, AlertTriangle, Filter, Calendar, Users, MoreVertical, Upload } from \"lucide-react\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport type { CaseWithRelations } from \"@shared/schema\";\nimport ProcessTagRenderer from \"@/components/ProcessTagRenderer\";\nimport DeadlineAlert from \"@/components/DeadlineAlert\";\nimport EmployeeSearchModal from \"@/components/EmployeeSearchModal\";\nimport { getUserPermissions, canChangeStatus } from \"@/lib/permissions\";\nimport ConfirmStatusDialog from \"@/components/ConfirmStatusDialog\";\nimport { Link } from \"wouter\";\nimport \"@/styles/responsive-cases.css\";\n\nexport default function Cases() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  \n  // Verificar se o usu√°rio tem permiss√£o para ver a p√°gina de processos\n  const hasPagePermission = () => {\n    if (user?.role === 'admin') return true;\n    const permissions = (user as any)?.permissions;\n    return permissions?.pages?.cases === true;\n  };\n\n  // Se n√£o tem permiss√£o, mostrar mensagem de acesso negado\n  if (!hasPagePermission()) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center p-8 bg-white rounded-lg shadow-lg max-w-md\">\n          <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Acesso Negado</h2>\n          <p className=\"text-gray-600 mb-4\">\n            Voc√™ n√£o tem permiss√£o para acessar a p√°gina de processos.\n            Entre em contato com o administrador.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  const [activeTab, setActiveTab] = useState(\"pending\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [dateFilter, setDateFilter] = useState(\"\");\n  const [dateFilterTo, setDateFilterTo] = useState(\"\");\n  const [matriculaFilter, setMatriculaFilter] = useState(\"\");\n  const [nomeFilter, setNomeFilter] = useState(\"\");\n  const [processoFilter, setProcessoFilter] = useState(\"\");\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedCase, setSelectedCase] = useState<CaseWithRelations | null>(null);\n  const [confirmDialog, setConfirmDialog] = useState<{\n    open: boolean;\n    caseData: CaseWithRelations | null;\n    newStatus: string;\n  }>({\n    open: false,\n    caseData: null,\n    newStatus: ''\n  });\n  \n  const queryClient = useQueryClient();\n\n  const { data: cases, isLoading } = useQuery({\n    queryKey: [\"/api/cases\"],\n    queryFn: async () => {\n      const response = await fetch('/api/cases', {\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        if (response.status === 401) {\n          toast({\n            title: \"N√£o autorizado\",\n            description: \"Voc√™ foi desconectado. Redirecionando...\",\n            variant: \"destructive\",\n          });\n          setTimeout(() => {\n            window.location.href = \"/api/login\";\n          }, 500);\n          return [];\n        }\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      return response.json();\n    },\n  });\n\n  const createCaseMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"POST\", \"/api/cases\", data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Processo criado com sucesso\",\n      });\n      setIsModalOpen(false);\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"N√£o autorizado\",\n          description: \"Voc√™ foi desconectado. Redirecionando...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao criar processo\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateCaseMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"PATCH\", `/api/cases/${data.id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Processo atualizado com sucesso\",\n      });\n      setIsModalOpen(false);\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"N√£o autorizado\",\n          description: \"Voc√™ foi desconectado. Redirecionando...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao atualizar processo\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      const response = await apiRequest(\"PATCH\", `/api/cases/${id}/status`, { status });\n      return response.json();\n    },\n    onSuccess: (_, variables) => {\n      // Invalidar todas as consultas relacionadas\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      \n      const statusLabels = {\n        'novo': 'Novo',\n        'pendente': 'Pendente',\n        'concluido': 'Conclu√≠do',\n        'atrasado': 'Atrasado'\n      };\n      \n      toast({\n        title: \"Status atualizado com sucesso\",\n        description: `Processo alterado para: ${statusLabels[variables.status as keyof typeof statusLabels]}`,\n        variant: \"default\"\n      });\n      \n      // For√ßar atualiza√ß√£o imediata da interface\n      setTimeout(() => {\n        queryClient.refetchQueries({ queryKey: [\"/api/cases\"] });\n      }, 50);\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"N√£o autorizado\",\n          description: \"Voc√™ foi desconectado. Redirecionando...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao atualizar status\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteCaseMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/cases/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Processo exclu√≠do com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"N√£o autorizado\",\n          description: \"Voc√™ foi desconectado. Redirecionando...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao excluir processo\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCreateCase = (data: any) => {\n    createCaseMutation.mutate(data);\n  };\n\n  const handleUpdateCase = (data: any) => {\n    updateCaseMutation.mutate({ ...data, id: selectedCase?.id });\n  };\n\n  const getStatusBadge = (caseData: CaseWithRelations) => {\n    // Aplicar l√≥gica de cores de alerta se o caso tiver os campos de alerta\n    const alertColor = (caseData as any).alertColor;\n    \n    let statusConfig = {\n      novo: { label: \"Novo\", className: \"bg-blue-100 text-blue-800 border-blue-200\" },\n      pendente: { label: \"Pendente\", className: \"bg-yellow-100 text-yellow-800 border-yellow-200\" },\n      concluido: { label: \"Conclu√≠do\", className: \"bg-green-100 text-green-800 border-green-200\" },\n      atrasado: { label: \"Atrasado\", className: \"bg-red-100 text-red-800 border-red-200\" },\n    };\n    \n    // Aplicar cores de alerta baseadas na data\n    let finalClassName = statusConfig[caseData.status as keyof typeof statusConfig]?.className || statusConfig.novo.className;\n    \n    if (alertColor === 'red') {\n      finalClassName = \"bg-red-100 text-red-800 border-red-200\";\n    } else if (alertColor === 'yellow') {\n      finalClassName = \"bg-yellow-100 text-yellow-800 border-yellow-200\";\n    }\n    \n    const config = statusConfig[caseData.status as keyof typeof statusConfig] || statusConfig.novo;\n    return (\n      <Badge className={`${finalClassName} border font-medium`}>\n        {config.label}\n      </Badge>\n    );\n  };\n\n  const getRowClassName = (caseData: CaseWithRelations) => {\n    const alertColor = (caseData as any).alertColor;\n    \n    // Priorizar cor de alerta sobre status\n    if (alertColor === 'red') {\n      return \"bg-red-50/40 border-l-4 border-l-red-500\";\n    } else if (alertColor === 'yellow') {\n      return \"bg-yellow-50/40 border-l-4 border-l-yellow-500\";\n    }\n    \n    // Usar cores padr√£o baseadas no status\n    const statusClasses = {\n      novo: \"bg-blue-50/30 border-l-4 border-l-blue-500\",\n      pendente: \"bg-yellow-50/30 border-l-4 border-l-yellow-500\",\n      concluido: \"bg-green-50/30 border-l-4 border-l-green-500\",\n      atrasado: \"bg-red-50/30 border-l-4 border-l-red-500\",\n    };\n    return statusClasses[caseData.status as keyof typeof statusClasses] || \"\";\n  };\n\n  // Aplicar filtros e categorizar casos\n  const filteredCases = cases?.filter((caseData: CaseWithRelations) => {\n    // Verificar matr√≠cula\n    const matchesMatricula = !matriculaFilter || \n      (caseData.clientName && caseData.clientName.toLowerCase().includes(matriculaFilter.toLowerCase()));\n    \n    // Verificar nome\n    const matchesNome = !nomeFilter || \n      (caseData.clientName && caseData.clientName.toLowerCase().includes(nomeFilter.toLowerCase())) ||\n      (caseData.processNumber && caseData.processNumber.toLowerCase().includes(nomeFilter.toLowerCase()));\n    \n    // Verificar processo (busca em description)\n    const matchesProcesso = !processoFilter || \n      (caseData.description && caseData.description.toLowerCase().includes(processoFilter.toLowerCase())) ||\n      (caseData.processNumber && caseData.processNumber.toLowerCase().includes(processoFilter.toLowerCase()));\n    \n    // Verificar busca geral\n    const matchesSearch = !searchTerm || \n      (caseData.description && caseData.description.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (caseData.processNumber && caseData.processNumber.toLowerCase().includes(searchTerm.toLowerCase())) ||\n      (caseData.clientName && caseData.clientName.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    // Verificar data\n    const matchesDate = (!dateFilter && !dateFilterTo) || (caseData.dueDate && (\n      (!dateFilter || new Date(caseData.dueDate) >= new Date(dateFilter)) &&\n      (!dateFilterTo || new Date(caseData.dueDate) <= new Date(dateFilterTo))\n    ));\n    \n    return matchesMatricula && matchesNome && matchesProcesso && matchesSearch && matchesDate;\n  }) || [];\n\n  const pendingCases = filteredCases.filter((c: CaseWithRelations) => c.status === 'novo' || c.status === 'pendente' || c.status === 'atrasado');\n  const completedCases = filteredCases.filter((c: CaseWithRelations) => c.status === 'concluido');\n  const overdueCases = filteredCases.filter((c: CaseWithRelations) => c.status === 'atrasado');\n\n\n\n  const renderCaseTable = (casesToShow: CaseWithRelations[], showCompleteAction = true) => (\n    <div className=\"overflow-x-auto max-h-[400px] md:max-h-[600px] overflow-y-auto border border-gray-200 rounded-lg cases-table-wrapper\">\n      <Table className=\"cases-table\">\n        <TableHeader className=\"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm\">\n          <TableRow className=\"border-b border-gray-200\">\n            <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200 bg-white text-sm py-5 text-left\">\n              Matr√≠cula\n            </TableHead>  \n            <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200 bg-white text-sm py-5 text-left\">\n              Nome do Cliente\n            </TableHead>\n            <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200 bg-white text-sm py-5 text-left hide-mobile\">\n              Tipo de Processo\n            </TableHead>\n            <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200 bg-white text-sm py-5 text-left\">\n              Prazo de Entrega\n            </TableHead>\n            <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200 bg-white text-sm py-5 text-left hide-mobile\">\n              Data Audi√™ncia\n            </TableHead>\n            <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200 bg-white text-sm py-5 text-left hide-mobile\">\n              Observa√ß√µes\n            </TableHead>\n            <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200 bg-white text-sm py-5 text-left\">\n              Status / Tempo\n            </TableHead>\n            <TableHead className=\"font-semibold text-gray-700 bg-white text-sm py-5 text-center\">\n              A√ß√µes\n            </TableHead>\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {casesToShow.map((caseData: CaseWithRelations) => (\n            <TableRow key={caseData.id} className={`${getRowClassName(caseData)} hover:bg-gray-50/70 border-b border-gray-100 transition-all duration-200`}>\n              {/* Matr√≠cula */}\n              <TableCell className=\"font-medium border-r border-gray-100 py-3 md:py-4 text-sm\">\n                <span className=\"font-bold text-blue-600 text-lg tracking-wide\">\n                  {caseData.matricula || 'N/A'}\n                </span>\n              </TableCell>\n              \n              {/* Nome */}\n              <TableCell className=\"font-medium border-r border-gray-100 py-3 md:py-4 text-sm\">\n                <span className=\"font-semibold text-gray-900 text-base leading-tight\">\n                  {caseData.clientName}\n                </span>\n              </TableCell>\n              \n              {/* Descri√ß√£o do Processo */}\n              <TableCell className=\"border-r border-gray-100 py-3 md:py-4 max-w-xs hide-mobile\">\n                <div className=\"space-y-1\">\n                  <ProcessTagRenderer processo={caseData.description} />\n                </div>\n              </TableCell>\n              \n              {/* Prazo de Entrega */}\n              <TableCell className=\"border-r border-gray-100 py-3 md:py-4\">\n                <DeadlineAlert prazoEntrega={caseData.dueDate ? caseData.dueDate.toString() : null} status={caseData.status} />\n              </TableCell>\n              \n              {/* Data Audi√™ncia */}\n              <TableCell className=\"border-r border-gray-100 py-3 md:py-4 hide-mobile\">\n                <span className=\"text-sm text-gray-600\">\n                  {caseData.dataAudiencia ? new Date(caseData.dataAudiencia).toLocaleDateString('pt-BR') : (\n                    <span className=\"text-gray-400 italic\">N√£o definida</span>\n                  )}\n                </span>\n              </TableCell>\n              \n              {/* Observa√ß√£o */}\n              <TableCell className=\"border-r border-gray-100 py-3 md:py-4 max-w-xs hide-mobile\">\n                <div className=\"text-sm text-gray-600 leading-relaxed break-words max-w-[200px]\" title={caseData.observacoes || ''}>\n                  {caseData.observacoes || (\n                    <span className=\"text-gray-400 italic\">Sem observa√ß√µes</span>\n                  )}\n                </div>\n              </TableCell>\n              \n              {/* Status e Tempo de Conclus√£o */}\n              <TableCell className=\"border-r border-gray-100 py-3 md:py-4\">\n                <div className=\"space-y-2\">\n                  <div>{getStatusBadge(caseData)}</div>\n                  {caseData.status === 'concluido' && (caseData as any).tempoConclucaoTexto && (\n                    <div className=\"text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded-md inline-block\">\n                      ‚è±Ô∏è {(caseData as any).tempoConclucaoTexto}\n                    </div>\n                  )}\n                </div>\n              </TableCell>\n              \n              {/* A√ß√µes */}\n              <TableCell className=\"py-4 text-center\">\n                <div className=\"flex items-center justify-center gap-2\">\n                  {getUserPermissions(user).canEditAllCases && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => {\n                        setSelectedCase(caseData);\n                        setIsModalOpen(true);\n                      }}\n                      title=\"Editar processo\"\n                      className=\"h-8 w-8 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-all duration-200\"\n                    >\n                      <Edit className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                  {/* Bot√µes de a√ß√£o com confirma√ß√£o */}\n                  {caseData.status !== 'concluido' && canChangeStatus(user, caseData.status, 'concluido') && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => setConfirmDialog({\n                        open: true,\n                        caseData,\n                        newStatus: 'concluido'\n                      })}\n                      title=\"Marcar como conclu√≠do\"\n                      className=\"h-8 w-8 p-0 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-md transition-all duration-200\"\n                    >\n                      <CheckCircle className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                  {caseData.status === 'concluido' && canChangeStatus(user, caseData.status, 'andamento') && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => setConfirmDialog({\n                        open: true,\n                        caseData,\n                        newStatus: 'andamento'\n                      })}\n                      title=\"Reabrir processo\"\n                      className=\"h-8 w-8 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-all duration-200\"\n                    >\n                      <Clock className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                  {user?.role === 'admin' && (\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          title=\"Mais op√ß√µes de status\"\n                          className=\"h-8 w-8 p-0 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-md transition-all duration-200\"\n                        >\n                          <MoreVertical className=\"h-4 w-4\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent>\n                        {caseData.status !== 'novo' && (\n                          <DropdownMenuItem onClick={() => setConfirmDialog({\n                            open: true,\n                            caseData,\n                            newStatus: 'novo'\n                          })}>\n                            <AlertTriangle className=\"mr-2 h-4 w-4 text-yellow-600\" />\n                            Marcar como Novo\n                          </DropdownMenuItem>\n                        )}\n                        {caseData.status !== 'pendente' && (\n                          <DropdownMenuItem onClick={() => setConfirmDialog({\n                            open: true,\n                            caseData,\n                            newStatus: 'pendente'\n                          })}>\n                            <AlertTriangle className=\"mr-2 h-4 w-4 text-red-600\" />\n                            Marcar como Pendente\n                          </DropdownMenuItem>\n                        )}\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  )}\n                  {user?.role === 'admin' && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => {\n                        if (window.confirm(\"Tem certeza que deseja excluir este processo?\")) {\n                          deleteCaseMutation.mutate(caseData.id);\n                        }\n                      }}\n                      title=\"Excluir processo\"\n                      className=\"h-8 w-8 p-0 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-all duration-200\"\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  )}\n                </div>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </div>\n  );\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"w-6 h-6 border-3 border-blue-600 border-t-transparent rounded-full animate-spin\"></div>\n          <span className=\"text-gray-600\">Carregando processos...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-2 md:px-4 py-4 md:py-8 max-w-7xl min-h-screen\">\n      <div className=\"space-y-4 md:space-y-6 h-full flex flex-col\">\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl md:rounded-2xl p-4 md:p-6 text-white shadow-xl flex-shrink-0\">\n          <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n          <div>\n            <h1 className=\"text-xl md:text-3xl font-bold mb-1 md:mb-2\">Processos Jur√≠dicos dos Funcion√°rios</h1>\n            <p className=\"text-sm md:text-base text-blue-100\">\n              Sistema integrado para processos trabalhistas e jur√≠dicos da empresa\n            </p>\n          </div>\n          <div className=\"flex flex-col space-y-2 md:flex-row md:space-y-0 md:space-x-4 md:items-center\">\n            {user?.role === 'admin' && (\n              <Button \n                onClick={() => { setSelectedCase(null); setIsModalOpen(true); }}\n                className=\"bg-white text-blue-600 hover:bg-blue-50 font-medium w-full md:w-auto\"\n                size=\"sm\"\n              >\n                <Plus className=\"mr-2 h-4 w-4\" />\n                Novo Processo\n              </Button>\n            )}\n            <Button \n              variant=\"outline\" \n              className=\"border-white text-white hover:bg-white hover:text-blue-600 bg-blue-600 hover:bg-blue-50 w-full md:w-auto\"\n              size=\"sm\"\n              onClick={() => {\n                if (!cases || cases.length === 0) {\n                  toast({\n                    title: \"Nenhum dado para exportar\",\n                    description: \"N√£o h√° processos para exportar no momento.\",\n                    variant: \"destructive\",\n                  });\n                  return;\n                }\n                \n                // Exportar para CSV\n                const csvContent = cases.map((c: CaseWithRelations) => \n                  `\"${c.clientName || ''}\",\"${c.processNumber || ''}\",\"${c.description || ''}\",\"${c.status || ''}\",\"${c.dueDate ? new Date(c.dueDate).toLocaleDateString('pt-BR') : ''}\"`\n                ).join('\\n');\n                const blob = new Blob([`Nome,Processo,Descri√ß√£o,Status,Prazo\\n${csvContent}`], { type: 'text/csv;charset=utf-8;' });\n                const url = URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.href = url;\n                a.download = `processos_${new Date().toISOString().split('T')[0]}.csv`;\n                document.body.appendChild(a);\n                a.click();\n                document.body.removeChild(a);\n                URL.revokeObjectURL(url);\n                \n                toast({\n                  title: \"Exporta√ß√£o conclu√≠da\",\n                  description: `${cases.length} processos exportados com sucesso.`,\n                });\n              }}\n            >\n              <FileDown className=\"mr-2 h-4 w-4\" />\n              Exportar CSV\n            </Button>\n\n          </div>\n        </div>\n        </div>\n\n      {/* Filtros Avan√ßados */}\n      <Card className=\"shadow-lg flex-shrink-0\">\n        <CardHeader className=\"pb-3 md:pb-4\">\n          <CardTitle className=\"flex items-center text-gray-800 text-base md:text-lg\">\n            <Filter className=\"mr-2 h-4 w-4\" />\n            Filtros Avan√ßados de Busca\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-3 md:p-6\">\n          <div className=\"space-y-3 md:space-y-4\">\n            {/* Primeira linha de filtros */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4\">\n              <div>\n                <label className=\"text-xs md:text-sm font-medium text-gray-700 mb-1 md:mb-2 block\">Nome do Funcion√°rio</label>\n                <div className=\"flex gap-2\">\n                  <Input\n                    placeholder=\"Ex: Lucas Silva, Maria Santos...\"\n                    value={nomeFilter}\n                    onChange={(e) => setNomeFilter(e.target.value)}\n                    className=\"border-gray-300 flex-1 text-sm h-8\"\n                  />\n                  <EmployeeSearchModal\n                    onSelectEmployee={(employee) => {\n                      setMatriculaFilter(employee.codigo);\n                      setNomeFilter(employee.nomeCompleto);\n                    }}\n                    trigger={\n                      <Button variant=\"outline\" size=\"sm\" className=\"px-2 h-8\">\n                        <Users className=\"h-3 w-3 md:h-4 md:w-4\" />\n                      </Button>\n                    }\n                  />\n                </div>\n              </div>\n              <div>\n                <label className=\"text-xs md:text-sm font-medium text-gray-700 mb-1 md:mb-2 block\">Processo</label>\n                <Input\n                  placeholder=\"Ex: 1500258, 217584...\"\n                  value={matriculaFilter}\n                  onChange={(e) => setMatriculaFilter(e.target.value)}\n                  className=\"border-gray-300 text-sm h-8\"\n                />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Buscar Processo</label>\n                <Input\n                  placeholder=\"Ex: filia√ß√£o sindical, verbas...\"\n                  value={processoFilter}\n                  onChange={(e) => setProcessoFilter(e.target.value)}\n                  className=\"border-gray-300\"\n                />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Busca Geral</label>\n                <Input\n                  placeholder=\"Buscar por nome, processo...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"border-gray-300\"\n                />\n              </div>\n            </div>\n\n            {/* Segunda linha - Filtros de data */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 pt-3 md:pt-4 border-t border-gray-200\">\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Data de - In√≠cio</label>\n                <Input\n                  type=\"date\"\n                  value={dateFilter}\n                  onChange={(e) => setDateFilter(e.target.value)}\n                  className=\"border-gray-300\"\n                />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-2 block\">Data at√© - Final</label>\n                <Input\n                  type=\"date\"\n                  value={dateFilterTo}\n                  onChange={(e) => setDateFilterTo(e.target.value)}\n                  className=\"border-gray-300\"\n                />\n              </div>\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 mb-2 block\">A√ß√µes</label>\n                <Button \n                  variant=\"outline\" \n                  onClick={() => {\n                    setSearchTerm('');\n                    setDateFilter('');\n                    setDateFilterTo('');\n                    setMatriculaFilter('');\n                    setNomeFilter('');\n                    setProcessoFilter('');\n                  }}\n                  className=\"w-full\"\n                >\n                  Limpar Filtros\n                </Button>\n              </div>\n            </div>\n\n            {/* Terceira linha - Estat√≠sticas dos filtros */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200\">\n              <div className=\"bg-blue-50 p-3 rounded-lg text-center\">\n                <div className=\"text-lg font-bold text-blue-600\">{filteredCases.filter((c: CaseWithRelations) => c.status === 'novo').length}</div>\n                <div className=\"text-xs text-blue-600\">Novos</div>\n              </div>\n              <div className=\"bg-orange-50 p-3 rounded-lg text-center\">\n                <div className=\"text-lg font-bold text-orange-600\">{filteredCases.filter((c: CaseWithRelations) => c.status === 'pendente').length}</div>\n                <div className=\"text-xs text-orange-600\">Pendentes</div>\n              </div>\n              <div className=\"bg-red-50 p-3 rounded-lg text-center\">\n                <div className=\"text-lg font-bold text-red-600\">{overdueCases.length}</div>\n                <div className=\"text-xs text-red-600\">Atrasados</div>\n              </div>\n              <div className=\"bg-green-50 p-3 rounded-lg text-center\">\n                <div className=\"text-lg font-bold text-green-600\">{completedCases.length}</div>\n                <div className=\"text-xs text-green-600\">Conclu√≠dos</div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Tabs de Processos */}\n      <div className=\"flex-1 overflow-hidden\">\n        <Card className=\"shadow-lg h-full\">\n          <CardContent className=\"p-0 h-full\">\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full h-full flex flex-col\">\n            <div className=\"bg-gray-50 px-6 py-4 border-b flex-shrink-0\">\n              <TabsList className=\"grid w-full grid-cols-3 bg-white shadow-sm\">\n                <TabsTrigger \n                  value=\"pending\" \n                  className=\"flex items-center space-x-2 data-[state=active]:bg-orange-100 data-[state=active]:text-orange-800\"\n                >\n                  <Clock className=\"w-4 h-4\" />\n                  <span>Pendentes ({pendingCases.length})</span>\n                </TabsTrigger>\n                <TabsTrigger \n                  value=\"overdue\"\n                  className=\"flex items-center space-x-2 data-[state=active]:bg-red-100 data-[state=active]:text-red-800\"\n                >\n                  <AlertTriangle className=\"w-4 h-4\" />\n                  <span>Atrasados ({overdueCases.length})</span>\n                </TabsTrigger>\n                <TabsTrigger \n                  value=\"completed\"\n                  className=\"flex items-center space-x-2 data-[state=active]:bg-green-100 data-[state=active]:text-green-800\"\n                >\n                  <CheckCircle className=\"w-4 h-4\" />\n                  <span>Conclu√≠dos ({completedCases.length})</span>\n                </TabsTrigger>\n              </TabsList>\n            </div>\n\n            <TabsContent value=\"pending\" className=\"p-0 m-0 flex-1 overflow-hidden\">\n              {pendingCases.length > 0 ? (\n                renderCaseTable(pendingCases, true)\n              ) : (\n                <div className=\"p-12 text-center text-gray-500\">\n                  <CheckCircle className=\"mx-auto h-16 w-16 text-green-300 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Nenhum processo pendente</h3>\n                  <p>Todos os processos est√£o conclu√≠dos ou n√£o h√° processos cadastrados.</p>\n                </div>\n              )}\n            </TabsContent>\n\n            <TabsContent value=\"completed\" className=\"p-0 m-0 flex-1 overflow-hidden\">\n              {completedCases.length > 0 ? (\n                renderCaseTable(completedCases, false)\n              ) : (\n                <div className=\"p-12 text-center text-gray-500\">\n                  <Clock className=\"mx-auto h-16 w-16 text-gray-300 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Nenhum processo conclu√≠do</h3>\n                  <p>Ainda n√£o h√° processos finalizados no sistema.</p>\n                </div>\n              )}\n            </TabsContent>\n\n            <TabsContent value=\"overdue\" className=\"p-0 m-0 flex-1 overflow-hidden\">\n              {overdueCases.length > 0 ? (\n                renderCaseTable(overdueCases, true)\n              ) : (\n                <div className=\"p-12 text-center text-gray-500\">\n                  <Calendar className=\"mx-auto h-16 w-16 text-green-300 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Nenhum processo atrasado</h3>\n                  <p>Todos os prazos est√£o em dia. Excelente trabalho!</p>\n                </div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n        </Card>\n      </div>\n\n      {/* Modal */}\n      <NewCaseModal\n        isOpen={isModalOpen}\n        onClose={() => {\n          setIsModalOpen(false);\n          setSelectedCase(null);\n        }}\n        onSubmit={selectedCase ? handleUpdateCase : handleCreateCase}\n        isSubmitting={createCaseMutation.isPending || updateCaseMutation.isPending}\n        caseData={selectedCase}\n      />\n\n      <ConfirmStatusDialog\n        open={confirmDialog.open}\n        onOpenChange={(open) => setConfirmDialog({ ...confirmDialog, open })}\n        onConfirm={() => {\n          if (confirmDialog.caseData) {\n            updateStatusMutation.mutate({ \n              id: confirmDialog.caseData.id, \n              status: confirmDialog.newStatus \n            });\n            setConfirmDialog({ open: false, caseData: null, newStatus: '' });\n          }\n        }}\n        currentStatus={confirmDialog.caseData?.status || ''}\n        newStatus={confirmDialog.newStatus}\n        processNumber={confirmDialog.caseData?.processNumber || ''}\n        clientName={confirmDialog.caseData?.clientName || ''}\n      />\n      </div>\n    </div>\n  );\n}","size_bytes":36045},"client/src/pages/CasesOld.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport CaseModal from \"@/components/CaseModal\";\nimport { Plus, FileDown, Eye, Edit, Check, Trash2, UserPlus, Clock, Filter } from \"lucide-react\";\nimport type { CaseWithRelations } from \"@shared/schema\";\nimport ProcessTagRenderer from \"@/components/ProcessTagRenderer\";\nimport DeadlineAlert from \"@/components/DeadlineAlert\";\n\nexport default function Cases() {\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [dateFilter, setDateFilter] = useState(\"\");\n  const [matriculaFilter, setMatriculaFilter] = useState(\"\");\n  const [nomeFilter, setNomeFilter] = useState(\"\");\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedCase, setSelectedCase] = useState<CaseWithRelations | null>(null);\n  \n  const { user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: cases, isLoading } = useQuery({\n    queryKey: [\"/api/cases\", { status: statusFilter, search: searchTerm }],\n    queryFn: async ({ queryKey }) => {\n      const [, params] = queryKey as [string, { status: string; search: string }];\n      const searchParams = new URLSearchParams();\n      if (params.status && params.status !== 'all') searchParams.set('status', params.status);\n      if (params.search) searchParams.set('search', params.search);\n      \n      const response = await fetch(`/api/cases?${searchParams.toString()}`, {\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        if (response.status === 401) {\n          toast({\n            title: \"Unauthorized\",\n            description: \"You are logged out. Logging in again...\",\n            variant: \"destructive\",\n          });\n          setTimeout(() => {\n            window.location.href = \"/api/login\";\n          }, 500);\n          return [];\n        }\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      return response.json();\n    },\n  });\n\n  const createCaseMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"POST\", \"/api/cases\", data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Processo criado com sucesso\",\n      });\n      setIsModalOpen(false);\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao criar processo\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateCaseMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"PUT\", `/api/cases/${data.id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Processo atualizado com sucesso\",\n      });\n      setIsModalOpen(false);\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao atualizar processo\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      const response = await apiRequest(\"PATCH\", `/api/cases/${id}/status`, { status });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Status atualizado com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao atualizar status\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteCaseMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/cases/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Processo exclu√≠do com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao excluir processo\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCreateCase = (data: any) => {\n    createCaseMutation.mutate(data);\n  };\n\n  const handleUpdateCase = (data: any) => {\n    updateCaseMutation.mutate({ ...data, id: selectedCase?.id });\n  };\n\n  const getStatusBadge = (status: string) => {\n    const statusConfig = {\n      novo: { label: \"Novo\", variant: \"secondary\" as const, className: \"bg-yellow-100 text-yellow-800\" },\n      andamento: { label: \"Em Andamento\", variant: \"default\" as const, className: \"bg-blue-100 text-blue-800\" },\n      concluido: { label: \"Conclu√≠do\", variant: \"default\" as const, className: \"bg-green-100 text-green-800\" },\n      pendente: { label: \"Pendente\", variant: \"destructive\" as const, className: \"bg-red-100 text-red-800\" },\n    };\n    \n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.novo;\n    return (\n      <Badge variant={config.variant} className={config.className}>\n        {config.label}\n      </Badge>\n    );\n  };\n\n  const getRowClassName = (status: string) => {\n    const statusClasses = {\n      novo: \"bg-yellow-50/30 border-l-4 border-l-yellow-500\",\n      andamento: \"bg-blue-50/30 border-l-4 border-l-blue-500\",\n      concluido: \"bg-green-50/30 border-l-4 border-l-green-500\",\n      pendente: \"bg-red-50/30 border-l-4 border-l-red-500\",\n    };\n    return statusClasses[status as keyof typeof statusClasses] || \"\";\n  };\n\n  // Aplicar filtros localmente\n  const filteredCases = cases?.filter((caseData: CaseWithRelations) => {\n    const matchesMatricula = !matriculaFilter || caseData.matricula.toLowerCase().includes(matriculaFilter.toLowerCase());\n    const matchesNome = !nomeFilter || caseData.nome.toLowerCase().includes(nomeFilter.toLowerCase());\n    const matchesStatus = statusFilter === 'all' || caseData.status === statusFilter;\n    const matchesSearch = !searchTerm || caseData.processo.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesDate = !dateFilter || (caseData.prazoEntrega && new Date(caseData.prazoEntrega) <= new Date(dateFilter));\n    \n    return matchesMatricula && matchesNome && matchesStatus && matchesSearch && matchesDate;\n  }) || [];\n\n  if (isLoading) {\n    return <div className=\"flex items-center justify-center h-64\">Carregando...</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold tracking-tight\">Gerenciamento de Processos</h1>\n        <div className=\"flex items-center gap-4\">\n          <CaseModal\n            trigger={\n              <Button>\n                <Plus className=\"mr-2 h-4 w-4\" />\n                Novo Processo\n              </Button>\n            }\n            onSubmit={handleCreateCase}\n            isSubmitting={createCaseMutation.isPending}\n          />\n          <Button variant=\"outline\">\n            <FileDown className=\"mr-2 h-4 w-4\" />\n            Exportar\n          </Button>\n        </div>\n      </div>\n\n      {/* Filtros avan√ßados */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <Filter className=\"mr-2 h-4 w-4\" />\n            Filtros\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Matr√≠cula</label>\n              <Input\n                placeholder=\"Filtrar por matr√≠cula\"\n                value={matriculaFilter}\n                onChange={(e) => setMatriculaFilter(e.target.value)}\n              />\n            </div>\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Nome</label>\n              <Input\n                placeholder=\"Filtrar por nome\"\n                value={nomeFilter}\n                onChange={(e) => setNomeFilter(e.target.value)}\n              />\n            </div>\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Status</label>\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Todos os status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todos os status</SelectItem>\n                  <SelectItem value=\"novo\">Novo</SelectItem>\n                  <SelectItem value=\"andamento\">Em Andamento</SelectItem>\n                  <SelectItem value=\"concluido\">Conclu√≠do</SelectItem>\n                  <SelectItem value=\"pendente\">Pendente</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Prazo at√©</label>\n              <Input\n                type=\"date\"\n                value={dateFilter}\n                onChange={(e) => setDateFilter(e.target.value)}\n              />\n            </div>\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Processo</label>\n              <Input\n                placeholder=\"Buscar em processos\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Processos Pendentes */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <Clock className=\"mr-2 h-5 w-5 text-orange-600\" />\n            Processos Pendentes ({filteredCases.filter(c => c.status !== 'concluido').length})\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader className=\"bg-gray-50/80\">\n                <TableRow className=\"border-b-2 border-gray-200\">\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Matr√≠cula</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Nome</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Processo</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Prazo de Entrega</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Audi√™ncia</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Status</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700\">A√ß√µes</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredCases.filter(c => c.status !== 'concluido').map((caseData: CaseWithRelations) => (\n                  <TableRow key={caseData.id} className={`${getRowClassName(caseData.status)} hover:bg-gray-50/50 border-b border-gray-100 transition-colors`}>\n                    <TableCell className=\"font-medium border-r border-gray-100 py-4\">{caseData.matricula}</TableCell>\n                    <TableCell className=\"font-medium border-r border-gray-100 py-4\">{caseData.nome}</TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4 max-w-xs\">\n                      <ProcessTagRenderer processo={caseData.processo} />\n                    </TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">\n                      <DeadlineAlert prazoEntrega={caseData.prazoEntrega} status={caseData.status} />\n                    </TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">\n                      {caseData.audiencia ? new Date(caseData.audiencia).toLocaleDateString('pt-BR') : '-'}\n                    </TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">{getStatusBadge(caseData.status)}</TableCell>\n                    <TableCell className=\"py-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => {\n                            setSelectedCase(caseData);\n                            setIsModalOpen(true);\n                          }}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => updateStatusMutation.mutate({ id: caseData.id, status: 'concluido' })}\n                        >\n                          <Check className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => {\n                            if (window.confirm(\"Tem certeza que deseja excluir este processo?\")) {\n                              deleteCaseMutation.mutate(caseData.id);\n                            }\n                          }}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Processos Conclu√≠dos */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center\">\n            <Check className=\"mr-2 h-5 w-5 text-green-600\" />\n            Processos Conclu√≠dos ({filteredCases.filter(c => c.status === 'concluido').length})\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader className=\"bg-gray-50/80\">\n                <TableRow className=\"border-b-2 border-gray-200\">\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Matr√≠cula</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Nome</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Processo</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Prazo de Entrega</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Audi√™ncia</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Status</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700\">A√ß√µes</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredCases.filter(c => c.status === 'concluido').map((caseData: CaseWithRelations) => (\n                  <TableRow key={caseData.id} className={`${getRowClassName(caseData.status)} hover:bg-gray-50/50 border-b border-gray-100 transition-colors`}>\n                    <TableCell className=\"font-medium border-r border-gray-100 py-4\">{caseData.matricula}</TableCell>\n                    <TableCell className=\"font-medium border-r border-gray-100 py-4\">{caseData.nome}</TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4 max-w-xs\">\n                      <ProcessTagRenderer processo={caseData.processo} />\n                    </TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">\n                      <DeadlineAlert prazoEntrega={caseData.prazoEntrega} status={caseData.status} />\n                    </TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">\n                      {caseData.audiencia ? new Date(caseData.audiencia).toLocaleDateString('pt-BR') : '-'}\n                    </TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">{getStatusBadge(caseData.status)}</TableCell>\n                    <TableCell className=\"py-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => {\n                            setSelectedCase(caseData);\n                            setIsModalOpen(true);\n                          }}\n                        >\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => {\n                            if (window.confirm(\"Tem certeza que deseja excluir este processo?\")) {\n                              deleteCaseMutation.mutate(caseData.id);\n                            }\n                          }}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Modal */}\n      <CaseModal\n        trigger={<div />}\n        caseData={selectedCase}\n        onSubmit={selectedCase ? handleUpdateCase : handleCreateCase}\n        isSubmitting={createCaseMutation.isPending || updateCaseMutation.isPending}\n      />\n    </div>\n  );\n}","size_bytes":19945},"client/src/pages/Dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  FileText, \n  Clock, \n  CheckCircle, \n  AlertTriangle, \n  TrendingUp, \n  Calendar,\n  Users,\n  BarChart3,\n  Activity\n} from \"lucide-react\";\nimport type { CaseWithRelations } from \"@shared/schema\";\nimport ProcessTypeChart from \"@/components/ProcessTypeChart\";\n\ninterface DashboardStats {\n  total: number;\n  novos: number;\n  pendentes: number;\n  concluidos: number;\n  atrasados: number;\n  averageResponseTime: number;\n}\n\nexport default function Dashboard() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  // Data queries\n  const { data: stats, isLoading: statsLoading } = useQuery({\n    queryKey: [\"/api/dashboard/stats\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/dashboard/stats\", { credentials: 'include' });\n      if (!response.ok) {\n        if (response.status === 401) {\n          toast({\n            title: \"Sess√£o expirada\",\n            description: \"Fa√ßa login novamente para continuar.\",\n            variant: \"destructive\",\n          });\n          return null;\n        }\n        throw new Error('Failed to fetch stats');\n      }\n      return response.json() as Promise<DashboardStats>;\n    },\n    refetchInterval: 300000, // 5 minutes\n  });\n\n  const { data: allCases } = useQuery({\n    queryKey: [\"/api/cases\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/cases\", { credentials: 'include' });\n      if (!response.ok) throw new Error('Failed to fetch cases');\n      return response.json() as Promise<CaseWithRelations[]>;\n    },\n    refetchInterval: 120000, // 2 minutes\n  });\n\n  const { data: recentActivity } = useQuery({\n    queryKey: [\"/api/activity-logs\", { limit: 5, processOnly: true }],\n    queryFn: async () => {\n      const response = await fetch(\"/api/activity-logs?limit=5&processOnly=true\", { credentials: 'include' });\n      if (!response.ok) throw new Error('Failed to fetch activity logs');\n      return response.json();\n    },\n    refetchInterval: 60000, // 1 minute\n  });\n\n  // Helper function to get status badge\n  const getStatusBadge = (status: string) => {\n    const statusConfig = {\n      'novo': { variant: 'default' as const, label: 'Novo' },\n      'andamento': { variant: 'secondary' as const, label: 'Em Andamento' },\n      'pendente': { variant: 'outline' as const, label: 'Pendente' },\n      'concluido': { variant: 'default' as const, label: 'Conclu√≠do' },\n      'atrasado': { variant: 'destructive' as const, label: 'Atrasado' }\n    };\n\n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.novo;\n    \n    return (\n      <Badge variant={config.variant} className={\n        status === 'concluido' ? 'bg-green-100 text-green-800 border-green-200' :\n        status === 'atrasado' ? 'bg-red-100 text-red-800 border-red-200' :\n        status === 'pendente' ? 'bg-yellow-100 text-yellow-800 border-yellow-200' :\n        status === 'andamento' ? 'bg-blue-100 text-blue-800 border-blue-200' :\n        'bg-gray-100 text-gray-800 border-gray-200'\n      }>\n        {config.label}\n      </Badge>\n    );\n  };\n\n  // Get urgent cases (deadline within 3 days or overdue) - usando dados reais dos casos\n  const getUrgentCases = () => {\n    if (!allCases) return [];\n    \n    const today = new Date();\n    console.log('üîç DEBUG URGENT CASES - Total cases:', allCases.length);\n    \n    const urgentFiltered = allCases.filter(caseData => {\n      if (!caseData.dueDate) {\n        console.log('‚ùå Case sem dueDate:', caseData.id, caseData.clientName);\n        return false;\n      }\n      \n      // Excluir casos conclu√≠dos dos casos urgentes\n      if (caseData.status === 'concluido') {\n        console.log('‚úÖ Case conclu√≠do (exclu√≠do):', caseData.id, caseData.clientName);\n        return false;\n      }\n      \n      const deadline = new Date(caseData.dueDate);\n      const daysDiff = Math.ceil((deadline.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n      \n      const isUrgent = daysDiff <= 3;\n      console.log(`üìÖ Case ${caseData.id} (${caseData.clientName}): dueDate=${caseData.dueDate}, daysDiff=${daysDiff}, status=${caseData.status}, isUrgent=${isUrgent}`);\n      \n      return isUrgent; // Within 3 days or overdue\n    }).sort((a, b) => {\n      const deadlineA = new Date(a.dueDate!).getTime();\n      const deadlineB = new Date(b.dueDate!).getTime();\n      return deadlineA - deadlineB; // Most urgent first\n    });\n    \n    console.log('‚úÖ DEBUG URGENT CASES - Filtered count:', urgentFiltered.length);\n    return urgentFiltered;\n  };\n\n  const urgentCases = getUrgentCases();\n  \n  // Calculate completion rate\n  const completionRate = stats?.total ? Math.round((stats.concluidos / stats.total) * 100) : 0;\n\n  if (statsLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-8 text-white shadow-xl\">\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between\">\n          <div className=\"space-y-2\">\n            <h1 className=\"text-3xl font-bold\">\n              Bem-vindo, {user?.firstName}!\n            </h1>\n            <p className=\"text-blue-100 text-lg\">\n              Vis√£o geral do sistema jur√≠dico - {new Date().toLocaleDateString('pt-BR', { \n                weekday: 'long', \n                year: 'numeric', \n                month: 'long', \n                day: 'numeric' \n              })}\n            </p>\n          </div>\n          <div className=\"mt-4 md:mt-0\">\n            <div className=\"flex items-center space-x-2 bg-white/10 rounded-lg px-4 py-2\">\n              <Users className=\"w-5 h-5\" />\n              <span className=\"text-sm font-medium capitalize\">{user?.role}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Cards - Ordem: NOVOS, PENDENTES, ATRASADOS, CONCLU√çDOS */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 shadow-lg hover:shadow-xl transition-shadow\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-3\">\n            <CardTitle className=\"text-sm font-semibold text-blue-700\">Novos</CardTitle>\n            <div className=\"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center\">\n              <FileText className=\"h-5 w-5 text-white\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold text-blue-900\">{stats?.novos || 0}</div>\n            <p className=\"text-xs text-blue-600 mt-1\">\n              Novos\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200 shadow-lg hover:shadow-xl transition-shadow\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-3\">\n            <CardTitle className=\"text-sm font-semibold text-yellow-700\">Pendentes</CardTitle>\n            <div className=\"w-10 h-10 bg-yellow-500 rounded-lg flex items-center justify-center\">\n              <Clock className=\"h-5 w-5 text-white\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold text-yellow-900\">{stats?.pendentes || 0}</div>\n            <p className=\"text-xs text-yellow-600 mt-1\">\n              Pendentes\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-red-50 to-red-100 border-red-200 shadow-lg hover:shadow-xl transition-shadow\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-3\">\n            <CardTitle className=\"text-sm font-semibold text-red-700\">Atrasados</CardTitle>\n            <div className=\"w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center\">\n              <AlertTriangle className=\"h-5 w-5 text-white\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold text-red-900\">{stats?.atrasados || 0}</div>\n            <p className=\"text-xs text-red-600 mt-1\">\n              Atrasados\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-green-50 to-green-100 border-green-200 shadow-lg hover:shadow-xl transition-shadow\">\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-3\">\n            <CardTitle className=\"text-sm font-semibold text-green-700\">Conclu√≠dos</CardTitle>\n            <div className=\"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center\">\n              <CheckCircle className=\"h-5 w-5 text-white\" />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold text-green-900\">{stats?.concluidos || 0}</div>\n            <p className=\"text-xs text-green-600 mt-1\">\n              Conclu√≠dos\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Activity Log & Recent Updates */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Recent Activity */}\n        <Card className=\"shadow-lg\">\n          <CardHeader className=\"bg-blue-50 rounded-t-lg\">\n            <CardTitle className=\"flex items-center text-blue-800\">\n              <Activity className=\"mr-2 h-5 w-5 text-blue-600\" />\n              Atividades Recentes\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-0\">\n            <div className=\"divide-y divide-gray-100\">\n              {recentActivity && recentActivity.length > 0 ? (\n                recentActivity.slice(0, 5).map((activity: any) => (\n                  <div key={activity.id} className=\"p-4 hover:bg-blue-50 transition-colors\">\n                    <div className=\"flex items-start space-x-3\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                          <Activity className=\"w-4 h-4 text-blue-600\" />\n                        </div>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm text-gray-900\">\n                          <span className=\"font-medium\">{activity.user?.firstName || 'Usu√°rio'}</span>\n                          {' '}{activity.action.toLowerCase().includes('create') ? 'criou' : \n                               activity.action.toLowerCase().includes('update') ? 'atualizou' :\n                               activity.action.toLowerCase().includes('delete') ? 'excluiu' : 'modificou'}\n                          {' '}um processo\n                        </p>\n                        <p className=\"text-xs text-gray-500 mt-1\">\n                          {new Date(activity.createdAt).toLocaleString('pt-BR')}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              ) : (\n                <div className=\"p-8 text-center text-gray-500\">\n                  <Activity className=\"mx-auto h-12 w-12 text-gray-300 mb-4\" />\n                  <p>Nenhuma atividade recente</p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Recent Process Updates */}\n        <Card className=\"shadow-lg\">\n          <CardHeader className=\"bg-green-50 rounded-t-lg\">\n            <CardTitle className=\"flex items-center text-green-800\">\n              <FileText className=\"mr-2 h-5 w-5 text-green-600\" />\n              √öltimas Atualiza√ß√µes\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-0\">\n            <div className=\"divide-y divide-gray-100\">\n              {allCases && allCases.length > 0 ? (\n                allCases.slice(0, 5).map((caseData: CaseWithRelations) => (\n                  <div key={caseData.id} className=\"p-4 hover:bg-green-50 transition-colors\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"flex-1\">\n                            <p className=\"text-sm font-semibold text-gray-900 truncate\">\n                              {caseData.clientName}\n                            </p>\n                            <p className=\"text-xs text-gray-500 mt-1\">\n                              Matr√≠cula: {(caseData as any).matricula} ‚Ä¢ Processo: {caseData.processNumber}\n                            </p>\n                            <p className=\"text-xs text-gray-400 mt-1\">\n                              Atualizado: {new Date(caseData.updatedAt || caseData.createdAt).toLocaleDateString('pt-BR')}\n                            </p>\n                          </div>\n                          <div className=\"flex-shrink-0\">\n                            {getStatusBadge(caseData.status)}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              ) : (\n                <div className=\"p-8 text-center text-gray-500\">\n                  <FileText className=\"mx-auto h-12 w-12 text-gray-300 mb-4\" />\n                  <p>Nenhuma atualiza√ß√£o recente</p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Urgent Cases */}\n      <Card className=\"shadow-lg\">\n        <CardHeader className=\"bg-red-50 rounded-t-lg\">\n          <CardTitle className=\"flex items-center text-red-800\">\n            <AlertTriangle className=\"mr-2 h-5 w-5 text-red-600\" />\n            Processos Urgentes\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <div className=\"divide-y divide-gray-100\">\n            {urgentCases.length > 0 ? (\n              urgentCases.map((caseData) => {\n                const deadline = new Date(caseData.dueDate!);\n                const today = new Date();\n                const daysDiff = Math.ceil((deadline.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n                \n                return (\n                  <div key={caseData.id} className=\"p-4 hover:bg-red-50 transition-colors\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm font-semibold text-gray-900 truncate\">\n                          {caseData.clientName}\n                        </p>\n                        <div className=\"flex items-center space-x-2 mt-1\">\n                          <Calendar className=\"w-3 h-3 text-red-500\" />\n                          <p className=\"text-xs text-red-600\">\n                            {daysDiff <= 0 ? 'Vencido' : `${daysDiff} dia${daysDiff > 1 ? 's' : ''} restante${daysDiff > 1 ? 's' : ''}`}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"flex-shrink-0\">\n                        <Badge className=\"bg-red-100 text-red-800 border-red-200\">\n                          {deadline.toLocaleDateString('pt-BR')}\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })\n            ) : (\n              <div className=\"p-8 text-center text-gray-500\">\n                <CheckCircle className=\"mx-auto h-12 w-12 text-green-300 mb-4\" />\n                <p>Nenhum processo urgente</p>\n                <p className=\"text-xs text-gray-400 mt-1\">Todos os prazos est√£o em dia</p>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Gr√°fico de Tipos de Processos */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <ProcessTypeChart cases={allCases || []} />\n        \n        {/* Performance Summary */}\n        <Card className=\"shadow-lg\">\n          <CardHeader className=\"bg-blue-50 rounded-t-lg\">\n            <CardTitle className=\"flex items-center text-blue-800\">\n              <BarChart3 className=\"mr-2 h-5 w-5 text-blue-600\" />\n              Resumo de Performance\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-blue-600\">{completionRate}%</div>\n                <p className=\"text-sm text-gray-600 mt-1\">Taxa de Conclus√£o</p>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-green-600\">{stats?.averageResponseTime || 0}</div>\n                <p className=\"text-sm text-gray-600 mt-1\">Tempo M√©dio (dias)</p>\n              </div>\n            </div>\n            \n            {/* Tipos mais comuns */}\n            <div className=\"mt-6 pt-4 border-t border-gray-200\">\n              <h4 className=\"text-sm font-semibold text-gray-700 mb-3\">Tipos Mais Recorrentes</h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"w-3 h-3 bg-red-500 rounded-full\"></div>\n                    <span>Trabalhista</span>\n                  </div>\n                  <span className=\"font-medium\">{allCases?.filter((c: any) => c.tipoProcesso === 'Trabalhista').length || 0}</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"w-3 h-3 bg-orange-500 rounded-full\"></div>\n                    <span>Rescis√£o Indireta</span>\n                  </div>\n                  <span className=\"font-medium\">{allCases?.filter((c: any) => c.tipoProcesso === 'Rescis√£o Indireta').length || 0}</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"w-3 h-3 bg-purple-500 rounded-full\"></div>\n                    <span>Dano Moral</span>\n                  </div>\n                  <span className=\"font-medium\">{allCases?.filter((c: any) => c.tipoProcesso === 'Dano Moral').length || 0}</span>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":19177},"client/src/pages/DashboardOld.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowUp, ArrowDown, FileText, CheckCircle, Clock, Timer, TrendingUp, Users, AlertTriangle } from \"lucide-react\";\n\nexport default function Dashboard() {\n  const { data: stats, isLoading: statsLoading } = useQuery({\n    queryKey: [\"/api/dashboard/stats\"],\n  });\n\n  const { data: recentLogs, isLoading: logsLoading } = useQuery({\n    queryKey: [\"/api/activity-logs\"],\n  });\n\n  const { data: cases, isLoading: casesLoading } = useQuery({\n    queryKey: [\"/api/cases\"],\n  });\n\n  if (statsLoading || logsLoading || casesLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {[1, 2, 3, 4].map((i) => (\n            <Card key={i}>\n              <CardContent className=\"p-6\">\n                <Skeleton className=\"h-4 w-32 mb-2\" />\n                <Skeleton className=\"h-8 w-16 mb-4\" />\n                <Skeleton className=\"h-4 w-24\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <Skeleton className=\"h-64\" />\n          <Skeleton className=\"h-64\" />\n        </div>\n      </div>\n    );\n  }\n\n  const statCards = [\n    {\n      title: \"Total de Processos\",\n      value: stats?.total || \"0\",\n      icon: FileText,\n      color: \"bg-blue-500\",\n      trend: \"+12%\",\n      trendUp: true,\n    },\n    {\n      title: \"Processos Conclu√≠dos\",\n      value: stats?.completed || \"0\",\n      icon: CheckCircle,\n      color: \"bg-green-500\",\n      trend: \"+8%\",\n      trendUp: true,\n    },\n    {\n      title: \"Em Andamento\",\n      value: stats?.inProgress || \"0\",\n      icon: Clock,\n      color: \"bg-yellow-500\",\n      trend: \"+3%\",\n      trendUp: true,\n    },\n    {\n      title: \"Tempo M√©dio\",\n      value: `${stats?.averageResponseTime || 0}d`,\n      icon: Timer,\n      color: \"bg-purple-500\",\n      trend: \"-2d\",\n      trendUp: false,\n    },\n  ];\n\n  const recentCases = cases?.slice(0, 5) || [];\n  const urgentCases = cases?.filter((c: any) => {\n    if (c.dueDate) {\n      const dueDate = new Date(c.dueDate);\n      const today = new Date();\n      const diffTime = dueDate.getTime() - today.getTime();\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      return diffDays <= 7 && diffDays >= 0;\n    }\n    return false;\n  }) || [];\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'novo': return 'bg-blue-100 text-blue-800';\n      case 'andamento': return 'bg-yellow-100 text-yellow-800';\n      case 'concluido': return 'bg-green-100 text-green-800';\n      case 'pendente': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"border-b border-gray-200 pb-6\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Dashboard Executivo</h1>\n        <p className=\"text-gray-600\">Vis√£o geral dos processos jur√≠dicos e m√©tricas de desempenho</p>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {statCards.map((stat, index) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={index} className=\"relative overflow-hidden\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-600 mb-1\">{stat.title}</p>\n                    <p className=\"text-3xl font-bold text-gray-900\">{stat.value}</p>\n                    <div className=\"flex items-center mt-2\">\n                      {stat.trendUp ? (\n                        <ArrowUp className=\"w-4 h-4 text-green-500 mr-1\" />\n                      ) : (\n                        <ArrowDown className=\"w-4 h-4 text-red-500 mr-1\" />\n                      )}\n                      <span className={`text-sm font-medium ${stat.trendUp ? 'text-green-600' : 'text-red-600'}`}>\n                        {stat.trend}\n                      </span>\n                      <span className=\"text-sm text-gray-500 ml-1\">vs m√™s anterior</span>\n                    </div>\n                  </div>\n                  <div className={`w-12 h-12 ${stat.color} rounded-lg flex items-center justify-center`}>\n                    <Icon className=\"w-6 h-6 text-white\" />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {/* Charts and Recent Activity */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Processos Urgentes */}\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between\">\n            <CardTitle className=\"text-lg font-semibold flex items-center\">\n              <AlertTriangle className=\"w-5 h-5 text-orange-500 mr-2\" />\n              Processos Urgentes\n            </CardTitle>\n            <Badge variant=\"destructive\">{urgentCases.length}</Badge>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {urgentCases.length > 0 ? urgentCases.map((caseItem: any) => {\n                const dueDate = new Date(caseItem.dueDate);\n                const today = new Date();\n                const diffTime = dueDate.getTime() - today.getTime();\n                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n                \n                return (\n                  <div key={caseItem.id} className=\"flex items-center justify-between p-3 bg-orange-50 rounded-lg border border-orange-200\">\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-medium text-gray-900\">{caseItem.clientName}</h4>\n                      <p className=\"text-sm text-gray-600 truncate\">{caseItem.description}</p>\n                    </div>\n                    <div className=\"text-right\">\n                      <Badge className={`${diffDays <= 2 ? 'bg-red-100 text-red-800' : 'bg-orange-100 text-orange-800'}`}>\n                        {diffDays === 0 ? 'Hoje' : diffDays === 1 ? 'Amanh√£' : `${diffDays}d`}\n                      </Badge>\n                    </div>\n                  </div>\n                );\n              }) : (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <AlertTriangle className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n                  <p>Nenhum processo urgente no momento</p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Atividade Recente */}\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between\">\n            <CardTitle className=\"text-lg font-semibold flex items-center\">\n              <TrendingUp className=\"w-5 h-5 text-blue-500 mr-2\" />\n              Atividade Recente\n            </CardTitle>\n            <Button variant=\"outline\" size=\"sm\">Ver Todas</Button>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {recentLogs && recentLogs.length > 0 ? recentLogs.slice(0, 5).map((log: any, index: number) => (\n                <div key={index} className=\"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors\">\n                  <div className=\"w-2 h-2 bg-blue-500 rounded-full mt-2\"></div>\n                  <div className=\"flex-1\">\n                    <p className=\"text-sm text-gray-900\">{log.description}</p>\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      {log.user?.firstName} {log.user?.lastName} ‚Ä¢ {new Date(log.createdAt).toLocaleString('pt-BR')}\n                    </p>\n                  </div>\n                </div>\n              )) : (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <TrendingUp className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n                  <p>Nenhuma atividade recente</p>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Processos Recentes */}\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <CardTitle className=\"text-lg font-semibold flex items-center\">\n            <FileText className=\"w-5 h-5 text-green-500 mr-2\" />\n            Processos Recentes\n          </CardTitle>\n          <Button variant=\"outline\" size=\"sm\">Ver Todos</Button>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {recentCases.length > 0 ? recentCases.map((caseItem: any) => (\n              <div key={caseItem.id} className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-3\">\n                    <h4 className=\"font-medium text-gray-900\">{caseItem.clientName}</h4>\n                    <Badge className={getStatusColor(caseItem.status)}>\n                      {caseItem.status === 'novo' && 'Novo'}\n                      {caseItem.status === 'andamento' && 'Em Andamento'}\n                      {caseItem.status === 'concluido' && 'Conclu√≠do'}\n                      {caseItem.status === 'pendente' && 'Pendente'}\n                    </Badge>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1\">{caseItem.description}</p>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Criado em {new Date(caseItem.createdAt).toLocaleDateString('pt-BR')}\n                  </p>\n                </div>\n                <Button variant=\"ghost\" size=\"sm\">\n                  Ver Detalhes\n                </Button>\n              </div>\n            )) : (\n              <div className=\"text-center py-8 text-gray-500\">\n                <FileText className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n                <p>Nenhum processo encontrado</p>\n                <Button className=\"mt-4\" variant=\"outline\">\n                  Criar Primeiro Processo\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":10540},"client/src/pages/Employees.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { toast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { \n  Search, \n  Filter,\n  Upload, \n  User,\n  Plus,\n  Edit,\n  Trash2,\n  Download,\n  X,\n  ChevronDown,\n  ChevronUp,\n  Users\n} from \"lucide-react\";\nimport type { Employee } from \"@shared/schema\";\n\nexport default function Employees() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [showFilters, setShowFilters] = useState(false);\n  const [filters, setFilters] = useState({\n    nome: \"\",\n    matricula: \"\",\n    cargo: \"\",\n    departamento: \"\",\n    empresa: \"all\"\n  });\n  \n  // Pagination state\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(10);\n  const [formData, setFormData] = useState({\n    empresa: \"2\",\n    nome: \"\",\n    matricula: \"\",\n    rg: \"\",\n    pis: \"\",\n    dataAdmissao: \"\",\n    dataDemissao: \"\",\n    salario: \"\",\n    cargo: \"\",\n    centroCusto: \"\",\n    departamento: \"\",\n    status: \"ativo\",\n    email: \"\",\n    telefone: \"\",\n    endereco: \"\"\n  });\n\n  // Company options\n  const companyOptions = [\n    { value: \"2\", label: \"2\" },\n    { value: \"33\", label: \"33\" },\n    { value: \"55\", label: \"55\" },\n    { value: \"79\", label: \"79\" },\n    { value: \"104\", label: \"104\" },\n    { value: \"107\", label: \"107\" },\n    { value: \"123\", label: \"123\" },\n    { value: \"125\", label: \"125\" },\n    { value: \"126\", label: \"126\" },\n    { value: \"127\", label: \"127\" },\n    { value: \"128\", label: \"128\" },\n    { value: \"150\", label: \"150\" }\n  ];\n\n\n\n  const { data: allEmployees, isLoading } = useQuery({\n    queryKey: [\"/api/employees\"],\n    queryFn: async () => {\n      const response = await fetch(`/api/employees`, {\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      return response.json() as Promise<Employee[]>;\n    },\n  });\n\n  // Filtros funcionais melhorados - excluir deletados\n  const filteredEmployees = useMemo(() => {\n    if (!allEmployees) return [];\n    \n    console.log('üîç FILTROS DEBUG:', {\n      total: allEmployees.length,\n      searchTerm,\n      filters,\n      firstEmployee: allEmployees[0]\n    });\n    \n    const filtered = allEmployees.filter(emp => {\n      // N√£o mostrar funcion√°rios deletados\n      if (emp.status === 'deletado') return false;\n      \n      // Busca geral (deve ser mais flex√≠vel e incluir mais campos)\n      const matchesSearch = !searchTerm || \n        emp.nome?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        emp.matricula?.toString().toLowerCase().includes(searchTerm.toLowerCase()) ||\n        emp.rg?.toString().toLowerCase().includes(searchTerm.toLowerCase()) ||\n        emp.pis?.toString().toLowerCase().includes(searchTerm.toLowerCase()) ||\n        emp.cargo?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        emp.departamento?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        emp.empresa?.toString().toLowerCase().includes(searchTerm.toLowerCase()) ||\n        emp.centroCusto?.toString().toLowerCase().includes(searchTerm.toLowerCase());\n        \n      // Filtros espec√≠ficos\n      const matchesFilters = \n        (!filters.nome || emp.nome?.toLowerCase().includes(filters.nome.toLowerCase())) &&\n        (!filters.matricula || emp.matricula?.toString().toLowerCase().includes(filters.matricula.toLowerCase())) &&\n        (!filters.cargo || emp.cargo?.toLowerCase().includes(filters.cargo.toLowerCase())) &&\n        (!filters.departamento || emp.departamento?.toLowerCase().includes(filters.departamento.toLowerCase())) &&\n        (!filters.empresa || filters.empresa === \"all\" || emp.empresa?.toString() === filters.empresa);\n        \n      const result = matchesSearch && matchesFilters;\n      \n      if (searchTerm && result) {\n        console.log('‚úÖ MATCH:', emp.nome, emp.matricula);\n      }\n      \n      return result;\n    });\n    \n    console.log('üìä FILTROS RESULTADO:', filtered.length, 'de', allEmployees.length);\n    return filtered;\n  }, [allEmployees, searchTerm, filters]);\n\n  // Pagination logic\n  const totalPages = Math.ceil(filteredEmployees.length / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const employees = filteredEmployees.slice(startIndex, endIndex);\n\n  // Reset pagination when filters change\n  const resetPagination = () => {\n    setCurrentPage(1);\n  };\n\n  // Importar planilha\n  const importMutation = useMutation({\n    mutationFn: async (file: File) => {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      const response = await fetch('/api/employees/import', {\n        method: 'POST',\n        body: formData,\n        credentials: 'include'\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Erro HTTP: ${response.status}`);\n      }\n      \n      return response.json();\n    },\n    onSuccess: (result) => {\n      toast({\n        title: \"Importa√ß√£o conclu√≠da\",\n        description: `${result.imported} funcion√°rios importados com ${result.errors?.length || 0} erros`,\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/employees\"] });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro na importa√ß√£o\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Criar funcion√°rio\n  const createEmployeeMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest('POST', '/api/employees', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Funcion√°rio criado\", description: \"Funcion√°rio adicionado com sucesso!\" });\n      queryClient.invalidateQueries({ queryKey: [\"/api/employees\"] });\n      setIsCreateModalOpen(false);\n      resetForm();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Erro\", description: error.message, variant: \"destructive\" });\n    }\n  });\n\n  // Atualizar funcion√°rio\n  const updateEmployeeMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const response = await apiRequest('PUT', `/api/employees/${id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Funcion√°rio atualizado\", description: \"Dados salvos com sucesso!\" });\n      queryClient.invalidateQueries({ queryKey: [\"/api/employees\"] });\n      setIsEditModalOpen(false);\n      resetForm();\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Erro\", description: error.message, variant: \"destructive\" });\n    }\n  });\n\n  // Deletar funcion√°rio\n  const deleteEmployeeMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiRequest('DELETE', `/api/employees/${id}`);\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({ title: \"Funcion√°rio exclu√≠do\", description: \"Funcion√°rio removido com sucesso!\" });\n      queryClient.invalidateQueries({ queryKey: [\"/api/employees\"] });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Erro\", description: error.message, variant: \"destructive\" });\n    }\n  });\n\n  // Fun√ß√µes auxiliares\n  const resetForm = () => {\n    setFormData({\n      empresa: \"2\",\n      nome: \"\",\n      matricula: \"\",\n      rg: \"\",\n      pis: \"\",\n      dataAdmissao: \"\",\n      dataDemissao: \"\",\n      salario: \"\",\n      cargo: \"\",\n      centroCusto: \"\",\n      departamento: \"\",\n      status: \"ativo\",\n      email: \"\",\n      telefone: \"\",\n      endereco: \"\"\n    });\n  };\n\n  const openEditModal = (employee: Employee) => {\n    setSelectedEmployee(employee);\n    setFormData({\n      empresa: employee.empresa || \"2\",\n      nome: employee.nome || \"\",\n      matricula: employee.matricula || \"\",\n      rg: employee.rg || \"\",\n      pis: employee.pis || \"\",\n      dataAdmissao: employee.dataAdmissao || \"\",\n      dataDemissao: employee.dataDemissao || \"\",\n      salario: employee.salario || \"\",\n      cargo: employee.cargo || \"\",\n      centroCusto: employee.centroCusto || \"\",\n      departamento: employee.departamento || \"\",\n      status: employee.status || \"ativo\",\n      email: employee.email || \"\",\n      telefone: employee.telefone || \"\",\n      endereco: employee.endereco || \"\"\n    });\n    setIsEditModalOpen(true);\n  };\n\n  const handleSubmit = () => {\n    if (selectedEmployee) {\n      updateEmployeeMutation.mutate({ id: selectedEmployee.id, data: formData });\n    } else {\n      createEmployeeMutation.mutate(formData);\n    }\n  };\n\n  const clearFilters = () => {\n    setFilters({\n      nome: \"\",\n      matricula: \"\",\n      cargo: \"\",\n      departamento: \"\",\n      empresa: \"all\"\n    });\n    setSearchTerm(\"\");\n    resetPagination();\n  };\n\n  const formatDate = (dateStr: string | null) => {\n    if (!dateStr) return \"-\";\n    return new Date(dateStr).toLocaleDateString('pt-BR');\n  };\n\n  const formatSalaryDisplay = (salary: string | null) => {\n    if (!salary) return \"-\";\n    return new Intl.NumberFormat('pt-BR', {\n      style: 'currency',\n      currency: 'BRL'\n    }).format(Number(salary));\n  };\n\n  // Handle salary input change with formatting\n  const handleSalaryChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    // Remove everything except numbers, comma, and period\n    const cleanValue = value.replace(/[^\\d,.]/g, '');\n    setFormData({ ...formData, salario: cleanValue });\n  };\n\n  const uploadFile = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      importMutation.mutate(file);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-2 text-gray-600\">Carregando funcion√°rios...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      {/* Header Profissional */}\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <Users className=\"h-8 w-8\" />\n            <div>\n              <h1 className=\"text-2xl font-bold\">Gest√£o de Funcion√°rios</h1>\n              <p className=\"text-blue-100\">BASE FACILITIES - Sistema Corporativo</p>\n            </div>\n          </div>\n          <div className=\"text-right\">\n            <div className=\"text-2xl font-bold\">{filteredEmployees.length}</div>\n            <div className=\"text-blue-100\">Total de Funcion√°rios</div>\n            <div className=\"text-sm text-blue-200 mt-1\">\n              P√°gina {currentPage} de {totalPages}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Barra de A√ß√µes Principais */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col lg:flex-row gap-4\">\n            {/* Busca Global */}\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n              <Input\n                placeholder=\"Buscar por nome, matr√≠cula, RG, cargo ou departamento...\"\n                value={searchTerm}\n                onChange={(e) => {\n                  setSearchTerm(e.target.value);\n                  resetPagination();\n                }}\n                className=\"pl-10 h-11 text-sm\"\n              />\n            </div>\n            \n            {/* Bot√µes de A√ß√£o */}\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setShowFilters(!showFilters)}\n                className=\"h-11\"\n              >\n                <Filter className=\"h-4 w-4 mr-2\" />\n                Filtros\n                {showFilters ? <ChevronUp className=\"h-4 w-4 ml-2\" /> : <ChevronDown className=\"h-4 w-4 ml-2\" />}\n              </Button>\n              \n              <Button\n                variant=\"outline\"\n                onClick={() => setIsCreateModalOpen(true)}\n                className=\"h-11\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Novo\n              </Button>\n\n              <Button\n                variant=\"outline\"\n                className=\"h-11\"\n              >\n                <label className=\"cursor-pointer flex items-center\">\n                  <Upload className=\"h-4 w-4 mr-2\" />\n                  Importar\n                  <input\n                    type=\"file\"\n                    accept=\".xlsx,.xls\"\n                    onChange={uploadFile}\n                    className=\"hidden\"\n                    disabled={importMutation.isPending}\n                  />\n                </label>\n              </Button>\n            </div>\n          </div>\n\n          {/* Painel de Filtros Avan√ßados */}\n          {showFilters && (\n            <div className=\"mt-4 p-4 bg-gray-50 rounded-lg border\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                <div>\n                  <Label className=\"text-sm font-medium\">Nome</Label>\n                  <Input\n                    placeholder=\"Filtrar por nome\"\n                    value={filters.nome}\n                    onChange={(e) => {\n                      setFilters({...filters, nome: e.target.value});\n                      resetPagination();\n                    }}\n                    className=\"mt-1\"\n                  />\n                </div>\n                \n                <div>\n                  <Label className=\"text-sm font-medium\">Matr√≠cula</Label>\n                  <Input\n                    placeholder=\"Filtrar por matr√≠cula\"\n                    value={filters.matricula}\n                    onChange={(e) => {\n                      setFilters({...filters, matricula: e.target.value});\n                      resetPagination();\n                    }}\n                    className=\"mt-1\"\n                  />\n                </div>\n                \n                <div>\n                  <Label className=\"text-sm font-medium\">Cargo</Label>\n                  <Input\n                    placeholder=\"Filtrar por cargo\"\n                    value={filters.cargo}\n                    onChange={(e) => {\n                      setFilters({...filters, cargo: e.target.value});\n                      resetPagination();\n                    }}\n                    className=\"mt-1\"\n                  />\n                </div>\n                \n                <div>\n                  <Label className=\"text-sm font-medium\">Centro de Custo</Label>\n                  <Input\n                    placeholder=\"Filtrar por centro de custo\"\n                    value={filters.departamento}\n                    onChange={(e) => {\n                      setFilters({...filters, departamento: e.target.value});\n                      resetPagination();\n                    }}\n                    className=\"mt-1\"\n                  />\n                </div>\n\n                <div>\n                  <Label className=\"text-sm font-medium\">Empresa</Label>\n                  <Select\n                    value={filters.empresa}\n                    onValueChange={(value) => {\n                      setFilters({...filters, empresa: value});\n                      resetPagination();\n                    }}\n                  >\n                    <SelectTrigger className=\"mt-1\">\n                      <SelectValue placeholder=\"Todas as empresas\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">Todas as empresas</SelectItem>\n                      {companyOptions.map((company) => (\n                        <SelectItem key={company.value} value={company.value}>\n                          {company.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n              \n              <div className=\"flex gap-2 mt-4\">\n                <Button\n                  variant=\"outline\"\n                  onClick={clearFilters}\n                  size=\"sm\"\n                >\n                  <X className=\"h-4 w-4 mr-2\" />\n                  Limpar Filtros\n                </Button>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Pagination Controls */}\n      <Card>\n        <CardContent className=\"pt-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-sm text-gray-600\">Funcion√°rios por p√°gina:</span>\n              <Select\n                value={itemsPerPage.toString()}\n                onValueChange={(value) => {\n                  setItemsPerPage(parseInt(value));\n                  setCurrentPage(1);\n                }}\n              >\n                <SelectTrigger className=\"w-20\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"10\">10</SelectItem>\n                  <SelectItem value=\"20\">20</SelectItem>\n                  <SelectItem value=\"30\">30</SelectItem>\n                  <SelectItem value=\"50\">50</SelectItem>\n                </SelectContent>\n              </Select>\n              <span className=\"text-sm text-gray-600\">\n                Mostrando {startIndex + 1} a {Math.min(endIndex, filteredEmployees.length)} de {filteredEmployees.length} funcion√°rios\n              </span>\n            </div>\n\n            <div className=\"flex items-center space-x-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setCurrentPage(currentPage - 1)}\n                disabled={currentPage === 1}\n              >\n                Anterior\n              </Button>\n              \n              <div className=\"flex space-x-1\">\n                {Array.from({ length: totalPages }, (_, i) => i + 1)\n                  .filter((page) => {\n                    const maxVisiblePages = 5;\n                    const halfRange = Math.floor(maxVisiblePages / 2);\n                    return page >= currentPage - halfRange && page <= currentPage + halfRange;\n                  })\n                  .map((page) => (\n                    <Button\n                      key={page}\n                      variant={page === currentPage ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setCurrentPage(page)}\n                      className=\"w-8 h-8 p-0\"\n                    >\n                      {page}\n                    </Button>\n                  ))}\n              </div>\n\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setCurrentPage(currentPage + 1)}\n                disabled={currentPage === totalPages}\n              >\n                Pr√≥xima\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Tabela Profissional de Funcion√°rios */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-lg\">Lista de Funcion√°rios</CardTitle>\n            <div className=\"text-sm text-gray-500\">\n              {employees.length} de {allEmployees?.length || 0} funcion√°rios\n            </div>\n          </div>\n        </CardHeader>\n        \n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader className=\"bg-gray-50\">\n                <TableRow>\n                  <TableHead className=\"w-[80px] font-semibold\">Empresa</TableHead>\n                  <TableHead className=\"w-[120px] font-semibold\">Matr√≠cula</TableHead>\n                  <TableHead className=\"font-semibold\">Nome</TableHead>\n                  <TableHead className=\"font-semibold\">RG</TableHead>\n                  <TableHead className=\"font-semibold\">PIS</TableHead>\n                  <TableHead className=\"font-semibold\">Admiss√£o</TableHead>\n                  <TableHead className=\"font-semibold\">Sal√°rio</TableHead>\n                  <TableHead className=\"font-semibold\">Cargo</TableHead>\n                  <TableHead className=\"font-semibold\">Centro de Custo</TableHead>\n                  <TableHead className=\"w-[100px] font-semibold\">A√ß√µes</TableHead>\n                </TableRow>\n              </TableHeader>\n              \n              <TableBody>\n                {employees.map((employee) => (\n                  <TableRow key={employee.id} className=\"hover:bg-gray-50\">\n                    <TableCell className=\"font-medium\">\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        {employee.empresa || \"N/A\"}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"font-medium text-blue-600\">\n                      {employee.matricula}\n                    </TableCell>\n                    <TableCell className=\"font-medium\">\n                      {employee.nome}\n                    </TableCell>\n                    <TableCell className=\"text-gray-600\">\n                      {employee.rg || \"-\"}\n                    </TableCell>\n                    <TableCell className=\"text-gray-600\">\n                      {employee.pis || \"-\"}\n                    </TableCell>\n                    <TableCell>\n                      {formatDate(employee.dataAdmissao)}\n                    </TableCell>\n                    <TableCell className=\"font-medium\">\n                      {formatSalaryDisplay(employee.salario)}\n                    </TableCell>\n                    <TableCell>\n                      {employee.cargo || \"-\"}\n                    </TableCell>\n                    <TableCell>\n                      {employee.centroCusto || \"-\"}\n                    </TableCell>\n                    <TableCell>\n                      <div className=\"flex gap-1\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => openEditModal(employee)}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        \n                        <AlertDialog>\n                          <AlertDialogTrigger asChild>\n                            <Button variant=\"ghost\" size=\"sm\" className=\"text-red-600 hover:text-red-700\">\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </AlertDialogTrigger>\n                          <AlertDialogContent>\n                            <AlertDialogHeader>\n                              <AlertDialogTitle>Confirmar exclus√£o</AlertDialogTitle>\n                              <AlertDialogDescription>\n                                Tem certeza que deseja excluir o funcion√°rio <strong>{employee.nome}</strong>?\n                                Esta a√ß√£o n√£o pode ser desfeita.\n                              </AlertDialogDescription>\n                            </AlertDialogHeader>\n                            <AlertDialogFooter>\n                              <AlertDialogCancel>Cancelar</AlertDialogCancel>\n                              <AlertDialogAction \n                                onClick={() => deleteEmployeeMutation.mutate(employee.id)}\n                                className=\"bg-red-600 hover:bg-red-700\"\n                              >\n                                Excluir\n                              </AlertDialogAction>\n                            </AlertDialogFooter>\n                          </AlertDialogContent>\n                        </AlertDialog>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n            \n            {employees.length === 0 && (\n              <div className=\"text-center py-8\">\n                <User className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-500\">Nenhum funcion√°rio encontrado</p>\n                <p className=\"text-sm text-gray-400\">Tente ajustar os filtros ou adicionar novos funcion√°rios</p>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Modal de Criar/Editar Funcion√°rio */}\n      <Dialog open={isCreateModalOpen || isEditModalOpen} onOpenChange={(open) => {\n        if (!open) {\n          setIsCreateModalOpen(false);\n          setIsEditModalOpen(false);\n          resetForm();\n        }\n      }}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {selectedEmployee ? 'Editar Funcion√°rio' : 'Novo Funcion√°rio'}\n            </DialogTitle>\n            <DialogDescription>\n              {selectedEmployee ? 'Altere os dados do funcion√°rio selecionado.' : 'Preencha os dados do novo funcion√°rio.'}\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 py-4\">\n            <div>\n              <Label htmlFor=\"empresa\">Empresa *</Label>\n              <Select\n                value={formData.empresa}\n                onValueChange={(value) => setFormData({...formData, empresa: value})}\n              >\n                <SelectTrigger className=\"mt-1\">\n                  <SelectValue placeholder=\"Selecione a empresa\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {companyOptions.map((company) => (\n                    <SelectItem key={company.value} value={company.value}>\n                      {company.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div>\n              <Label htmlFor=\"nome\">Nome *</Label>\n              <Input\n                id=\"nome\"\n                value={formData.nome}\n                onChange={(e) => setFormData({...formData, nome: e.target.value})}\n                className=\"mt-1\"\n                placeholder=\"Ex: Lucas Silva\"\n                required\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"matricula\">Matr√≠cula *</Label>\n              <Input\n                id=\"matricula\"\n                value={formData.matricula}\n                onChange={(e) => setFormData({...formData, matricula: e.target.value})}\n                className=\"mt-1\"\n                required\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"rg\">RG</Label>\n              <Input\n                id=\"rg\"\n                value={formData.rg}\n                onChange={(e) => setFormData({...formData, rg: e.target.value})}\n                className=\"mt-1\"\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"pis\">PIS</Label>\n              <Input\n                id=\"pis\"\n                value={formData.pis}\n                onChange={(e) => setFormData({...formData, pis: e.target.value})}\n                className=\"mt-1\"\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"dataAdmissao\">Data Admiss√£o</Label>\n              <Input\n                id=\"dataAdmissao\"\n                type=\"date\"\n                value={formData.dataAdmissao}\n                onChange={(e) => setFormData({...formData, dataAdmissao: e.target.value})}\n                className=\"mt-1\"\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"dataDemissao\">Data Demiss√£o</Label>\n              <Input\n                id=\"dataDemissao\"\n                type=\"date\"\n                value={formData.dataDemissao}\n                onChange={(e) => setFormData({...formData, dataDemissao: e.target.value})}\n                className=\"mt-1\"\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"salario\">Sal√°rio</Label>\n              <Input\n                id=\"salario\"\n                value={formData.salario}\n                onChange={handleSalaryChange}\n                placeholder=\"Ex: 5000,00 ou 5000.50\"\n                className=\"mt-1\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">Digite apenas n√∫meros, v√≠rgula ou ponto</p>\n            </div>\n            \n            <div>\n              <Label htmlFor=\"cargo\">Cargo</Label>\n              <Input\n                id=\"cargo\"\n                value={formData.cargo}\n                onChange={(e) => setFormData({...formData, cargo: e.target.value})}\n                className=\"mt-1\"\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"centroCusto\">Centro de Custo</Label>\n              <Input\n                id=\"centroCusto\"\n                value={formData.centroCusto}\n                onChange={(e) => setFormData({...formData, centroCusto: e.target.value})}\n                className=\"mt-1\"\n                placeholder=\"Ex: 001, 002, 003, etc.\"\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"departamento\">Departamento</Label>\n              <Input\n                id=\"departamento\"\n                value={formData.departamento}\n                onChange={(e) => setFormData({...formData, departamento: e.target.value})}\n                className=\"mt-1\"\n                placeholder=\"Ex: Financeiro, Opera√ß√µes, etc.\"\n              />\n            </div>\n            \n\n          </div>\n          \n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => {\n              setIsCreateModalOpen(false);\n              setIsEditModalOpen(false);\n              resetForm();\n            }}>\n              Cancelar\n            </Button>\n            <Button \n              onClick={handleSubmit}\n              disabled={createEmployeeMutation.isPending || updateEmployeeMutation.isPending}\n            >\n              {selectedEmployee ? 'Salvar Altera√ß√µes' : 'Criar Funcion√°rio'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":31672},"client/src/pages/ImportCases2024.tsx":{"content":"import ImportCases2024Modal from \"@/components/ImportCases2024Modal\";\n\nexport default function ImportCases2024() {\n  return <ImportCases2024Modal />;\n}","size_bytes":151},"client/src/pages/Landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\nexport default function Landing() {\n  const handleLogin = () => {\n    window.location.href = \"/api/login\";\n  };\n\n  return (\n    <div className=\"min-h-screen gradient-bg flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardContent className=\"p-8\">\n          <div className=\"text-center mb-8\">\n            {/* BASE FACILITIES Logo */}\n            <div className=\"mx-auto w-24 h-24 mb-4 relative\">\n              <div className=\"absolute inset-0 bg-gradient-to-br from-base-red to-base-navy rounded-full\"></div>\n              <div className=\"absolute inset-2 bg-white rounded-full flex items-center justify-center\">\n                <div className=\"text-base-navy font-bold text-lg\">BASE</div>\n              </div>\n            </div>\n            <h1 className=\"text-2xl font-bold text-base-navy mb-2\">BASE FACILITIES</h1>\n            <p className=\"text-gray-600\">Sistema Jur√≠dico</p>\n          </div>\n          \n          <div className=\"space-y-4\">\n            <p className=\"text-center text-gray-700 mb-6\">\n              Fa√ßa login para acessar o sistema de gerenciamento jur√≠dico\n            </p>\n            \n            <Button \n              onClick={handleLogin}\n              className=\"w-full bg-base-navy hover:bg-blue-800 text-white py-3 px-4 rounded-lg transition-colors font-semibold\"\n            >\n              <i className=\"fas fa-sign-in-alt mr-2\"></i>\n              Entrar com Replit\n            </Button>\n          </div>\n          \n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-gray-500\">\n              Sistema seguro e profissional para gest√£o de processos jur√≠dicos\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1863},"client/src/pages/Users.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Plus, Edit, Trash2, Settings, Shield } from \"lucide-react\";\nimport type { User } from \"@shared/schema\";\nimport UserModal from \"@/components/UserModal\";\n\nexport default function Users() {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  \n  const { user: currentUser } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: users, isLoading } = useQuery({\n    queryKey: [\"/api/users\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/users\", {\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        if (response.status === 401) {\n          toast({\n            title: \"N√£o autorizado\",\n            description: \"Voc√™ foi desconectado. Redirecionando...\",\n            variant: \"destructive\",\n          });\n          setTimeout(() => {\n            window.location.href = \"/api/login\";\n          }, 500);\n          return [];\n        }\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      return response.json();\n    },\n  });\n\n  const createUserMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"POST\", \"/api/users\", data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/users\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Usu√°rio criado com sucesso\",\n      });\n      setIsModalOpen(false);\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"N√£o autorizado\",\n          description: \"Voc√™ foi desconectado. Redirecionando...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao criar usu√°rio\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateUserMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"PUT\", `/api/users/${data.id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/users\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Usu√°rio atualizado com sucesso\",\n      });\n      setIsModalOpen(false);\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"N√£o autorizado\",\n          description: \"Voc√™ foi desconectado. Redirecionando...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao atualizar usu√°rio\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteUserMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/users/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/users\"] });\n      toast({\n        title: \"Sucesso\",\n        description: \"Usu√°rio exclu√≠do com sucesso\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"N√£o autorizado\",\n          description: \"Voc√™ foi desconectado. Redirecionando...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Erro\",\n        description: \"Falha ao excluir usu√°rio\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCreateUser = (data: any) => {\n    createUserMutation.mutate(data);\n  };\n\n  const handleUpdateUser = (data: any) => {\n    updateUserMutation.mutate({ ...data, id: selectedUser?.id });\n  };\n\n  const getRoleBadge = (role: string) => {\n    const roleConfig = {\n      admin: { label: \"Administrador\", className: \"bg-red-100 text-red-800\" },\n      editor: { label: \"Editor\", className: \"bg-blue-100 text-blue-800\" },\n      viewer: { label: \"Visualizador\", className: \"bg-gray-100 text-gray-800\" },\n    };\n    \n    const config = roleConfig[role as keyof typeof roleConfig] || roleConfig.viewer;\n    return (\n      <Badge className={config.className}>\n        {config.label}\n      </Badge>\n    );\n  };\n\n  const filteredUsers = users?.filter((user: User) => \n    user.firstName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.lastName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.username.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.email.toLowerCase().includes(searchTerm.toLowerCase())\n  ) || [];\n\n  if (currentUser?.role !== 'admin') {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <Shield className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Acesso Restrito</h3>\n          <p className=\"text-gray-500\">Apenas administradores podem gerenciar usu√°rios.</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (isLoading) {\n    return <div className=\"flex items-center justify-center h-64\">Carregando usu√°rios...</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-bold tracking-tight\">Gerenciamento de Usu√°rios</h1>\n        <Button onClick={() => { setSelectedUser(null); setIsModalOpen(true); }}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Novo Usu√°rio\n        </Button>\n      </div>\n\n      {/* Busca */}\n      <Card>\n        <CardContent className=\"p-4\">\n          <Input\n            placeholder=\"Buscar usu√°rios por nome, usu√°rio ou email...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"max-w-md\"\n          />\n        </CardContent>\n      </Card>\n\n      {/* Tabela de Usu√°rios */}\n      <Card>\n        <CardHeader>\n          <CardTitle>\n            Usu√°rios Cadastrados ({filteredUsers.length})\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader className=\"bg-gray-50/80\">\n                <TableRow className=\"border-b-2 border-gray-200\">\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Nome</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Usu√°rio</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Email</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Papel</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700 border-r border-gray-200\">Criado em</TableHead>\n                  <TableHead className=\"font-semibold text-gray-700\">A√ß√µes</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredUsers.map((user: User) => (\n                  <TableRow key={user.id} className=\"hover:bg-gray-50/50 border-b border-gray-100 transition-colors\">\n                    <TableCell className=\"font-medium border-r border-gray-100 py-4\">\n                      {user.firstName} {user.lastName}\n                    </TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">{user.username}</TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">{user.email}</TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">{getRoleBadge(user.role)}</TableCell>\n                    <TableCell className=\"border-r border-gray-100 py-4\">\n                      {new Date(user.createdAt).toLocaleDateString('pt-BR')}\n                    </TableCell>\n                    <TableCell className=\"py-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => {\n                            setSelectedUser(user);\n                            setIsModalOpen(true);\n                          }}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        {user.id !== currentUser?.id && (\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => {\n                              if (window.confirm(\"Tem certeza que deseja excluir este usu√°rio?\")) {\n                                deleteUserMutation.mutate(user.id);\n                              }\n                            }}\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        )}\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Modal */}\n      {isModalOpen && (\n        <UserModal\n          user={selectedUser}\n          onSubmit={selectedUser ? handleUpdateUser : handleCreateUser}\n          onClose={() => setIsModalOpen(false)}\n          isSubmitting={createUserMutation.isPending || updateUserMutation.isPending}\n        />\n      )}\n    </div>\n  );\n}","size_bytes":10651},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/charts/CaseStatusChart.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip } from \"recharts\";\n\nconst COLORS = {\n  novo: \"#fbbf24\",\n  andamento: \"#3b82f6\", \n  concluido: \"#10b981\",\n  pendente: \"#ef4444\",\n};\n\nexport default function CaseStatusChart() {\n  const { data: cases } = useQuery({\n    queryKey: [\"/api/cases\"],\n  });\n\n  const statusCounts = cases?.reduce((acc: any, caseItem: any) => {\n    const status = caseItem.status;\n    acc[status] = (acc[status] || 0) + 1;\n    return acc;\n  }, {}) || {};\n\n  const chartData = Object.entries(statusCounts).map(([status, count]) => ({\n    name: status === 'novo' ? 'Novo' :\n          status === 'andamento' ? 'Em Andamento' :\n          status === 'concluido' ? 'Conclu√≠do' : 'Pendente',\n    value: count,\n    status,\n  }));\n\n  if (!cases || cases.length === 0) {\n    return (\n      <div className=\"h-64 flex items-center justify-center text-gray-500\">\n        <div className=\"text-center\">\n          <div className=\"text-4xl mb-2\">üìä</div>\n          <p>Nenhum dado dispon√≠vel</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-64\">\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <PieChart>\n          <Pie\n            data={chartData}\n            cx=\"50%\"\n            cy=\"50%\"\n            innerRadius={60}\n            outerRadius={100}\n            paddingAngle={5}\n            dataKey=\"value\"\n          >\n            {chartData.map((entry, index) => (\n              <Cell key={`cell-${index}`} fill={COLORS[entry.status as keyof typeof COLORS]} />\n            ))}\n          </Pie>\n          <Tooltip />\n          <Legend />\n        </PieChart>\n      </ResponsiveContainer>\n    </div>\n  );\n}\n","size_bytes":1724},"client/src/components/charts/ResponseTimeChart.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from \"recharts\";\n\nexport default function ResponseTimeChart() {\n  const { data: cases } = useQuery({\n    queryKey: [\"/api/cases\"],\n  });\n\n  // Generate monthly response time data\n  const monthlyData = React.useMemo(() => {\n    if (!cases) return [];\n\n    const completedCases = cases.filter((c: any) => c.status === 'concluido' && c.completedDate);\n    \n    const monthlyStats: Record<string, { total: number; count: number }> = {};\n    \n    completedCases.forEach((caseItem: any) => {\n      const completedDate = new Date(caseItem.completedDate);\n      const startDate = new Date(caseItem.startDate);\n      const monthKey = `${completedDate.getFullYear()}-${String(completedDate.getMonth() + 1).padStart(2, '0')}`;\n      \n      const responseTime = Math.ceil((completedDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n      \n      if (!monthlyStats[monthKey]) {\n        monthlyStats[monthKey] = { total: 0, count: 0 };\n      }\n      \n      monthlyStats[monthKey].total += responseTime;\n      monthlyStats[monthKey].count += 1;\n    });\n\n    return Object.entries(monthlyStats)\n      .map(([month, stats]) => ({\n        month,\n        averageTime: Math.round(stats.total / stats.count),\n      }))\n      .sort((a, b) => a.month.localeCompare(b.month))\n      .slice(-6); // Last 6 months\n  }, [cases]);\n\n  if (!monthlyData || monthlyData.length === 0) {\n    return (\n      <div className=\"h-64 flex items-center justify-center text-gray-500\">\n        <div className=\"text-center\">\n          <div className=\"text-4xl mb-2\">üìà</div>\n          <p>Dados insuficientes para an√°lise</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-64\">\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <LineChart data={monthlyData}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis \n            dataKey=\"month\" \n            tickFormatter={(value) => {\n              const [year, month] = value.split('-');\n              return `${month}/${year}`;\n            }}\n          />\n          <YAxis label={{ value: 'Dias', angle: -90, position: 'insideLeft' }} />\n          <Tooltip \n            labelFormatter={(value) => {\n              const [year, month] = value.split('-');\n              return `${month}/${year}`;\n            }}\n            formatter={(value) => [`${value} dias`, 'Tempo M√©dio']}\n          />\n          <Line \n            type=\"monotone\" \n            dataKey=\"averageTime\" \n            stroke=\"#3b82f6\" \n            strokeWidth={2}\n            dot={{ fill: '#3b82f6' }}\n          />\n        </LineChart>\n      </ResponsiveContainer>\n    </div>\n  );\n}\n\nimport React from \"react\";\n","size_bytes":2785},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/DashboardCustomizer.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Settings, GripVertical } from \"lucide-react\";\nimport type { WidgetConfig, LayoutItem } from \"@shared/schema\";\n\ninterface DashboardCustomizerProps {\n  availableWidgets: WidgetConfig[];\n  activeWidgets: WidgetConfig[];\n  layout: LayoutItem[];\n  onWidgetToggle: (widget: WidgetConfig, enabled: boolean) => void;\n  onSaveLayout: () => void;\n}\n\nexport default function DashboardCustomizer({ \n  availableWidgets, \n  activeWidgets, \n  layout,\n  onWidgetToggle,\n  onSaveLayout \n}: DashboardCustomizerProps) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const widgetTypeLabels = {\n    stats: \"Estat√≠sticas\",\n    chart: \"Gr√°ficos\",\n    'recent-cases': \"Processos Recentes\",\n    'case-distribution': \"Distribui√ß√£o de Casos\",\n    'activity-feed': \"Feed de Atividades\",\n    'quick-actions': \"A√ß√µes R√°pidas\",\n    'delivery-time': \"Tempo de Entrega\",\n  };\n\n  const activeWidgetIds = activeWidgets.map(w => w.id);\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" className=\"mb-4\">\n          <Settings className=\"h-4 w-4 mr-2\" />\n          Personalizar Dashboard\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[600px]\">\n        <DialogHeader>\n          <DialogTitle>Personalizar Dashboard</DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <h3 className=\"text-sm font-medium mb-3\">Widgets Dispon√≠veis</h3>\n            <div className=\"grid grid-cols-1 gap-3\">\n              {availableWidgets.map((widget) => (\n                <Card key={widget.id} className=\"p-3\">\n                  <div className=\"flex items-center space-x-3\">\n                    <Checkbox\n                      id={widget.id}\n                      checked={activeWidgetIds.includes(widget.id)}\n                      onCheckedChange={(checked) => \n                        onWidgetToggle(widget, checked as boolean)\n                      }\n                    />\n                    <div className=\"flex-1\">\n                      <label \n                        htmlFor={widget.id} \n                        className=\"text-sm font-medium cursor-pointer\"\n                      >\n                        {widget.title}\n                      </label>\n                      <p className=\"text-xs text-gray-500\">\n                        {widgetTypeLabels[widget.type] || widget.type}\n                      </p>\n                    </div>\n                    <GripVertical className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                </Card>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"border-t pt-4\">\n            <h3 className=\"text-sm font-medium mb-3\">Layout Atual</h3>\n            <div className=\"text-xs text-gray-500 mb-3\">\n              Arraste e redimensione os widgets no dashboard para personalizar o layout.\n            </div>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {layout.map((item) => {\n                const widget = activeWidgets.find(w => w.id === item.i);\n                return widget ? (\n                  <div key={item.i} className=\"bg-gray-50 p-2 rounded text-xs\">\n                    <div className=\"font-medium\">{widget.title}</div>\n                    <div className=\"text-gray-500\">\n                      {item.w}x{item.h} em ({item.x}, {item.y})\n                    </div>\n                  </div>\n                ) : null;\n              })}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end space-x-2 pt-4 border-t\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsOpen(false)}\n            >\n              Cancelar\n            </Button>\n            <Button\n              onClick={() => {\n                onSaveLayout();\n                setIsOpen(false);\n              }}\n            >\n              Salvar Layout\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":4363},"client/src/components/DashboardGrid.tsx":{"content":"import { useState, useCallback } from \"react\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nimport StatsWidget from \"./widgets/StatsWidget\";\nimport RecentCasesWidget from \"./widgets/RecentCasesWidget\";\nimport ChartWidget from \"./widgets/ChartWidget\";\nimport QuickActionsWidget from \"./widgets/QuickActionsWidget\";\nimport ActivityFeedWidget from \"./widgets/ActivityFeedWidget\";\nimport DeliveryTimeWidget from \"./widgets/DeliveryTimeWidget\";\nimport type { WidgetConfig, LayoutItem } from \"@shared/schema\";\nimport \"react-grid-layout/css/styles.css\";\nimport \"react-resizable/css/styles.css\";\nimport \"@/styles/dashboard-grid.css\";\nimport \"@/styles/responsive-dashboard.css\";\n\nconst ResponsiveGridLayout = WidthProvider(Responsive);\n\ninterface DashboardGridProps {\n  widgets: WidgetConfig[];\n  layouts: { [key: string]: LayoutItem[] };\n  onLayoutChange: (layout: LayoutItem[], layouts: { [key: string]: LayoutItem[] }) => void;\n  dashboardData: {\n    stats?: any;\n    recentCases?: any[];\n    chartData?: any[];\n    activityLogs?: any[];\n  };\n  onNewCase?: () => void;\n  onSearchEmployees?: () => void;\n  onWidgetConfigChange?: (widgetId: string, newConfig: Partial<WidgetConfig>) => void;\n}\n\nexport default function DashboardGrid({ \n  widgets, \n  layouts, \n  onLayoutChange, \n  dashboardData,\n  onNewCase,\n  onSearchEmployees,\n  onWidgetConfigChange\n}: DashboardGridProps) {\n  const [isDragging, setIsDragging] = useState(false);\n\n  const renderWidget = useCallback((widget: WidgetConfig) => {\n    const handleConfigChange = (newConfig: Partial<WidgetConfig>) => {\n      if (onWidgetConfigChange) {\n        onWidgetConfigChange(widget.id, newConfig);\n      }\n    };\n\n    switch (widget.type) {\n      case 'stats':\n        return <StatsWidget config={widget} data={dashboardData.stats} />;\n      case 'recent-cases':\n        return <RecentCasesWidget config={widget} data={dashboardData.recentCases} />;\n      case 'chart':\n        return (\n          <ChartWidget \n            config={widget} \n            data={dashboardData.chartData} \n            onConfigChange={handleConfigChange}\n          />\n        );\n      case 'delivery-time':\n        return (\n          <DeliveryTimeWidget\n            config={widget}\n            data={dashboardData.recentCases}\n            onConfigChange={handleConfigChange}\n          />\n        );\n      case 'activity-feed':\n        return <ActivityFeedWidget config={widget} data={dashboardData.activityLogs} />;\n      case 'quick-actions':\n        return (\n          <QuickActionsWidget \n            config={widget} \n            onNewCase={onNewCase}\n            onSearchEmployees={onSearchEmployees}\n          />\n        );\n      default:\n        return (\n          <div className=\"h-full bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center\">\n            <span className=\"text-gray-500\">Widget: {widget.type}</span>\n          </div>\n        );\n    }\n  }, [dashboardData, onNewCase, onSearchEmployees, onWidgetConfigChange]);\n\n  return (\n    <div className={`transition-all duration-200 ${isDragging ? 'cursor-grabbing' : ''}`}>\n      <ResponsiveGridLayout\n        className=\"layout\"\n        layouts={layouts}\n        onLayoutChange={onLayoutChange}\n        onDragStart={() => setIsDragging(true)}\n        onDragStop={() => setIsDragging(false)}\n        onResizeStart={() => setIsDragging(true)}\n        onResizeStop={() => setIsDragging(false)}\n        breakpoints={{ lg: 1200, md: 996, sm: 768, xs: 480, xxs: 0 }}\n        cols={{ lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 }}\n        rowHeight={70}\n        margin={[16, 16]}\n        containerPadding={[20, 20]}\n        isDraggable={true}\n        isResizable={true}\n        useCSSTransforms={true}\n        preventCollision={false}\n        compactType=\"vertical\"\n      >\n        {widgets.map((widget) => (\n          <div \n            key={widget.id} \n            className={`bg-white rounded-lg shadow-sm border transition-shadow duration-200 ${\n              isDragging ? 'shadow-lg' : 'hover:shadow-md'\n            }`}\n          >\n            {renderWidget(widget)}\n          </div>\n        ))}\n      </ResponsiveGridLayout>\n    </div>\n  );\n}","size_bytes":4177},"client/src/components/widgets/ActivityFeedWidget.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Clock, User, FileText } from \"lucide-react\";\nimport type { WidgetConfig, ActivityLogWithUser } from \"@shared/schema\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\ninterface ActivityFeedWidgetProps {\n  config: WidgetConfig;\n  data?: ActivityLogWithUser[];\n}\n\nconst actionLabels = {\n  CREATE_CASE: \"Criou processo\",\n  UPDATE_CASE: \"Atualizou processo\", \n  DELETE_CASE: \"Excluiu processo\",\n  CREATE_USER: \"Criou usu√°rio\",\n  UPDATE_USER: \"Atualizou usu√°rio\",\n  LOGIN: \"Fez login\",\n  LOGOUT: \"Fez logout\",\n};\n\nconst actionColors = {\n  CREATE_CASE: \"bg-green-100 text-green-800\",\n  UPDATE_CASE: \"bg-blue-100 text-blue-800\",\n  DELETE_CASE: \"bg-red-100 text-red-800\",\n  CREATE_USER: \"bg-purple-100 text-purple-800\",\n  UPDATE_USER: \"bg-yellow-100 text-yellow-800\",\n  LOGIN: \"bg-gray-100 text-gray-800\",\n  LOGOUT: \"bg-gray-100 text-gray-800\",\n};\n\nexport default function ActivityFeedWidget({ config, data }: ActivityFeedWidgetProps) {\n  if (!data) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-sm text-gray-500\">Carregando...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-2\">\n        <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-3 max-h-48 overflow-y-auto\">\n        {data.length === 0 ? (\n          <div className=\"text-sm text-gray-500 text-center py-4\">\n            Nenhuma atividade recente\n          </div>\n        ) : (\n          data.slice(0, 6).map((activity) => (\n            <div key={activity.id} className=\"flex items-start space-x-3\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center\">\n                  <User className=\"h-3 w-3 text-gray-500\" />\n                </div>\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center space-x-2\">\n                  <Badge \n                    variant=\"secondary\" \n                    className={`text-xs ${actionColors[activity.action as keyof typeof actionColors] || 'bg-gray-100 text-gray-800'}`}\n                  >\n                    {actionLabels[activity.action as keyof typeof actionLabels] || activity.action}\n                  </Badge>\n                </div>\n                <p className=\"text-xs text-gray-600 mt-1 line-clamp-2\">\n                  {activity.description}\n                </p>\n                <div className=\"flex items-center text-xs text-gray-400 mt-1\">\n                  <Clock className=\"h-3 w-3 mr-1\" />\n                  {formatDistanceToNow(new Date(activity.createdAt), { \n                    addSuffix: true, \n                    locale: ptBR \n                  })}\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":3269},"client/src/components/widgets/ChartWidget.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Legend, BarChart, Bar, XAxis, YAxis, LineChart, Line, CartesianGrid } from \"recharts\";\nimport { Settings, Calendar } from \"lucide-react\";\nimport type { WidgetConfig } from \"@shared/schema\";\n\ninterface ChartWidgetProps {\n  config: WidgetConfig;\n  data?: any[];\n  onConfigChange?: (newConfig: Partial<WidgetConfig>) => void;\n}\n\nconst COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#f97316'];\n\nexport default function ChartWidget({ config, data, onConfigChange }: ChartWidgetProps) {\n  const [showSettings, setShowSettings] = useState(false);\n  const [tempChartType, setTempChartType] = useState(config.data?.chartType || 'pie');\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n\n  const handleSaveSettings = () => {\n    if (onConfigChange) {\n      onConfigChange({\n        data: {\n          ...config.data,\n          chartType: tempChartType,\n          dateFilter: { startDate, endDate }\n        }\n      });\n    }\n    setShowSettings(false);\n  };\n  if (!data || data.length === 0) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center h-32\">\n          <div className=\"text-sm text-gray-500\">Sem dados para exibir</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const chartType = config.data?.chartType || 'pie';\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-2 flex flex-row items-center justify-between space-y-0\">\n        <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n        {onConfigChange && (\n          <Popover open={showSettings} onOpenChange={setShowSettings}>\n            <PopoverTrigger asChild>\n              <Button variant=\"ghost\" size=\"sm\" className=\"h-6 w-6 p-0\">\n                <Settings className=\"h-3 w-3\" />\n              </Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-80\" align=\"end\">\n              <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label>Tipo de Gr√°fico</Label>\n                  <Select value={tempChartType} onValueChange={setTempChartType}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"pie\">Pizza</SelectItem>\n                      <SelectItem value=\"bar\">Barras</SelectItem>\n                      <SelectItem value=\"line\">Linha</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <Label>Filtro por Data</Label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div>\n                      <Label className=\"text-xs\">De:</Label>\n                      <Input\n                        type=\"date\"\n                        value={startDate}\n                        onChange={(e) => setStartDate(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                    <div>\n                      <Label className=\"text-xs\">At√©:</Label>\n                      <Input\n                        type=\"date\"\n                        value={endDate}\n                        onChange={(e) => setEndDate(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <Button onClick={handleSaveSettings} size=\"sm\" className=\"w-full\">\n                  Aplicar Configura√ß√µes\n                </Button>\n              </div>\n            </PopoverContent>\n          </Popover>\n        )}\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={200}>\n          {chartType === 'pie' ? (\n            <PieChart>\n              <Pie\n                data={data}\n                cx=\"50%\"\n                cy=\"50%\"\n                innerRadius={40}\n                outerRadius={80}\n                dataKey=\"value\"\n                nameKey=\"name\"\n              >\n                {data.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                ))}\n              </Pie>\n              <Tooltip />\n              <Legend />\n            </PieChart>\n          ) : chartType === 'line' ? (\n            <LineChart data={data}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis \n                dataKey=\"name\" \n                tick={{ fontSize: 10 }}\n                interval={0}\n                angle={-45}\n                textAnchor=\"end\"\n                height={60}\n              />\n              <YAxis tick={{ fontSize: 10 }} />\n              <Tooltip />\n              <Line type=\"monotone\" dataKey=\"value\" stroke=\"#3b82f6\" strokeWidth={2} />\n            </LineChart>\n          ) : (\n            <BarChart data={data}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis \n                dataKey=\"name\" \n                tick={{ fontSize: 10 }}\n                interval={0}\n                angle={-45}\n                textAnchor=\"end\"\n                height={60}\n              />\n              <YAxis tick={{ fontSize: 10 }} />\n              <Tooltip />\n              <Bar dataKey=\"value\" fill=\"#3b82f6\" />\n            </BarChart>\n          )}\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":6155},"client/src/components/widgets/QuickActionsWidget.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus, Search, FileText, Users } from \"lucide-react\";\nimport type { WidgetConfig } from \"@shared/schema\";\n\ninterface QuickActionsWidgetProps {\n  config: WidgetConfig;\n  onNewCase?: () => void;\n  onSearchEmployees?: () => void;\n}\n\nexport default function QuickActionsWidget({ config, onNewCase, onSearchEmployees }: QuickActionsWidgetProps) {\n  const actions = [\n    {\n      label: \"Novo Processo\",\n      icon: Plus,\n      onClick: onNewCase,\n      className: \"bg-blue-500 hover:bg-blue-600 text-white\",\n    },\n    {\n      label: \"Buscar Funcion√°rio\",\n      icon: Search,\n      onClick: onSearchEmployees,\n      className: \"bg-green-500 hover:bg-green-600 text-white\",\n    },\n    {\n      label: \"Relat√≥rios\",\n      icon: FileText,\n      onClick: () => {}, \n      className: \"bg-purple-500 hover:bg-purple-600 text-white\",\n    },\n    {\n      label: \"Usu√°rios\",\n      icon: Users,\n      onClick: () => {}, \n      className: \"bg-orange-500 hover:bg-orange-600 text-white\",\n    },\n  ];\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-2\">\n        <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-2 gap-2\">\n          {actions.map((action) => (\n            <Button\n              key={action.label}\n              onClick={action.onClick}\n              className={`h-16 flex flex-col items-center justify-center space-y-1 ${action.className}`}\n              size=\"sm\"\n            >\n              <action.icon className=\"h-4 w-4\" />\n              <span className=\"text-xs\">{action.label}</span>\n            </Button>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":1841},"client/src/components/widgets/RecentCasesWidget.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar, User } from \"lucide-react\";\nimport type { WidgetConfig, CaseWithRelations } from \"@shared/schema\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\n\ninterface RecentCasesWidgetProps {\n  config: WidgetConfig;\n  data?: CaseWithRelations[];\n}\n\nconst statusColors = {\n  novo: \"bg-blue-100 text-blue-800 border-blue-200\",\n  andamento: \"bg-yellow-100 text-yellow-800 border-yellow-200\",\n  concluido: \"bg-green-100 text-green-800 border-green-200\",\n  pendente: \"bg-red-100 text-red-800 border-red-200\",\n};\n\nconst statusLabels = {\n  novo: \"Novo\",\n  andamento: \"Em Andamento\",\n  concluido: \"Conclu√≠do\",\n  pendente: \"Pendente\",\n};\n\nexport default function RecentCasesWidget({ config, data }: RecentCasesWidgetProps) {\n  if (!data) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-sm text-gray-500\">Carregando...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-2\">\n        <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {data.length === 0 ? (\n          <div className=\"text-sm text-gray-500 text-center py-4\">\n            Nenhum processo recente\n          </div>\n        ) : (\n          data.slice(0, 4).map((caseItem) => (\n            <div key={caseItem.id} className=\"flex items-start space-x-3\">\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-gray-900 truncate\">\n                  {caseItem.clientName}\n                </p>\n                <p className=\"text-xs text-gray-500 truncate\">\n                  {caseItem.processNumber}\n                </p>\n                <div className=\"flex items-center space-x-2 mt-1\">\n                  <Badge \n                    variant=\"secondary\" \n                    className={`text-xs ${statusColors[caseItem.status as keyof typeof statusColors]}`}\n                  >\n                    {statusLabels[caseItem.status as keyof typeof statusLabels]}\n                  </Badge>\n                  <div className=\"flex items-center text-xs text-gray-400\">\n                    <Calendar className=\"h-3 w-3 mr-1\" />\n                    {formatDistanceToNow(new Date(caseItem.createdAt), { \n                      addSuffix: true, \n                      locale: ptBR \n                    })}\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":2874},"client/src/components/widgets/StatsWidget.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { FileText, Clock, CheckCircle, AlertTriangle } from \"lucide-react\";\nimport type { WidgetConfig } from \"@shared/schema\";\n\ninterface DashboardStats {\n  total: number;\n  novos: number;\n  pendentes: number;\n  concluidos: number;\n  atrasados: number;\n  averageResponseTime: number;\n}\n\ninterface StatsWidgetProps {\n  config: WidgetConfig;\n  data?: DashboardStats;\n}\n\nexport default function StatsWidget({ config, data }: StatsWidgetProps) {\n  if (!data) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-sm text-gray-500\">Carregando...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const stats = [\n    {\n      label: \"Novos\",\n      value: data.novos,\n      icon: FileText,\n      color: \"bg-blue-500\",\n    },\n    {\n      label: \"Pendentes\",\n      value: data.pendentes,\n      icon: Clock,\n      color: \"bg-yellow-500\",\n    },\n    {\n      label: \"Atrasados\",\n      value: data.atrasados,\n      icon: AlertTriangle,\n      color: \"bg-red-500\",\n    },\n    {\n      label: \"Conclu√≠dos\",\n      value: data.concluidos,\n      icon: CheckCircle,\n      color: \"bg-green-500\",\n    },\n  ];\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-1 md:pb-2\">\n        <CardTitle className=\"text-xs md:text-sm font-medium\">{config.title}</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 md:gap-3\">\n          {stats.map((stat) => (\n            <div key={stat.label} className=\"flex items-center space-x-1 md:space-x-2\">\n              <div className={`p-0.5 md:p-1 rounded ${stat.color}`}>\n                <stat.icon className=\"h-2 w-2 md:h-3 md:w-3 text-white\" />\n              </div>\n              <div className=\"min-w-0 flex-1\">\n                <p className=\"text-[10px] md:text-xs text-gray-500 truncate\">{stat.label}</p>\n                <p className=\"text-xs md:text-sm font-semibold\">{stat.value}</p>\n              </div>\n            </div>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":2312},"client/src/pages/CustomDashboard.tsx":{"content":"import { useState, useEffect, useCallback } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport DashboardGrid from \"@/components/DashboardGrid\";\nimport DashboardCustomizer from \"@/components/DashboardCustomizer\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { WidgetConfig, LayoutItem, CaseWithRelations, ActivityLogWithUser } from \"@shared/schema\";\nimport { Loader2 } from \"lucide-react\";\nimport \"@/styles/dashboard-layout-fix.css\";\n\n// Default widgets available\nconst AVAILABLE_WIDGETS: WidgetConfig[] = [\n  {\n    id: 'stats-1',\n    type: 'stats',\n    title: 'Estat√≠sticas dos Processos',\n    refreshInterval: 300000, // 5 minutes\n  },\n  {\n    id: 'recent-cases-1',\n    type: 'recent-cases',\n    title: 'Processos Recentes',\n    refreshInterval: 120000, // 2 minutes\n  },\n  {\n    id: 'chart-status-1',\n    type: 'chart',\n    title: 'Distribui√ß√£o por Status',\n    data: { chartType: 'pie' },\n    refreshInterval: 300000, // 5 minutes\n  },\n  {\n    id: 'delivery-time-1',\n    type: 'delivery-time',\n    title: 'Tempo de Entrega dos Processos',\n    refreshInterval: 300000, // 5 minutes\n  },\n  {\n    id: 'activity-feed-1',\n    type: 'activity-feed',\n    title: 'Atividades Recentes',\n    refreshInterval: 60000, // 1 minute\n  },\n  {\n    id: 'quick-actions-1',\n    type: 'quick-actions',\n    title: 'A√ß√µes R√°pidas',\n  },\n  {\n    id: 'chart-monthly-1',\n    type: 'chart',\n    title: 'Processos por M√™s',\n    data: { chartType: 'bar' },\n    refreshInterval: 3600000, // 1 hour\n  },\n  {\n    id: 'chart-process-types-1',\n    type: 'chart',\n    title: 'Tipos de Processo',\n    data: { chartType: 'pie' },\n    refreshInterval: 600000, // 10 minutes\n  },\n];\n\n// Default layout for new users - LAYOUT CORRIGIDO\nconst DEFAULT_LAYOUTS = {\n  lg: [\n    { i: 'stats-1', x: 0, y: 0, w: 6, h: 3 },\n    { i: 'quick-actions-1', x: 6, y: 0, w: 6, h: 3 },\n    { i: 'chart-status-1', x: 0, y: 3, w: 6, h: 5 },\n    { i: 'delivery-time-1', x: 6, y: 3, w: 6, h: 5 },\n    { i: 'recent-cases-1', x: 0, y: 8, w: 8, h: 4 },\n    { i: 'activity-feed-1', x: 8, y: 8, w: 4, h: 4 },\n  ],\n  md: [\n    { i: 'stats-1', x: 0, y: 0, w: 5, h: 3 },\n    { i: 'quick-actions-1', x: 5, y: 0, w: 5, h: 3 },\n    { i: 'chart-status-1', x: 0, y: 3, w: 5, h: 5 },\n    { i: 'delivery-time-1', x: 5, y: 3, w: 5, h: 5 },\n    { i: 'recent-cases-1', x: 0, y: 8, w: 6, h: 4 },\n    { i: 'activity-feed-1', x: 6, y: 8, w: 4, h: 4 },\n  ],\n  sm: [\n    { i: 'stats-1', x: 0, y: 0, w: 6, h: 3 },\n    { i: 'quick-actions-1', x: 0, y: 3, w: 6, h: 3 },\n    { i: 'chart-status-1', x: 0, y: 6, w: 6, h: 5 },\n    { i: 'delivery-time-1', x: 0, y: 11, w: 6, h: 5 },\n    { i: 'recent-cases-1', x: 0, y: 16, w: 6, h: 4 },\n    { i: 'activity-feed-1', x: 0, y: 20, w: 6, h: 4 },\n  ],\n  xs: [\n    { i: 'stats-1', x: 0, y: 0, w: 4, h: 3 },\n    { i: 'quick-actions-1', x: 0, y: 3, w: 4, h: 3 },\n    { i: 'chart-status-1', x: 0, y: 6, w: 4, h: 5 },\n    { i: 'recent-cases-1', x: 0, y: 11, w: 4, h: 4 },\n    { i: 'activity-feed-1', x: 0, y: 15, w: 4, h: 4 },\n  ],\n  xxs: [\n    { i: 'stats-1', x: 0, y: 0, w: 2, h: 3 },\n    { i: 'quick-actions-1', x: 0, y: 3, w: 2, h: 3 },\n    { i: 'chart-status-1', x: 0, y: 6, w: 2, h: 5 },\n    { i: 'recent-cases-1', x: 0, y: 11, w: 2, h: 4 },\n    { i: 'activity-feed-1', x: 0, y: 15, w: 2, h: 4 },\n  ],\n};\n\nconst DEFAULT_ACTIVE_WIDGETS = ['stats-1', 'quick-actions-1', 'chart-status-1', 'recent-cases-1', 'activity-feed-1'];\n\nexport default function CustomDashboard() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  \n  const [activeWidgets, setActiveWidgets] = useState<WidgetConfig[]>(\n    AVAILABLE_WIDGETS.filter(w => DEFAULT_ACTIVE_WIDGETS.includes(w.id))\n  );\n  const [layouts, setLayouts] = useState(DEFAULT_LAYOUTS);\n  const [isSavingLayout, setIsSavingLayout] = useState(false);\n\n  // Load user's saved dashboard layout\n  useEffect(() => {\n    if (user?.id) {\n      fetchDashboardLayout();\n    }\n  }, [user?.id]);\n\n  const fetchDashboardLayout = async () => {\n    try {\n      const response = await fetch(`/api/dashboard/layout`, {\n        credentials: 'include',\n      });\n\n      if (response.ok) {\n        const savedLayout = await response.json();\n        if (savedLayout) {\n          setLayouts(savedLayout.layout || DEFAULT_LAYOUTS);\n          const savedWidgets = AVAILABLE_WIDGETS.filter(w => \n            savedLayout.widgets?.includes(w.id)\n          );\n          if (savedWidgets.length > 0) {\n            setActiveWidgets(savedWidgets);\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading dashboard layout:', error);\n    }\n  };\n\n  const saveDashboardLayout = async () => {\n    if (!user?.id || isSavingLayout) return;\n\n    setIsSavingLayout(true);\n    try {\n      const response = await fetch('/api/dashboard/layout', {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          layout: layouts,\n          widgets: activeWidgets.map(w => w.id),\n        }),\n      });\n\n      if (response.ok) {\n        toast({\n          title: \"Layout salvo\",\n          description: \"Sua personaliza√ß√£o foi salva com sucesso.\",\n        });\n      } else {\n        throw new Error('Failed to save layout');\n      }\n    } catch (error) {\n      console.error('Error saving dashboard layout:', error);\n      toast({\n        title: \"Erro ao salvar\",\n        description: \"N√£o foi poss√≠vel salvar o layout personalizado.\",\n        variant: \"destructive\",\n      });\n    }\n    setIsSavingLayout(false);\n  };\n\n  const handleLayoutChange = useCallback((layout: LayoutItem[], allLayouts: { [key: string]: LayoutItem[] }) => {\n    setLayouts(allLayouts);\n  }, []);\n\n  const handleWidgetToggle = useCallback((widget: WidgetConfig, enabled: boolean) => {\n    if (enabled) {\n      setActiveWidgets(prev => [...prev, widget]);\n    } else {\n      setActiveWidgets(prev => prev.filter(w => w.id !== widget.id));\n    }\n  }, []);\n\n  const handleWidgetConfigChange = useCallback((widgetId: string, newConfig: Partial<WidgetConfig>) => {\n    setActiveWidgets(prev => prev.map(widget => \n      widget.id === widgetId \n        ? { ...widget, ...newConfig }\n        : widget\n    ));\n  }, []);\n\n  // Data queries for widgets\n  const { data: stats } = useQuery({\n    queryKey: [\"/api/dashboard/stats\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/dashboard/stats\", { credentials: 'include' });\n      if (!response.ok) throw new Error('Failed to fetch stats');\n      return response.json();\n    },\n    refetchInterval: 300000, // 5 minutes\n  });\n\n  const { data: recentCases } = useQuery({\n    queryKey: [\"/api/cases\", { limit: 5 }],\n    queryFn: async () => {\n      const response = await fetch(\"/api/cases?limit=5\", { credentials: 'include' });\n      if (!response.ok) throw new Error('Failed to fetch cases');\n      return response.json() as Promise<CaseWithRelations[]>;\n    },\n    refetchInterval: 120000, // 2 minutes\n  });\n\n  const { data: activityLogs } = useQuery({\n    queryKey: [\"/api/activity-logs\"],\n    queryFn: async () => {\n      const response = await fetch(\"/api/activity-logs\", { credentials: 'include' });\n      if (!response.ok) throw new Error('Failed to fetch activity logs');\n      return response.json() as Promise<ActivityLogWithUser[]>;\n    },\n    refetchInterval: 60000, // 1 minute\n  });\n\n  // Generate chart data from cases\n  const chartData = recentCases ? [\n    { name: 'Novo', value: recentCases.filter(c => c.status === 'novo').length },\n    { name: 'Andamento', value: recentCases.filter(c => c.status === 'andamento').length },\n    { name: 'Conclu√≠do', value: recentCases.filter(c => c.status === 'concluido').length },\n    { name: 'Pendente', value: recentCases.filter(c => c.status === 'pendente').length },\n  ].filter(item => item.value > 0) : undefined;\n\n  const dashboardData = {\n    stats,\n    recentCases,\n    chartData,\n    activityLogs,\n  };\n\n  if (!user) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-border\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard-container min-h-screen bg-gray-50\">\n      <div className=\"max-w-full mx-auto\">\n        <div className=\"mb-6 flex flex-col lg:flex-row lg:items-center justify-between gap-4\">\n          <div>\n            <h1 className=\"text-2xl lg:text-3xl font-bold text-gray-900 mb-2\">Dashboard Personalizado</h1>\n            <p className=\"text-gray-600 text-sm lg:text-base\">Organize seu workspace arrastando e redimensionando os widgets</p>\n          </div>\n          <DashboardCustomizer\n            availableWidgets={AVAILABLE_WIDGETS}\n            activeWidgets={activeWidgets}\n            layout={layouts.lg || []}\n            onWidgetToggle={handleWidgetToggle}\n            onSaveLayout={saveDashboardLayout}\n          />\n        </div>\n\n        <DashboardGrid\n          widgets={activeWidgets}\n          layouts={layouts}\n          onLayoutChange={handleLayoutChange}\n          dashboardData={dashboardData}\n          onNewCase={() => {\n            // Navigate to cases page with new case modal\n            window.location.href = '/cases?new=true';\n          }}\n          onSearchEmployees={() => {\n            // Navigate to cases page with search focus\n            window.location.href = '/cases?search=true';\n          }}\n          onWidgetConfigChange={handleWidgetConfigChange}\n        />\n\n        {isSavingLayout && (\n          <div className=\"fixed bottom-4 right-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg\">\n            <div className=\"flex items-center space-x-2\">\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n              <span>Salvando layout...</span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":9919},"client/src/styles/responsive-cases.css":{"content":"/* Responsive Cases Page Styles */\n\n/* Professional table responsiveness */\n@media (max-width: 1024px) {\n  .cases-table-wrapper {\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch;\n    border-radius: 8px;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  }\n  \n  .cases-table {\n    min-width: 1000px;\n  }\n  \n  .cases-table th,\n  .cases-table td {\n    font-size: 0.875rem;\n    padding: 0.75rem 0.5rem;\n    white-space: nowrap;\n  }\n  \n  .cases-table th:first-child,\n  .cases-table td:first-child {\n    position: sticky;\n    left: 0;\n    background: white;\n    z-index: 2;\n    box-shadow: 2px 0 8px rgba(0,0,0,0.06);\n    border-right: 1px solid #e5e7eb;\n  }\n}\n\n@media (max-width: 768px) {\n  .cases-table th,\n  .cases-table td {\n    font-size: 0.8rem;\n    padding: 0.5rem 0.375rem;\n  }\n  \n  /* Hide less critical columns on mobile */\n  .cases-table .hide-mobile {\n    display: none;\n  }\n  \n  /* Professional mobile layout */\n  .cases-table {\n    min-width: 650px;\n  }\n  \n  /* Compact badges for mobile */\n  .cases-table .badge {\n    font-size: 0.75rem;\n    padding: 0.25rem 0.5rem;\n  }\n}\n\n@media (max-width: 480px) {\n  /* Ultra mobile optimizations */\n  .cases-table {\n    min-width: 600px;\n  }\n  \n  .cases-table th,\n  .cases-table td {\n    font-size: 0.7rem;\n    padding: 0.2rem;\n  }\n  \n  /* Make rows more compact */\n  .cases-table tr {\n    height: auto;\n    min-height: 32px;\n  }\n}\n\n/* Tab responsive improvements */\n.cases-tabs {\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.cases-tabs-list {\n  width: 100%;\n  justify-content: flex-start;\n}\n\n@media (max-width: 640px) {\n  .cases-tabs-trigger {\n    font-size: 0.75rem;\n    padding: 0.5rem 0.75rem;\n    min-width: 80px;\n    flex-shrink: 0;\n  }\n}\n\n/* Process tags responsive */\n.process-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n  max-width: 200px;\n}\n\n@media (max-width: 768px) {\n  .process-tags {\n    max-width: 120px;\n  }\n  \n  .process-tag {\n    font-size: 0.625rem;\n    padding: 0.125rem 0.25rem;\n  }\n}\n\n/* Deadline alerts responsive */\n.deadline-alert {\n  font-size: 0.75rem;\n  padding: 0.25rem 0.5rem;\n}\n\n@media (max-width: 768px) {\n  .deadline-alert {\n    font-size: 0.625rem;\n    padding: 0.125rem 0.375rem;\n  }\n}\n\n/* Filters card responsive improvements */\n.filters-card {\n  margin: 0.5rem;\n}\n\n@media (max-width: 640px) {\n  .filters-card {\n    margin: 0.25rem;\n  }\n  \n  .filters-grid {\n    grid-template-columns: 1fr;\n    gap: 0.75rem;\n  }\n  \n  .filter-label {\n    font-size: 0.75rem;\n    margin-bottom: 0.25rem;\n  }\n  \n  .filter-input {\n    height: 32px;\n    font-size: 0.75rem;\n  }\n}\n\n/* Status badges responsive */\n.status-badge {\n  white-space: nowrap;\n  font-size: 0.75rem;\n}\n\n@media (max-width: 768px) {\n  .status-badge {\n    font-size: 0.625rem;\n    padding: 0.125rem 0.375rem;\n  }\n}\n\n/* Action buttons responsive */\n.action-buttons {\n  display: flex;\n  gap: 0.25rem;\n  flex-wrap: nowrap;\n}\n\n@media (max-width: 640px) {\n  .action-buttons {\n    flex-direction: column;\n    gap: 0.125rem;\n  }\n}\n\n/* Dropdown menu responsive */\n.dropdown-content {\n  min-width: 120px;\n}\n\n@media (max-width: 480px) {\n  .dropdown-content {\n    min-width: 100px;\n    font-size: 0.75rem;\n  }\n}\n\n/* Card content spacing responsive */\n.card-content-responsive {\n  padding: 1rem;\n}\n\n@media (max-width: 768px) {\n  .card-content-responsive {\n    padding: 0.75rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .card-content-responsive {\n    padding: 0.5rem;\n  }\n}\n\n/* Header responsive improvements */\n.page-header {\n  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);\n  padding: 1.5rem;\n  border-radius: 1rem;\n}\n\n@media (max-width: 768px) {\n  .page-header {\n    padding: 1rem;\n    border-radius: 0.75rem;\n  }\n  \n  .page-header h1 {\n    font-size: 1.25rem;\n    margin-bottom: 0.25rem;\n  }\n  \n  .page-header p {\n    font-size: 0.875rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .page-header {\n    padding: 0.75rem;\n    border-radius: 0.5rem;\n  }\n  \n  .page-header h1 {\n    font-size: 1.125rem;\n  }\n  \n  .page-header p {\n    font-size: 0.75rem;\n  }\n}\n\n/* Loading states responsive */\n.loading-skeleton {\n  background: linear-gradient(90deg, #f0f0f0 25%, transparent 37%, #f0f0f0 63%);\n  background-size: 400% 100%;\n  animation: skeleton 1.4s ease-in-out infinite;\n}\n\n@keyframes skeleton {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n}\n\n/* Tab content responsive */\n.tab-content {\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n@media (max-width: 640px) {\n  .tab-content {\n    padding: 0.5rem;\n  }\n}\n\n/* Utility classes */\n.text-responsive {\n  font-size: 0.875rem;\n}\n\n@media (max-width: 768px) {\n  .text-responsive {\n    font-size: 0.75rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .text-responsive {\n    font-size: 0.7rem;\n  }\n}\n\n.button-responsive {\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n}\n\n@media (max-width: 768px) {\n  .button-responsive {\n    padding: 0.375rem 0.75rem;\n    font-size: 0.75rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .button-responsive {\n    padding: 0.25rem 0.5rem;\n    font-size: 0.7rem;\n  }\n}","size_bytes":5047},"client/src/styles/responsive-dashboard.css":{"content":"/* Responsive Dashboard Styles */\n\n/* Base Grid Adjustments */\n.react-grid-layout {\n  position: relative;\n}\n\n.react-grid-item {\n  transition: all 200ms ease;\n  transition-property: left, top, width, height;\n}\n\n.react-grid-item.cssTransforms {\n  transition-property: transform, width, height;\n}\n\n.react-grid-item > .react-resizable-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  bottom: 0;\n  right: 0;\n  background: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"6\" height=\"6\" viewBox=\"0 0 6 6\"><path d=\"m 6,6 0,-6 0,1 -1,0 0,1 -1,0 0,1 -1,0 0,1 -1,0 0,1 -1,0 0,1 z\" fill=\"%23999999\"/></svg>');\n  background-position: bottom right;\n  padding: 0 3px 3px 0;\n  background-repeat: no-repeat;\n  background-origin: content-box;\n  box-sizing: border-box;\n  cursor: se-resize;\n}\n\n/* Widget Container Responsive Improvements */\n.widget-container {\n  height: 100%;\n  overflow: hidden;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  background: white;\n  border: 1px solid #e5e7eb;\n}\n\n/* Mobile Optimizations (xs and xxs) */\n@media (max-width: 768px) {\n  .react-grid-layout {\n    margin: 0 -4px;\n  }\n  \n  .react-grid-item {\n    margin: 6px;\n  }\n  \n  /* Adjust widget content for smaller screens */\n  .widget-container {\n    padding: 12px;\n    min-height: 120px;\n  }\n  \n  /* Make text readable on mobile */\n  .widget-container h3 {\n    font-size: 1rem;\n    margin-bottom: 0.75rem;\n  }\n  \n  /* Readable table view for mobile */\n  .widget-container table {\n    font-size: 0.875rem;\n  }\n  \n  /* Show resize handles on mobile for better UX */\n  .react-grid-item > .react-resizable-handle {\n    display: block;\n    width: 24px;\n    height: 24px;\n  }\n}\n\n/* Tablet Optimizations (sm and md) */\n@media (min-width: 769px) and (max-width: 1199px) {\n  .react-grid-layout {\n    margin: 0 -12px;\n  }\n  \n  .react-grid-item {\n    margin: 8px;\n  }\n  \n  .widget-container {\n    padding: 12px;\n  }\n}\n\n/* Desktop Optimizations (lg) */\n@media (min-width: 1200px) {\n  .react-grid-layout {\n    margin: 0 -16px;\n  }\n  \n  .react-grid-item {\n    margin: 12px;\n  }\n  \n  .widget-container {\n    padding: 16px;\n  }\n}\n\n/* Dashboard Layout Fixes */\n.dashboard-container {\n  min-height: 100vh;\n  padding: 1rem;\n  max-width: 100vw;\n  overflow-x: hidden;\n}\n\n@media (max-width: 640px) {\n  .dashboard-container {\n    padding: 0.5rem;\n  }\n}\n\n/* Widget Content Responsive */\n.widget-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 1rem;\n}\n\n@media (max-width: 480px) {\n  .widget-stats {\n    grid-template-columns: repeat(2, 1fr);\n    gap: 0.5rem;\n  }\n}\n\n.widget-chart {\n  width: 100%;\n  height: 100%;\n  min-height: 200px;\n}\n\n@media (max-width: 768px) {\n  .widget-chart {\n    min-height: 150px;\n  }\n}\n\n/* Quick Actions responsive */\n.quick-actions-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\n  gap: 0.5rem;\n}\n\n@media (max-width: 480px) {\n  .quick-actions-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* Activity Feed responsive */\n.activity-item {\n  padding: 0.5rem;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n@media (max-width: 480px) {\n  .activity-item {\n    padding: 0.25rem;\n    font-size: 0.75rem;\n  }\n}\n\n/* Dragging state improvements */\n.react-grid-item.react-draggable-dragging {\n  transition: none;\n  z-index: 3;\n  opacity: 0.8;\n}\n\n.react-grid-item.resizing {\n  opacity: 0.8;\n  z-index: 3;\n}","size_bytes":3401},"client/src/components/widgets/DeadlineAlertsWidget.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { AlertTriangle, Clock, Calendar, CheckCircle } from \"lucide-react\";\nimport type { WidgetConfig } from \"@shared/schema\";\n\ninterface DeadlineAlert {\n  id: string;\n  processNumber: string;\n  clientName: string;\n  dueDate: string;\n  daysOverdue: number;\n  priority: 'high' | 'medium' | 'low';\n}\n\ninterface DeadlineAlertsWidgetProps {\n  config: WidgetConfig;\n  data?: DeadlineAlert[];\n}\n\nexport default function DeadlineAlertsWidget({ config, data }: DeadlineAlertsWidgetProps) {\n  if (!data) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-sm text-gray-500\">Carregando alertas...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (data.length === 0) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center h-32\">\n          <div className=\"text-center\">\n            <CheckCircle className=\"h-8 w-8 text-green-500 mx-auto mb-2\" />\n            <p className=\"text-sm text-gray-500\">Nenhum prazo em atraso!</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high': return 'bg-red-100 text-red-800 border-red-200';\n      case 'medium': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      case 'low': return 'bg-blue-100 text-blue-800 border-blue-200';\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const getPriorityIcon = (priority: string) => {\n    switch (priority) {\n      case 'high': return AlertTriangle;\n      case 'medium': return Clock;\n      case 'low': return Calendar;\n      default: return Clock;\n    }\n  };\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-1 md:pb-2\">\n        <CardTitle className=\"text-xs md:text-sm font-medium flex items-center space-x-2\">\n          <AlertTriangle className=\"h-4 w-4 text-orange-500\" />\n          <span>{config.title}</span>\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n          {data.slice(0, 5).map((alert) => {\n            const PriorityIcon = getPriorityIcon(alert.priority);\n            return (\n              <div key={alert.id} className=\"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg border\">\n                <div className={`p-1 rounded ${getPriorityColor(alert.priority)}`}>\n                  <PriorityIcon className=\"h-3 w-3\" />\n                </div>\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"text-xs font-medium truncate\">{alert.processNumber}</p>\n                  <p className=\"text-[10px] text-gray-500 truncate\">{alert.clientName}</p>\n                  <div className=\"flex items-center space-x-2 mt-1\">\n                    <Badge variant=\"outline\" className=\"text-[9px] px-1 py-0\">\n                      {alert.daysOverdue > 0 \n                        ? `${alert.daysOverdue} dias em atraso`\n                        : `Vence em ${Math.abs(alert.daysOverdue)} dias`\n                      }\n                    </Badge>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n          {data.length > 5 && (\n            <div className=\"text-center pt-2\">\n              <p className=\"text-xs text-gray-500\">\n                +{data.length - 5} outros alertas\n              </p>\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":3897},"client/src/components/widgets/PerformanceMetricsWidget.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { TrendingUp, Clock, CheckCircle, AlertTriangle } from \"lucide-react\";\nimport type { WidgetConfig } from \"@shared/schema\";\n\ninterface PerformanceMetrics {\n  averageCompletionTime: number;\n  casesSolvedThisMonth: number;\n  pendingCases: number;\n  overduePercentage: number;\n}\n\ninterface PerformanceMetricsWidgetProps {\n  config: WidgetConfig;\n  data?: PerformanceMetrics;\n}\n\nexport default function PerformanceMetricsWidget({ config, data }: PerformanceMetricsWidgetProps) {\n  if (!data) {\n    return (\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-sm font-medium\">{config.title}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-sm text-gray-500\">Carregando m√©tricas...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const metrics = [\n    {\n      label: \"Tempo M√©dio de Conclus√£o\",\n      value: `${data.averageCompletionTime} dias`,\n      icon: Clock,\n      color: \"bg-blue-500\",\n      bgColor: \"bg-blue-50\",\n    },\n    {\n      label: \"Casos Resolvidos (M√™s)\",\n      value: data.casesSolvedThisMonth,\n      icon: CheckCircle,\n      color: \"bg-green-500\",\n      bgColor: \"bg-green-50\",\n    },\n    {\n      label: \"Casos Pendentes\",\n      value: data.pendingCases,\n      icon: TrendingUp,\n      color: \"bg-orange-500\",\n      bgColor: \"bg-orange-50\",\n    },\n    {\n      label: \"Em Atraso\",\n      value: `${data.overduePercentage}%`,\n      icon: AlertTriangle,\n      color: data.overduePercentage > 20 ? \"bg-red-500\" : data.overduePercentage > 10 ? \"bg-yellow-500\" : \"bg-green-500\",\n      bgColor: data.overduePercentage > 20 ? \"bg-red-50\" : data.overduePercentage > 10 ? \"bg-yellow-50\" : \"bg-green-50\",\n    },\n  ];\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader className=\"pb-1 md:pb-2\">\n        <CardTitle className=\"text-xs md:text-sm font-medium\">{config.title}</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 md:gap-3\">\n          {metrics.map((metric) => (\n            <div key={metric.label} className={`p-2 md:p-3 rounded-lg ${metric.bgColor} border`}>\n              <div className=\"flex items-center space-x-2\">\n                <div className={`p-1 rounded ${metric.color}`}>\n                  <metric.icon className=\"h-3 w-3 md:h-4 md:w-4 text-white\" />\n                </div>\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"text-[10px] md:text-xs text-gray-600 truncate\">{metric.label}</p>\n                  <p className=\"text-sm md:text-base font-bold\">{metric.value}</p>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":2868},"client/src/components/EmployeeSelector.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, User, X } from \"lucide-react\";\nimport { Employee } from \"@shared/schema\";\n\ninterface EmployeeSelectorProps {\n  value?: { matricula: string; nome: string } | null;\n  onSelect: (employee: { matricula: string; nome: string } | null) => void;\n  placeholder?: string;\n}\n\nexport default function EmployeeSelector({ value, onSelect, placeholder = \"Buscar por matr√≠cula ou nome...\" }: EmployeeSelectorProps) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [showResults, setShowResults] = useState(false);\n\n  const { data: employees = [], isLoading } = useQuery<Employee[]>({\n    queryKey: [\"/api/employees\", { search: searchTerm }],\n    queryFn: async () => {\n      if (!searchTerm || searchTerm.length < 2) return [];\n      const response = await fetch(`/api/employees?search=${encodeURIComponent(searchTerm)}&limit=10`, {\n        credentials: 'include'\n      });\n      if (!response.ok) throw new Error('Failed to fetch employees');\n      return response.json();\n    },\n    enabled: searchTerm.length >= 2,\n  });\n\n  const handleSelect = (employee: Employee) => {\n    onSelect({\n      matricula: employee.matricula,\n      nome: employee.nome\n    });\n    setSearchTerm(\"\");\n    setShowResults(false);\n  };\n\n  const handleClear = () => {\n    onSelect(null);\n    setSearchTerm(\"\");\n    setShowResults(false);\n  };\n\n  // Mostrar resultados quando h√° busca e resultados\n  useEffect(() => {\n    setShowResults(searchTerm.length >= 2 && employees.length > 0);\n  }, [searchTerm, employees]);\n\n  return (\n    <div className=\"relative\">\n      {value ? (\n        <div className=\"flex items-center space-x-2 p-2 bg-blue-50 border border-blue-200 rounded-lg\">\n          <User className=\"h-4 w-4 text-blue-600\" />\n          <div className=\"flex-1\">\n            <p className=\"text-sm font-medium text-blue-900\">{value.nome}</p>\n            <p className=\"text-xs text-blue-600\">Matr√≠cula: {value.matricula}</p>\n          </div>\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleClear}\n            className=\"h-6 w-6 p-0 text-blue-600 hover:text-blue-800\"\n          >\n            <X className=\"h-3 w-3\" />\n          </Button>\n        </div>\n      ) : (\n        <>\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n            <Input\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder={placeholder}\n              className=\"pl-10\"\n              onFocus={() => {\n                if (searchTerm.length >= 2 && employees.length > 0) {\n                  setShowResults(true);\n                }\n              }}\n            />\n          </div>\n\n          {showResults && (\n            <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto\">\n              {isLoading ? (\n                <div className=\"p-3 text-center text-gray-500\">\n                  Buscando funcion√°rios...\n                </div>\n              ) : employees.length > 0 ? (\n                employees.map((employee) => (\n                  <button\n                    key={employee.id}\n                    type=\"button\"\n                    onClick={() => handleSelect(employee)}\n                    className=\"w-full p-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 focus:outline-none focus:bg-blue-50\"\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{employee.nome}</p>\n                        <p className=\"text-sm text-gray-600\">\n                          Matr√≠cula: {employee.matricula}\n                        </p>\n                        {employee.cargo && (\n                          <p className=\"text-xs text-gray-500\">{employee.cargo}</p>\n                        )}\n                      </div>\n                      <div className=\"flex flex-col items-end space-y-1\">\n                        {employee.empresa && (\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {employee.empresa}\n                          </Badge>\n                        )}\n                        {employee.status && (\n                          <Badge \n                            variant={employee.status === 'ativo' ? 'default' : 'secondary'}\n                            className=\"text-xs\"\n                          >\n                            {employee.status}\n                          </Badge>\n                        )}\n                      </div>\n                    </div>\n                  </button>\n                ))\n              ) : (\n                <div className=\"p-3 text-center text-gray-500\">\n                  Nenhum funcion√°rio encontrado\n                </div>\n              )}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}","size_bytes":5282},"INSTRUCOES-FINAIS.md":{"content":"# üéØ INSTRU√á√ïES FINAIS - INDEPEND√äNCIA TOTAL\n\n## üìÅ ARQUIVO PRINCIPAL\n**`SCRIPT-COMPLETO-SUPABASE.sql`** - Este √© o arquivo que voc√™ precisa!\n\n## üöÄ PASSO A PASSO (2 MINUTOS)\n\n### 1Ô∏è‚É£ EXECUTAR SQL NO SUPABASE\n1. V√° para: **https://supabase.com/dashboard/projects**\n2. Clique no seu projeto\n3. Menu lateral ‚Üí **\"SQL Editor\"**\n4. Clique **\"New Query\"**\n5. **COPIE TODO** o conte√∫do do arquivo `SCRIPT-COMPLETO-SUPABASE.sql`\n6. **COLE** no editor\n7. Clique **\"RUN\"** (bot√£o verde)\n\n### 2Ô∏è‚É£ ATUALIZAR RENDER\n1. V√° para: **https://dashboard.render.com**\n2. Clique no seu servi√ßo\n3. **Environment** (menu lateral)\n4. Edite **`DATABASE_URL`**\n5. **SUBSTITUA** pela nova URL:\n```\npostgresql://postgres:BaseF@cilities2025!@db.dnymyzhahgqnxvkrgmoq.supabase.co:5432/postgres\n```\n6. **Save Changes**\n7. **Manual Deploy**\n\n### 3Ô∏è‚É£ TESTAR SISTEMA\n- Acesse sua URL do Render\n- Login: **admin** / **admin123**\n- Login: **lucas.silva** / **barone13**\n\n## ‚úÖ DADOS MIGRADOS\n\n**üë• Usu√°rios:** 3 (admin completo, lucas.silva sem dashboard, teste.user apenas visualiza√ß√£o)\n**üë®‚Äçüíº Funcion√°rios:** 18 da BASE FACILITIES\n**üìã Casos:** 1 processo jur√≠dico\n**üóÇÔ∏è Estrutura:** Todas as tabelas e √≠ndices\n\n## üéâ RESULTADO FINAL\n\nAp√≥s esses 2 minutos voc√™ ter√°:\n- ‚úÖ Banco 100% SEU no Supabase\n- ‚úÖ Sistema rodando no Render\n- ‚úÖ Dashboard visual no Supabase\n- ‚úÖ Controle total dos dados\n- ‚úÖ Backups autom√°ticos\n- ‚úÖ **INDEPEND√äNCIA TOTAL**\n\n## üîß SE DER ALGUM ERRO\n\n**Erro de caracteres especiais?** Use esta URL alternativa:\n```\npostgresql://postgres:BaseF%40cilities2025%21@db.dnymyzhahgqnxvkrgmoq.supabase.co:5432/postgres\n```\n\n**Erro no SQL?** Execute parte por parte:\n1. Primeiro: s√≥ os CREATE TABLE\n2. Depois: s√≥ os INSERT\n\n## üìû SUPORTE\n\nSe precisar de ajuda:\n1. Me diga qual erro apareceu\n2. Envie print da tela\n3. Confirme que copiou a URL correta\n\n**üèÜ PARAB√âNS! Em poucos minutos voc√™ ter√° total independ√™ncia e controle dos seus dados!**","size_bytes":2000},"MIGRATION-GUIDE.md":{"content":"# Guia de Migra√ß√£o para Banco Pr√≥prio\n\n## Passo 1: Exportar Dados Atuais\n\n```bash\nnode migration-export.js\n```\n\nIsso criar√°:\n- `database-backup.json` - Backup completo em JSON\n- `database-backup.sql` - Script SQL para importa√ß√£o manual\n\n## Passo 2: Criar Novo Banco\n\n### Op√ß√£o A: Supabase (Gratuito)\n1. V√° para [supabase.com](https://supabase.com)\n2. Crie conta gratuita\n3. Crie novo projeto\n4. Copie a Database URL\n\n### Op√ß√£o B: Railway ($5/m√™s)\n1. V√° para [railway.app](https://railway.app)\n2. Crie conta\n3. Deploy PostgreSQL\n4. Copie a Database URL\n\n### Op√ß√£o C: Neon (Gratuito)\n1. V√° para [neon.tech](https://neon.tech)\n2. Crie conta gratuita\n3. Crie database\n4. Copie a Database URL\n\n## Passo 3: Configurar Schema no Novo Banco\n\n```bash\n# Usando a nova DATABASE_URL\nDATABASE_URL=\"sua-nova-url\" npm run db:push\n```\n\n## Passo 4: Importar Dados\n\n```bash\nnode migration-import.js \"sua-nova-database-url\"\n```\n\n## Passo 5: Atualizar Render\n\n1. V√° para o painel do Render\n2. Environment Variables\n3. Atualize `DATABASE_URL` com a nova URL\n4. Deploy novamente\n\n## Dados que Ser√£o Migrados\n\n‚úÖ **Usu√°rios**: admin, lucas.silva e permiss√µes\n‚úÖ **Funcion√°rios**: 19 funcion√°rios da BASE FACILITIES  \n‚úÖ **Casos**: Todos os processos jur√≠dicos\n‚úÖ **Logs**: Hist√≥rico de atividades\n‚úÖ **Configura√ß√µes**: Permiss√µes e layouts\n\n## Benef√≠cios da Migra√ß√£o\n\n- **Independ√™ncia total** do meu banco\n- **Controle completo** dos dados\n- **Backup pr√≥prio** quando quiser\n- **Sem depend√™ncia** de terceiros\n- **Escalabilidade** conforme sua necessidade\n\n## Suporte P√≥s-Migra√ß√£o\n\nAp√≥s a migra√ß√£o, voc√™ ter√°:\n- Scripts de backup/restore\n- Controle total dos dados\n- Flexibilidade para trocar de provedor\n- Capacidade de fazer backups locais\n\n**Tempo estimado**: 15-30 minutos\n**Custo**: Gratuito (Supabase/Neon) ou $5/m√™s (Railway)","size_bytes":1857},"README-RENDER-DEPLOY.md":{"content":"# Deploy no Render - Legal Case Management System\n\n## Configura√ß√£o Autom√°tica\n\nEste sistema est√° otimizado para deployment no Render. Siga estas etapas:\n\n### 1. Configurar Vari√°veis de Ambiente\n\nNo painel do Render, adicione estas vari√°veis:\n\n**DATABASE_URL**\n```\npostgresql://neondb_owner:npg_cENtFV63LasC@ep-proud-sun-adscjpcc.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require\n```\n\n**SESSION_SECRET**\n```\nbase-facilities-legal-2024-secret-key\n```\n\n**NODE_ENV** (opcional - j√° configurado automaticamente)\n```\nproduction\n```\n\n### 2. Comandos de Build e Start\n\n## OP√á√ÉO 1 - Scripts Simples (RECOMENDADO)\n\n**Build Command:**\n```\nnode build-production.js\n```\n\n**Start Command:**\n```\nnode start-production.js\n```\n\n## OP√á√ÉO 2 - Comandos Diretos\n\n**Build Command:**\n```\nnpm install && npx vite build && npx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist\n```\n\n**Start Command:**\n```\nNODE_ENV=production node dist/index.js\n```\n\n## OP√á√ÉO 3 - Com Vari√°veis Expl√≠citas\n\n**Start Command:**\n```\nNODE_ENV=production DATABASE_URL=postgresql://neondb_owner:npg_cENtFV63LasC@ep-proud-sun-adscjpcc.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require SESSION_SECRET=base-facilities-legal-2024-secret-key node dist/index.js\n```\n\n### 3. Configura√ß√£o Alternativa (se scripts personalizados n√£o funcionarem)\n\n**Build Command:**\n```\nnpm install && npx vite build && npx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist\n```\n\n**Start Command:**\n```\nNODE_ENV=production node dist/index.js\n```\n\n### 4. Arquivos de Configura√ß√£o Inclusos\n\n- `render-build.js` - Script personalizado de build\n- `render-start.js` - Script personalizado de inicializa√ß√£o  \n- `render.yaml` - Configura√ß√£o autom√°tica do Render\n- `build.sh` - Script alternativo de build\n\n### 5. Features do Sistema\n\n‚úÖ Autentica√ß√£o com sess√µes seguras\n‚úÖ Gerenciamento de casos jur√≠dicos\n‚úÖ Dashboard analytics em tempo real\n‚úÖ Gest√£o de funcion√°rios com 40k+ registros\n‚úÖ Logs de atividade completos\n‚úÖ Interface responsiva em portugu√™s\n\n### 6. Contas de Teste\n\n- **Admin**: admin / admin123\n- **Limitado**: lucas.silva / barone13\n\n### 7. Troubleshooting\n\nSe o build falhar:\n\n1. Verifique se todas as vari√°veis de ambiente est√£o configuradas\n2. Use os comandos alternativos listados na se√ß√£o 3\n3. Verifique os logs do Render para erros espec√≠ficos\n\nO sistema est√° configurado para funcionar automaticamente no Render com estas configura√ß√µes.","size_bytes":2516},"build-production.js":{"content":"// Production build script for Render\nconst { execSync } = require('child_process');\n\nconsole.log('Installing dependencies...');\nexecSync('npm install', { stdio: 'inherit' });\n\nconsole.log('Building frontend...');\nexecSync('npx vite build', { stdio: 'inherit' });\n\nconsole.log('Building backend...');\nexecSync('npx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist', { stdio: 'inherit' });\n\nconsole.log('Build complete!');","size_bytes":468},"build.sh":{"content":"#!/bin/bash\nset -e\n\necho \"Installing dependencies...\"\nnpm install\n\necho \"Building frontend with Vite...\"\nnpx vite build\n\necho \"Building backend with esbuild...\"\nnpx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist\n\necho \"Build completed successfully!\"","size_bytes":298},"final-migration-instructions.md":{"content":"# INSTRU√á√ïES FINAIS - MIGRA√á√ÉO PARA SEU SUPABASE\n\n## üéØ OBJETIVO\nMigrar todos os dados para SEU banco Supabase, alcan√ßando independ√™ncia total.\n\n## üìã PASSO A PASSO SIMPLES\n\n### 1. Executar SQL no Painel Supabase\n1. Abra: **https://supabase.com/dashboard/projects**\n2. Clique no seu projeto\n3. Menu lateral ‚Üí **SQL Editor**\n4. **New Query**\n5. Cole TODO o conte√∫do do arquivo `supabase-manual-setup.sql`\n6. Clique **RUN**\n\n### 2. Configurar URL no Render\nSua nova DATABASE_URL para o Render:\n```\npostgresql://postgres:BaseF@cilities2025!@db.dnymyzhahgqnxvkrgmoq.supabase.co:5432/postgres\n```\n\n**IMPORTANTE**: Se der erro de caracteres especiais, use esta vers√£o codificada:\n```\npostgresql://postgres:BaseF%40cilities2025%21@db.dnymyzhahgqnxvkrgmoq.supabase.co:5432/postgres\n```\n\n### 3. Atualize Render\n1. Painel Render ‚Üí Environment Variables\n2. Edite `DATABASE_URL`\n3. Cole a nova URL\n4. **Save Changes**\n5. **Manual Deploy**\n\n## ‚úÖ DADOS QUE SER√ÉO MIGRADOS\n\n**Usu√°rios:**\n- admin / admin123 (acesso total)\n- lucas.silva / barone13 (sem dashboard)\n- teste.user / [senha hash] (apenas visualiza√ß√£o)\n\n**Funcion√°rios:** 18 da BASE FACILITIES\n**Casos:** 1 processo jur√≠dico\n**Estrutura:** Todas as tabelas e √≠ndices\n\n## üéâ RESULTADO FINAL\n\nAp√≥s a migra√ß√£o voc√™ ter√°:\n- ‚úÖ Banco 100% SEU no Supabase\n- ‚úÖ Dashboard visual para ver/editar dados\n- ‚úÖ Controle total dos dados\n- ‚úÖ Backups autom√°ticos\n- ‚úÖ Sistema funcionando no Render\n- ‚úÖ INDEPEND√äNCIA TOTAL\n\n## üîß SE DER ALGUM PROBLEMA\n\n1. **Erro de conex√£o**: Aguarde 2-3 minutos (Supabase pode estar finalizando setup)\n2. **Erro de caracteres**: Use a URL codificada (com %40 e %21)\n3. **Erro no SQL**: Execute parte por parte (primeiro CREATE TABLE, depois INSERT)\n\n## üìû PR√ìXIMOS PASSOS\n\n1. Execute o SQL no Supabase\n2. Atualize a URL no Render\n3. Teste o login: admin/admin123\n4. Confirme que tudo funciona\n\n**PRONTO! Voc√™ ter√° independ√™ncia total e controle completo dos seus dados!**","size_bytes":1986},"fix-production-build.js":{"content":"#!/usr/bin/env node\n\n// Build script para corrigir problemas de produ√ß√£o\nconst { execSync } = require('child_process');\nconst fs = require('fs');\n\nconsole.log('üîß Iniciando build corrigido para produ√ß√£o...');\n\n// Executar build normal\nexecSync('npm run build', { stdio: 'inherit' });\n\n// Ler o arquivo compilado\nconst distPath = './dist/index.js';\nlet content = fs.readFileSync(distPath, 'utf8');\n\n// Verificar se a fun√ß√£o hashPassword est√° presente\nconst hashPasswordExists = content.includes('async function hashPassword');\nconsole.log(`hashPassword presente: ${hashPasswordExists}`);\n\n// Se n√£o estiver presente, adicionar manualmente\nif (!hashPasswordExists) {\n  console.log('‚ö†Ô∏è  Fun√ß√£o hashPassword n√£o encontrada, adicionando...');\n  \n  const hashPasswordCode = `\n// Password hashing function\nconst crypto = require('crypto');\nconst util = require('util');\nconst scryptAsync = util.promisify(crypto.scrypt);\n\nasync function hashPassword(password) {\n  const salt = crypto.randomBytes(16).toString(\"hex\");\n  const buf = await scryptAsync(password, salt, 64);\n  return \\`\\${buf.toString(\"hex\")}.\\${salt}\\`;\n}\n`;\n  \n  // Inserir no in√≠cio do arquivo ap√≥s os imports\n  const importEndIndex = content.indexOf('// Authentication middleware') || content.indexOf('function isAuthenticated');\n  if (importEndIndex > -1) {\n    content = content.slice(0, importEndIndex) + hashPasswordCode + '\\n' + content.slice(importEndIndex);\n    fs.writeFileSync(distPath, content);\n    console.log('‚úÖ Fun√ß√£o hashPassword adicionada ao build de produ√ß√£o');\n  }\n}\n\n// Verificar novamente\nconst finalContent = fs.readFileSync(distPath, 'utf8');\nconst finalCheck = finalContent.includes('async function hashPassword');\nconsole.log(`Verifica√ß√£o final - hashPassword presente: ${finalCheck}`);\n\nif (finalCheck) {\n  console.log('üéâ Build de produ√ß√£o corrigido com sucesso!');\n} else {\n  console.log('‚ùå Falha ao corrigir build de produ√ß√£o');\n  process.exit(1);\n}","size_bytes":1972},"migration-export.js":{"content":"// Script para exportar todos os dados do banco atual\nimport { db } from './server/db.ts';\nimport { users, cases, employees, activityLog } from './shared/schema.ts';\nimport fs from 'fs';\n\nasync function exportData() {\n  try {\n    console.log('üì§ Exportando dados do banco atual...');\n    \n    // Exportar usu√°rios\n    const usersData = await db.select().from(users);\n    console.log(`‚úÖ ${usersData.length} usu√°rios exportados`);\n    \n    // Exportar casos\n    const casesData = await db.select().from(cases);\n    console.log(`‚úÖ ${casesData.length} casos exportados`);\n    \n    // Exportar funcion√°rios\n    const employeesData = await db.select().from(employees);\n    console.log(`‚úÖ ${employeesData.length} funcion√°rios exportados`);\n    \n    // Exportar logs de atividade\n    const logsData = await db.select().from(activityLog);\n    console.log(`‚úÖ ${logsData.length} logs exportados`);\n    \n    // Salvar em arquivo JSON\n    const exportData = {\n      users: usersData,\n      cases: casesData,\n      employees: employeesData,\n      activityLog: logsData,\n      exportDate: new Date().toISOString(),\n      version: '1.0'\n    };\n    \n    fs.writeFileSync('database-backup.json', JSON.stringify(exportData, null, 2));\n    console.log('üíæ Backup salvo em database-backup.json');\n    \n    // Criar SQL tamb√©m\n    let sqlScript = '-- Backup do banco de dados\\n\\n';\n    \n    // SQL para usu√°rios\n    sqlScript += '-- USU√ÅRIOS\\n';\n    usersData.forEach(user => {\n      sqlScript += `INSERT INTO users (id, username, email, password, first_name, last_name, role, permissions, created_at) VALUES ('${user.id}', '${user.username}', ${user.email ? `'${user.email}'` : 'NULL'}, '${user.password}', ${user.firstName ? `'${user.firstName}'` : 'NULL'}, ${user.lastName ? `'${user.lastName}'` : 'NULL'}, '${user.role}', '${JSON.stringify(user.permissions).replace(/'/g, \"''\")}', '${user.createdAt}');\\n`;\n    });\n    \n    sqlScript += '\\n-- FUNCION√ÅRIOS\\n';\n    employeesData.forEach(emp => {\n      sqlScript += `INSERT INTO employees (id, matricula, nome, rg, pis, empresa, data_admissao, data_demissao, salario, cargo, centro_custo, departamento) VALUES ('${emp.id}', '${emp.matricula}', '${emp.nome}', ${emp.rg ? `'${emp.rg}'` : 'NULL'}, ${emp.pis ? `'${emp.pis}'` : 'NULL'}, ${emp.empresa ? `'${emp.empresa}'` : 'NULL'}, ${emp.dataAdmissao ? `'${emp.dataAdmissao}'` : 'NULL'}, ${emp.dataDemissao ? `'${emp.dataDemissao}'` : 'NULL'}, ${emp.salario ? `'${emp.salario}'` : 'NULL'}, ${emp.cargo ? `'${emp.cargo}'` : 'NULL'}, ${emp.centroCusto ? `'${emp.centroCusto}'` : 'NULL'}, ${emp.departamento ? `'${emp.departamento}'` : 'NULL'});\\n`;\n    });\n    \n    fs.writeFileSync('database-backup.sql', sqlScript);\n    console.log('üíæ SQL backup salvo em database-backup.sql');\n    \n    console.log('\\nüéâ Export completo! Arquivos criados:');\n    console.log('  - database-backup.json (formato JSON)');\n    console.log('  - database-backup.sql (formato SQL)');\n    \n  } catch (error) {\n    console.error('‚ùå Erro no export:', error);\n  }\n}\n\nexportData();","size_bytes":3057},"migration-import.js":{"content":"// Script para importar dados para novo banco\nimport fs from 'fs';\n\nasync function importData(newDatabaseUrl) {\n  try {\n    console.log('üì• Importando dados para novo banco...');\n    \n    // Ler backup\n    const backupData = JSON.parse(fs.readFileSync('database-backup.json', 'utf8'));\n    \n    // Configurar conex√£o com novo banco\n    process.env.DATABASE_URL = newDatabaseUrl;\n    const { db } = await import('./server/db.ts');\n    const { users, cases, employees, activityLog } = await import('./shared/schema.ts');\n    \n    // Importar usu√°rios\n    if (backupData.users.length > 0) {\n      await db.insert(users).values(backupData.users);\n      console.log(`‚úÖ ${backupData.users.length} usu√°rios importados`);\n    }\n    \n    // Importar funcion√°rios\n    if (backupData.employees.length > 0) {\n      await db.insert(employees).values(backupData.employees);\n      console.log(`‚úÖ ${backupData.employees.length} funcion√°rios importados`);\n    }\n    \n    // Importar casos\n    if (backupData.cases.length > 0) {\n      await db.insert(cases).values(backupData.cases);\n      console.log(`‚úÖ ${backupData.cases.length} casos importados`);\n    }\n    \n    // Importar logs\n    if (backupData.activityLog.length > 0) {\n      await db.insert(activityLog).values(backupData.activityLog);\n      console.log(`‚úÖ ${backupData.activityLog.length} logs importados`);\n    }\n    \n    console.log('üéâ Import completo!');\n    \n  } catch (error) {\n    console.error('‚ùå Erro no import:', error);\n  }\n}\n\n// Usar: node migration-import.js \"sua-nova-database-url\"\nconst newUrl = process.argv[2];\nif (!newUrl) {\n  console.log('‚ùå Por favor forne√ßa a nova DATABASE_URL:');\n  console.log('node migration-import.js \"postgresql://user:pass@host/db\"');\n  process.exit(1);\n}\n\nimportData(newUrl);","size_bytes":1784},"render-build-fixed.js":{"content":"#!/usr/bin/env node\n\n// Build script otimizado para Render\nconst { execSync } = require('child_process');\nconst fs = require('fs');\n\nconsole.log('üöÄ Build para Render - Vers√£o Corrigida');\n\ntry {\n  // 1. Clean build\n  console.log('üßπ Limpando builds anteriores...');\n  if (fs.existsSync('./dist')) {\n    fs.rmSync('./dist', { recursive: true, force: true });\n  }\n  \n  // 2. Build frontend\n  console.log('‚öõÔ∏è  Construindo frontend...');\n  execSync('npx vite build', { stdio: 'inherit' });\n  \n  // 3. Build backend com configura√ß√£o especial\n  console.log('üîß Construindo backend...');\n  execSync('npx esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist --sourcemap=false --minify=false', { stdio: 'inherit' });\n  \n  // 4. Verificar e corrigir fun√ß√£o hashPassword\n  const distPath = './dist/index.js';\n  let content = fs.readFileSync(distPath, 'utf8');\n  \n  if (!content.includes('async function hashPassword')) {\n    console.log('‚ö†Ô∏è  Adicionando fun√ß√£o hashPassword...');\n    \n    const hashPasswordFunction = `\nimport { scrypt, randomBytes } from 'crypto';\nimport { promisify } from 'util';\n\nconst scryptAsync = promisify(scrypt);\n\nasync function hashPassword(password) {\n  const salt = randomBytes(16).toString(\"hex\");\n  const buf = await scryptAsync(password, salt, 64);\n  return \\`\\${buf.toString(\"hex\")}.\\${salt}\\`;\n}\n`;\n    \n    // Encontrar onde inserir a fun√ß√£o\n    const insertPoint = content.indexOf('// Authentication middleware') || content.indexOf('function isAuthenticated');\n    if (insertPoint > -1) {\n      content = content.slice(0, insertPoint) + hashPasswordFunction + '\\n' + content.slice(insertPoint);\n      fs.writeFileSync(distPath, content);\n      console.log('‚úÖ Fun√ß√£o hashPassword inserida');\n    }\n  }\n  \n  // 5. Verifica√ß√£o final\n  const finalContent = fs.readFileSync(distPath, 'utf8');\n  const hasHashPassword = finalContent.includes('hashPassword');\n  \n  console.log(`Verifica√ß√£o final: ${hasHashPassword ? '‚úÖ' : '‚ùå'} hashPassword`);\n  \n  if (hasHashPassword) {\n    console.log('üéâ Build completo e corrigido!');\n  } else {\n    throw new Error('Falha na verifica√ß√£o da fun√ß√£o hashPassword');\n  }\n  \n} catch (error) {\n  console.error('‚ùå Erro no build:', error.message);\n  process.exit(1);\n}","size_bytes":2305},"render-build.js":{"content":"#!/usr/bin/env node\n\nimport { spawn } from 'child_process';\nimport { fileURLToPath } from 'url';\nimport { dirname } from 'path';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\nconsole.log('üöÄ Starting Render build process...');\n\nfunction runCommand(command, args, options = {}) {\n  return new Promise((resolve, reject) => {\n    console.log(`üì¶ Running: ${command} ${args.join(' ')}`);\n    const child = spawn(command, args, {\n      stdio: 'inherit',\n      shell: true,\n      ...options\n    });\n\n    child.on('close', (code) => {\n      if (code === 0) {\n        resolve();\n      } else {\n        reject(new Error(`Command failed with exit code ${code}`));\n      }\n    });\n  });\n}\n\nasync function build() {\n  try {\n    console.log('üì• Installing dependencies...');\n    await runCommand('npm', ['install']);\n\n    console.log('üèóÔ∏è Building frontend with Vite...');\n    await runCommand('npx', ['vite', 'build']);\n\n    console.log('‚ö° Building backend with esbuild...');\n    await runCommand('npx', ['esbuild', 'server/index.ts', '--platform=node', '--packages=external', '--bundle', '--format=esm', '--outdir=dist']);\n\n    console.log('‚úÖ Build completed successfully!');\n  } catch (error) {\n    console.error('‚ùå Build failed:', error.message);\n    process.exit(1);\n  }\n}\n\nbuild();","size_bytes":1336},"render-simple-start.js":{"content":"#!/usr/bin/env node\n\n// Simple start script for Render deployment\nconsole.log('üöÄ Starting Legal Case Management System...');\n\n// Ensure production environment\nprocess.env.NODE_ENV = 'production';\n\n// Set fallback values for missing environment variables\nif (!process.env.DATABASE_URL) {\n  console.log('‚ö†Ô∏è  DATABASE_URL not found, setting from backup...');\n  process.env.DATABASE_URL = 'postgresql://neondb_owner:npg_cENtFV63LasC@ep-proud-sun-adscjpcc.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require';\n}\n\nif (!process.env.SESSION_SECRET) {\n  console.log('‚ö†Ô∏è  SESSION_SECRET not found, setting fallback...');\n  process.env.SESSION_SECRET = 'base-facilities-legal-2024-secret-key-render-deployment';\n}\n\nconsole.log('‚úÖ Environment configured:');\nconsole.log('- NODE_ENV:', process.env.NODE_ENV);\nconsole.log('- DATABASE_URL:', process.env.DATABASE_URL ? 'Set ‚úì' : 'Missing ‚úó');\nconsole.log('- SESSION_SECRET:', process.env.SESSION_SECRET ? 'Set ‚úì' : 'Missing ‚úó');\n\n// Start the application\nconsole.log('üéØ Starting server...');\n\nimport('./dist/index.js')\n  .then(() => {\n    console.log('‚úÖ Server started successfully!');\n  })\n  .catch((error) => {\n    console.error('‚ùå Failed to start server:', error);\n    process.exit(1);\n  });","size_bytes":1256},"render-start.js":{"content":"#!/usr/bin/env node\n\nimport { spawn } from 'child_process';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconsole.log('üöÄ Starting Legal Case Management System...');\nconsole.log('üìç Environment:', process.env.NODE_ENV || 'development');\n\n// Set production environment\nprocess.env.NODE_ENV = 'production';\n\n// Check and log all environment variables\nconsole.log('üîç Environment variables check:');\nconsole.log('NODE_ENV:', process.env.NODE_ENV);\nconsole.log('DATABASE_URL:', process.env.DATABASE_URL ? '‚úÖ Set' : '‚ùå Missing');\nconsole.log('SESSION_SECRET:', process.env.SESSION_SECRET ? '‚úÖ Set' : '‚ùå Missing');\n\n// Set fallback SESSION_SECRET if not provided\nif (!process.env.SESSION_SECRET) {\n  console.log('‚ö†Ô∏è  Setting fallback SESSION_SECRET');\n  process.env.SESSION_SECRET = 'base-facilities-legal-2024-secret-key';\n}\n\n// Check required environment variables\nconst requiredEnvVars = ['DATABASE_URL'];\nconst missingVars = requiredEnvVars.filter(varName => !process.env[varName]);\n\nif (missingVars.length > 0) {\n  console.error('‚ùå Missing required environment variables:');\n  missingVars.forEach(varName => {\n    console.error(`   - ${varName}: ${process.env[varName] || 'undefined'}`);\n  });\n  console.error('üîß Please set these variables in your Render dashboard');\n  process.exit(1);\n}\n\n// Start the server\nconst serverPath = path.join(__dirname, 'dist', 'index.js');\nconsole.log(`üéØ Starting server from: ${serverPath}`);\n\nconst server = spawn('node', [serverPath], {\n  stdio: 'inherit',\n  env: process.env\n});\n\nserver.on('close', (code) => {\n  console.log(`Server process exited with code ${code}`);\n  process.exit(code);\n});\n\nserver.on('error', (error) => {\n  console.error('‚ùå Failed to start server:', error);\n  process.exit(1);\n});\n\n// Handle graceful shutdown\nprocess.on('SIGTERM', () => {\n  console.log('üì¥ Received SIGTERM, shutting down gracefully...');\n  server.kill('SIGTERM');\n});\n\nprocess.on('SIGINT', () => {\n  console.log('üì¥ Received SIGINT, shutting down gracefully...');\n  server.kill('SIGINT');\n});","size_bytes":2163},"render-update-guide.md":{"content":"# COMO ATUALIZAR O RENDER - PASSO A PASSO\n\n## üéØ OBJETIVO\nConectar seu app no Render ao novo banco Supabase.\n\n## üìã PASSOS EXATOS\n\n### 1. Acesse o Painel do Render\n1. V√° para: **https://dashboard.render.com**\n2. Fa√ßa login na sua conta\n3. Encontre seu servi√ßo do sistema jur√≠dico\n4. Clique no nome do servi√ßo\n\n### 2. Atualize Environment Variables\n1. No painel do servi√ßo, clique em **\"Environment\"** (menu lateral)\n2. Procure a vari√°vel **`DATABASE_URL`**\n3. Clique no √≠cone de **editar** (l√°pis) ao lado\n4. **APAGUE** a URL antiga completamente\n5. **COLE** a nova URL do Supabase:\n\n```\npostgresql://postgres:BaseF@cilities2025!@db.dnymyzhahgqnxvkrgmoq.supabase.co:5432/postgres\n```\n\n### 3. Salvar e Deploy\n1. Clique **\"Save Changes\"**\n2. Aguarde a confirma√ß√£o (alguns segundos)\n3. Clique **\"Manual Deploy\"** (bot√£o azul no topo)\n4. Aguarde o deploy completar (2-3 minutos)\n\n### 4. Teste o Sistema\n1. Acesse sua URL do Render\n2. Teste login: **admin** / **admin123**\n3. Verifique se os funcion√°rios aparecem\n4. Confirme que tudo funciona\n\n## ‚ö†Ô∏è SE DER ERRO DE CARACTERES ESPECIAIS\n\nUse esta URL alternativa (com caracteres codificados):\n```\npostgresql://postgres:BaseF%40cilities2025%21@db.dnymyzhahgqnxvkrgmoq.supabase.co:5432/postgres\n```\n\n## ‚úÖ SINAIS DE SUCESSO\n\n- ‚úÖ Login funciona (admin/admin123)\n- ‚úÖ Dashboard carrega\n- ‚úÖ Funcion√°rios aparecem na busca\n- ‚úÖ Casos jur√≠dicos s√£o exibidos\n- ‚úÖ Sem erros de conex√£o\n\n## üéâ INDEPEND√äNCIA ALCAN√áADA!\n\nAp√≥s seguir esses passos:\n- Seu sistema roda com SEU banco Supabase\n- Voc√™ tem controle total dos dados\n- Pode fazer backup quando quiser\n- N√£o depende mais de terceiros\n- Dashboard visual no Supabase para gerenciar dados\n\n**PARAB√âNS! Sistema 100% independente funcionando!**","size_bytes":1771},"render.yaml":{"content":"services:\n  - type: web\n    name: legal-case-management\n    env: node\n    plan: free\n    buildCommand: node render-build.js\n    startCommand: node render-start.js\n    envVars:\n      - key: NODE_ENV\n        value: production\n      - key: DATABASE_URL\n        sync: false\n      - key: SESSION_SECRET\n        sync: false","size_bytes":317},"start-production.js":{"content":"// Production start script - simplified for Render\nprocess.env.NODE_ENV = 'production';\nprocess.env.DATABASE_URL = process.env.DATABASE_URL || 'postgresql://neondb_owner:npg_cENtFV63LasC@ep-proud-sun-adscjpcc.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require';\nprocess.env.SESSION_SECRET = process.env.SESSION_SECRET || 'base-facilities-legal-2024-secret-key';\n\nconsole.log('Starting server...');\nimport('./dist/index.js');","size_bytes":424},"supabase-instructions.md":{"content":"# INSTRU√á√ïES PARA SUPABASE - PASSO A PASSO\n\n## PROBLEMA\nA string de conex√£o est√° com erro. Isso pode ser porque:\n1. O projeto ainda est√° sendo provisionado (aguarde 2-3 minutos)\n2. A senha tem caracteres especiais que precisam ser codificados\n3. A URL precisa ser copiada de um local diferente\n\n## SOLU√á√ÉO MANUAL (MAIS SEGURA)\n\n### 1. Execute o SQL no Painel Web\n1. V√° para: **https://supabase.com/dashboard/projects**\n2. Clique no seu projeto `legal-case-management`\n3. No menu lateral, clique em **\"SQL Editor\"**\n4. Clique em **\"New Query\"**\n5. Cole TODO o conte√∫do do arquivo `supabase-manual-setup.sql`\n6. Clique **\"Run\"**\n\n### 2. Copie a URL Correta\n1. No painel do Supabase, v√° em **Settings** ‚Üí **Database**\n2. Na se√ß√£o **\"Connection parameters\"**, copie:\n   - Host: `aws-0-us-east-1.pooler.supabase.com`\n   - Database: `postgres`\n   - Port: `6543`\n   - User: `postgres.kxqyldwhcfzhbnpfdcjl`\n   - Password: `BaseF@cilities2025!`\n\n3. Monte a URL assim:\n   ```\n   postgresql://postgres.kxqyldwhcfzhbnpfdcjl:BaseF%40cilities2025%21@aws-0-us-east-1.pooler.supabase.com:6543/postgres\n   ```\n   \n   **ATEN√á√ÉO**: O `@` vira `%40` e o `!` vira `%21`\n\n### 3. Teste no Replit\nTeste se a nova URL funciona:\n```bash\nDATABASE_URL=\"postgresql://postgres.kxqyldwhcfzhbnpfdcjl:BaseF%40cilities2025%21@aws-0-us-east-1.pooler.supabase.com:6543/postgres\" npm run db:push\n```\n\n### 4. Atualize o Render\n1. Painel do Render ‚Üí Environment Variables\n2. Edite `DATABASE_URL`\n3. Cole a nova URL (com %40 e %21)\n4. Save ‚Üí Manual Deploy\n\n## RESULTADOS ESPERADOS\n\nAp√≥s executar o SQL, voc√™ deve ver:\n- 3 usu√°rios (admin, lucas.silva, roberto.santos)\n- 18 funcion√°rios da BASE FACILITIES\n- 1 caso jur√≠dico\n- Estrutura completa das tabelas\n\n## CREDENCIAIS DE TESTE\n- **Admin**: admin / admin123\n- **Editor**: lucas.silva / barone13\n\n## ‚úÖ INDEPEND√äNCIA TOTAL ALCAN√áADA!\nDepois dessa migra√ß√£o:\n- Banco 100% seu no Supabase\n- Dashboard visual para gerenciar dados\n- Backups autom√°ticos\n- Sem depend√™ncia de terceiros\n- Controle total dos dados","size_bytes":2049},"supabase-migrate-pg.js":{"content":"// Migra√ß√£o usando pg padr√£o\nimport pg from 'pg';\nimport fs from 'fs';\n\nconst { Pool } = pg;\n\nconst SUPABASE_URL = \"postgresql://postgres:BaseF@cilities2025!@db.dnymyzhahgqnxvkrgmoq.supabase.co:5432/postgres\";\n\nasync function migrateToSupabase() {\n  let pool;\n  try {\n    console.log('üöÄ Iniciando migra√ß√£o para Supabase...');\n    \n    // Conectar ao Supabase\n    pool = new Pool({ \n      connectionString: SUPABASE_URL,\n      ssl: { rejectUnauthorized: false }\n    });\n    \n    // Testar conex√£o\n    console.log('üîó Testando conex√£o...');\n    await pool.query('SELECT 1');\n    console.log('‚úÖ Conex√£o com Supabase estabelecida!');\n    \n    // Ler dados do backup\n    const backupData = JSON.parse(fs.readFileSync('database-backup.json', 'utf8'));\n    console.log('üìñ Backup carregado:', {\n      users: backupData.users.length,\n      cases: backupData.cases.length,\n      employees: backupData.employees.length\n    });\n    \n    // Criar tabelas primeiro\n    console.log('üìã Criando estrutura das tabelas...');\n    \n    // Criar tabela users\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS users (\n        id VARCHAR PRIMARY KEY,\n        username VARCHAR UNIQUE NOT NULL,\n        email VARCHAR,\n        password VARCHAR NOT NULL,\n        first_name VARCHAR,\n        last_name VARCHAR,\n        role VARCHAR DEFAULT 'editor',\n        permissions JSONB DEFAULT '{}',\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      );\n    `);\n    \n    // Criar tabela employees\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS employees (\n        id VARCHAR PRIMARY KEY,\n        matricula VARCHAR UNIQUE NOT NULL,\n        nome VARCHAR NOT NULL,\n        rg VARCHAR,\n        pis VARCHAR,\n        empresa VARCHAR,\n        data_admissao DATE,\n        data_demissao DATE,\n        salario DECIMAL,\n        cargo VARCHAR,\n        centro_custo VARCHAR,\n        departamento VARCHAR,\n        deleted_at TIMESTAMP\n      );\n    `);\n    \n    // Criar tabela cases\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS cases (\n        id VARCHAR PRIMARY KEY,\n        matricula VARCHAR NOT NULL,\n        nome VARCHAR NOT NULL,\n        processo TEXT,\n        prazo_entrega DATE,\n        audiencia DATE,\n        status VARCHAR DEFAULT 'novo',\n        data_entrega DATE,\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      );\n    `);\n    \n    // Criar tabela activity_log\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS activity_log (\n        id VARCHAR PRIMARY KEY,\n        user_id VARCHAR,\n        action VARCHAR NOT NULL,\n        description TEXT,\n        ip_address VARCHAR,\n        user_agent TEXT,\n        created_at TIMESTAMP DEFAULT NOW()\n      );\n    `);\n    \n    // Criar tabela sessions\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS sessions (\n        sid VARCHAR PRIMARY KEY,\n        sess JSONB NOT NULL,\n        expire TIMESTAMP NOT NULL\n      );\n    `);\n    \n    await pool.query(`\n      CREATE INDEX IF NOT EXISTS IDX_session_expire ON sessions (expire);\n    `);\n    \n    console.log('‚úÖ Estrutura das tabelas criada!');\n    \n    // Limpar dados existentes\n    await pool.query('DELETE FROM users');\n    await pool.query('DELETE FROM employees');\n    await pool.query('DELETE FROM cases');\n    await pool.query('DELETE FROM activity_log');\n    \n    // Inserir usu√°rios\n    console.log('üì• Inserindo usu√°rios...');\n    for (const user of backupData.users) {\n      await pool.query(`\n        INSERT INTO users (id, username, email, password, first_name, last_name, role, permissions, created_at, updated_at)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n      `, [\n        user.id, user.username, user.email, user.password,\n        user.firstName, user.lastName, user.role,\n        JSON.stringify(user.permissions), user.createdAt, user.updatedAt\n      ]);\n    }\n    console.log(`‚úÖ ${backupData.users.length} usu√°rios inseridos`);\n    \n    // Inserir funcion√°rios\n    console.log('üì• Inserindo funcion√°rios...');\n    for (const emp of backupData.employees) {\n      await pool.query(`\n        INSERT INTO employees (id, matricula, nome, rg, pis, empresa, data_admissao, data_demissao, salario, cargo, centro_custo, departamento)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12)\n      `, [\n        emp.id, emp.matricula, emp.nome, emp.rg, emp.pis, emp.empresa,\n        emp.dataAdmissao, emp.dataDemissao, emp.salario, emp.cargo,\n        emp.centroCusto, emp.departamento\n      ]);\n    }\n    console.log(`‚úÖ ${backupData.employees.length} funcion√°rios inseridos`);\n    \n    // Inserir casos\n    console.log('üì• Inserindo casos...');\n    for (const caso of backupData.cases) {\n      await pool.query(`\n        INSERT INTO cases (id, matricula, nome, processo, prazo_entrega, audiencia, status, data_entrega, created_at, updated_at)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n      `, [\n        caso.id, caso.matricula, caso.nome, caso.processo,\n        caso.prazoEntrega, caso.audiencia, caso.status, caso.dataEntrega,\n        caso.createdAt, caso.updatedAt\n      ]);\n    }\n    console.log(`‚úÖ ${backupData.cases.length} casos inseridos`);\n    \n    // Verificar dados inseridos\n    const userCount = await pool.query('SELECT COUNT(*) FROM users');\n    const employeeCount = await pool.query('SELECT COUNT(*) FROM employees');\n    const caseCount = await pool.query('SELECT COUNT(*) FROM cases');\n    \n    console.log('\\nüéâ MIGRA√á√ÉO COMPLETA!');\n    console.log('üìä Dados no Supabase:');\n    console.log(`   üë• Usu√°rios: ${userCount.rows[0].count}`);\n    console.log(`   üë®‚Äçüíº Funcion√°rios: ${employeeCount.rows[0].count}`);\n    console.log(`   üìã Casos: ${caseCount.rows[0].count}`);\n    \n    console.log('\\nüîó PR√ìXIMOS PASSOS:');\n    console.log('1. Atualize DATABASE_URL no Render');\n    console.log('2. Fa√ßa deploy no Render');\n    console.log('3. Teste: admin/admin123');\n    console.log('\\n‚úÖ VOC√ä AGORA TEM TOTAL INDEPEND√äNCIA!');\n    \n  } catch (error) {\n    console.error('‚ùå Erro na migra√ß√£o:', error);\n  } finally {\n    if (pool) await pool.end();\n  }\n}\n\nmigrateToSupabase();","size_bytes":6182},"supabase-migrate.js":{"content":"// Script espec√≠fico para migra√ß√£o Supabase\nimport { Pool } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport fs from 'fs';\nimport * as schema from './shared/schema.ts';\n\nconst SUPABASE_URL = \"postgresql://postgres.kxqyldwhcfzhbnpfdcjl:BaseF@cilities2025!@aws-0-us-east-1.pooler.supabase.com:6543/postgres\";\n\nasync function migrateToSupabase() {\n  try {\n    console.log('üöÄ Iniciando migra√ß√£o para Supabase...');\n    \n    // Conectar ao Supabase\n    const pool = new Pool({ connectionString: SUPABASE_URL });\n    const db = drizzle({ client: pool, schema });\n    \n    // Testar conex√£o\n    console.log('üîó Testando conex√£o...');\n    await pool.query('SELECT 1');\n    console.log('‚úÖ Conex√£o com Supabase estabelecida!');\n    \n    // Ler dados do backup\n    const backupData = JSON.parse(fs.readFileSync('database-backup.json', 'utf8'));\n    console.log('üìñ Backup carregado:', {\n      users: backupData.users.length,\n      cases: backupData.cases.length,\n      employees: backupData.employees.length\n    });\n    \n    // Criar tabelas primeiro usando SQL direto\n    console.log('üìã Criando estrutura das tabelas...');\n    \n    // Criar tabela users\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS users (\n        id VARCHAR PRIMARY KEY,\n        username VARCHAR UNIQUE NOT NULL,\n        email VARCHAR,\n        password VARCHAR NOT NULL,\n        first_name VARCHAR,\n        last_name VARCHAR,\n        role VARCHAR DEFAULT 'editor',\n        permissions JSONB DEFAULT '{}',\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      );\n    `);\n    \n    // Criar tabela employees\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS employees (\n        id VARCHAR PRIMARY KEY,\n        matricula VARCHAR UNIQUE NOT NULL,\n        nome VARCHAR NOT NULL,\n        rg VARCHAR,\n        pis VARCHAR,\n        empresa VARCHAR,\n        data_admissao DATE,\n        data_demissao DATE,\n        salario DECIMAL,\n        cargo VARCHAR,\n        centro_custo VARCHAR,\n        departamento VARCHAR,\n        deleted_at TIMESTAMP\n      );\n    `);\n    \n    // Criar tabela cases\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS cases (\n        id VARCHAR PRIMARY KEY,\n        matricula VARCHAR NOT NULL,\n        nome VARCHAR NOT NULL,\n        processo TEXT,\n        prazo_entrega DATE,\n        audiencia DATE,\n        status VARCHAR DEFAULT 'novo',\n        data_entrega DATE,\n        created_at TIMESTAMP DEFAULT NOW(),\n        updated_at TIMESTAMP DEFAULT NOW()\n      );\n    `);\n    \n    // Criar tabela activity_log\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS activity_log (\n        id VARCHAR PRIMARY KEY,\n        user_id VARCHAR,\n        action VARCHAR NOT NULL,\n        description TEXT,\n        ip_address VARCHAR,\n        user_agent TEXT,\n        created_at TIMESTAMP DEFAULT NOW()\n      );\n    `);\n    \n    // Criar tabela sessions\n    await pool.query(`\n      CREATE TABLE IF NOT EXISTS sessions (\n        sid VARCHAR PRIMARY KEY,\n        sess JSONB NOT NULL,\n        expire TIMESTAMP NOT NULL\n      );\n      CREATE INDEX IF NOT EXISTS IDX_session_expire ON sessions (expire);\n    `);\n    \n    console.log('‚úÖ Estrutura das tabelas criada!');\n    \n    // Inserir dados\n    console.log('üì• Inserindo dados...');\n    \n    // Inserir usu√°rios\n    for (const user of backupData.users) {\n      try {\n        await pool.query(`\n          INSERT INTO users (id, username, email, password, first_name, last_name, role, permissions, created_at, updated_at)\n          VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n          ON CONFLICT (username) DO UPDATE SET\n            email = EXCLUDED.email,\n            password = EXCLUDED.password,\n            first_name = EXCLUDED.first_name,\n            last_name = EXCLUDED.last_name,\n            role = EXCLUDED.role,\n            permissions = EXCLUDED.permissions,\n            updated_at = EXCLUDED.updated_at\n        `, [\n          user.id, user.username, user.email, user.password,\n          user.firstName, user.lastName, user.role,\n          JSON.stringify(user.permissions), user.createdAt, user.updatedAt\n        ]);\n      } catch (error) {\n        console.log(`‚ö†Ô∏è Erro ao inserir usu√°rio ${user.username}:`, error.message);\n      }\n    }\n    console.log(`‚úÖ ${backupData.users.length} usu√°rios inseridos`);\n    \n    // Inserir funcion√°rios\n    for (const emp of backupData.employees) {\n      try {\n        await pool.query(`\n          INSERT INTO employees (id, matricula, nome, rg, pis, empresa, data_admissao, data_demissao, salario, cargo, centro_custo, departamento)\n          VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12)\n          ON CONFLICT (matricula) DO UPDATE SET\n            nome = EXCLUDED.nome,\n            rg = EXCLUDED.rg,\n            pis = EXCLUDED.pis,\n            empresa = EXCLUDED.empresa,\n            data_admissao = EXCLUDED.data_admissao,\n            data_demissao = EXCLUDED.data_demissao,\n            salario = EXCLUDED.salario,\n            cargo = EXCLUDED.cargo,\n            centro_custo = EXCLUDED.centro_custo,\n            departamento = EXCLUDED.departamento\n        `, [\n          emp.id, emp.matricula, emp.nome, emp.rg, emp.pis, emp.empresa,\n          emp.dataAdmissao, emp.dataDemissao, emp.salario, emp.cargo,\n          emp.centroCusto, emp.departamento\n        ]);\n      } catch (error) {\n        console.log(`‚ö†Ô∏è Erro ao inserir funcion√°rio ${emp.matricula}:`, error.message);\n      }\n    }\n    console.log(`‚úÖ ${backupData.employees.length} funcion√°rios inseridos`);\n    \n    // Inserir casos\n    for (const caso of backupData.cases) {\n      try {\n        await pool.query(`\n          INSERT INTO cases (id, matricula, nome, processo, prazo_entrega, audiencia, status, data_entrega, created_at, updated_at)\n          VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n          ON CONFLICT (id) DO UPDATE SET\n            matricula = EXCLUDED.matricula,\n            nome = EXCLUDED.nome,\n            processo = EXCLUDED.processo,\n            prazo_entrega = EXCLUDED.prazo_entrega,\n            audiencia = EXCLUDED.audiencia,\n            status = EXCLUDED.status,\n            data_entrega = EXCLUDED.data_entrega,\n            updated_at = EXCLUDED.updated_at\n        `, [\n          caso.id, caso.matricula, caso.nome, caso.processo,\n          caso.prazoEntrega, caso.audiencia, caso.status, caso.dataEntrega,\n          caso.createdAt, caso.updatedAt\n        ]);\n      } catch (error) {\n        console.log(`‚ö†Ô∏è Erro ao inserir caso ${caso.id}:`, error.message);\n      }\n    }\n    console.log(`‚úÖ ${backupData.cases.length} casos inseridos`);\n    \n    // Testar dados inseridos\n    const userCount = await pool.query('SELECT COUNT(*) FROM users');\n    const employeeCount = await pool.query('SELECT COUNT(*) FROM employees');\n    const caseCount = await pool.query('SELECT COUNT(*) FROM cases');\n    \n    console.log('\\nüéâ Migra√ß√£o completa!');\n    console.log('üìä Dados no Supabase:');\n    console.log(`   üë• Usu√°rios: ${userCount.rows[0].count}`);\n    console.log(`   üë®‚Äçüíº Funcion√°rios: ${employeeCount.rows[0].count}`);\n    console.log(`   üìã Casos: ${caseCount.rows[0].count}`);\n    \n    console.log('\\nüîó Pr√≥ximos passos:');\n    console.log('1. Atualize DATABASE_URL no Render para:');\n    console.log('   postgresql://postgres.kxqyldwhcfzhbnpfdcjl:BaseF@cilities2025!@aws-0-us-east-1.pooler.supabase.com:6543/postgres');\n    console.log('2. Fa√ßa deploy no Render');\n    console.log('3. Teste o login: admin/admin123');\n    \n    await pool.end();\n    \n  } catch (error) {\n    console.error('‚ùå Erro na migra√ß√£o:', error);\n  }\n}\n\nmigrateToSupabase();","size_bytes":7705},"supabase-setup.md":{"content":"# Configura√ß√£o Supabase - Passo a Passo\n\n## 1. Criar Conta Supabase\n\n1. V√° para: https://supabase.com\n2. Clique em \"Sign up\" \n3. Use seu email/GitHub\n4. Confirme email se necess√°rio\n\n## 2. Criar Projeto\n\n1. Clique em \"New project\"\n2. Nome: `legal-case-management`\n3. Database Password: `BaseF@cilities2025!` (anote esta senha)\n4. Regi√£o: `East US (Virginia)`\n5. Clique \"Create new project\"\n\n## 3. Aguardar Cria√ß√£o (2-3 minutos)\n\nO Supabase vai criar seu banco PostgreSQL automaticamente.\n\n## 4. Copiar Database URL\n\n1. No painel do projeto, v√° em \"Settings\" (menu lateral)\n2. Clique em \"Database\"\n3. Role para baixo at√© \"Connection string\"\n4. Copie a URL que est√° assim:\n   `postgresql://postgres.XXXXXX:[YOUR-PASSWORD]@aws-0-us-east-1.pooler.supabase.com:6543/postgres`\n\n5. **IMPORTANTE**: Substitua `[YOUR-PASSWORD]` pela senha que voc√™ criou\n   Exemplo final:\n   `postgresql://postgres.XXXXXX:BaseF@cilities2025!@aws-0-us-east-1.pooler.supabase.com:6543/postgres`\n\n## 5. Configurar Schema\n\nNo terminal do Replit, execute:\n```bash\nDATABASE_URL=\"sua-url-copiada\" npm run db:push\n```\n\n## 6. Importar Dados\n\n```bash\nnode migration-import.js \"sua-url-copiada\"\n```\n\n## 7. Atualizar Render\n\n1. Painel do Render ‚Üí Seu servi√ßo ‚Üí Settings ‚Üí Environment Variables\n2. Edite `DATABASE_URL` \n3. Cole a nova URL do Supabase\n4. Save Changes ‚Üí Manual Deploy\n\n## Pronto! Sistema 100% Independente\n\n‚úÖ Banco pr√≥prio no Supabase\n‚úÖ Dados migrados\n‚úÖ Render usando novo banco\n‚úÖ Total independ√™ncia\n\n**Dashboard Supabase**: Voc√™ pode ver/editar dados diretamente no painel web do Supabase!","size_bytes":1598},"client/src/styles/dashboard-grid.css":{"content":"/* Dashboard Grid Layout Styles */\n\n/* Grid Container */\n.react-grid-layout {\n  position: relative;\n  min-height: 400px;\n}\n\n/* Grid Items */\n.react-grid-item {\n  transition: all 200ms ease;\n  transition-property: left, top, transform, opacity;\n  border-radius: 8px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);\n}\n\n.react-grid-item:hover {\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n}\n\n/* Dragging styles */\n.react-grid-item.react-grid-placeholder {\n  background: #3b82f6 !important;\n  opacity: 0.3 !important;\n  transition-duration: 100ms;\n  z-index: 2;\n  user-select: none;\n  border-radius: 8px;\n}\n\n.react-grid-item.cssTransforms {\n  transition-property: transform, opacity;\n}\n\n.react-grid-item.resizing {\n  opacity: 0.8;\n  z-index: 3;\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n}\n\n.react-grid-item.static {\n  background: #f3f4f6 !important;\n  color: #6b7280 !important;\n}\n\n/* Resize handles */\n.react-resizable-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  bottom: 0;\n  right: 0;\n  background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSI2IiB2aWV3Qm94PSIwIDAgNiA2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZG90cyBmaWxsPSIjNmI3MjgwIiBmaWxsLW9wYWNpdHk9IjAuNCIvPgo8L3N2Zz4K') no-repeat;\n  background-size: contain;\n  background-origin: content-box;\n  box-sizing: border-box;\n  cursor: se-resize;\n  padding: 4px;\n}\n\n.react-resizable-handle::after {\n  content: '';\n  position: absolute;\n  right: 3px;\n  bottom: 3px;\n  width: 5px;\n  height: 5px;\n  border-right: 2px solid rgba(107, 114, 128, 0.6);\n  border-bottom: 2px solid rgba(107, 114, 128, 0.6);\n}\n\n.react-grid-item:hover .react-resizable-handle::after {\n  border-color: rgba(59, 130, 246, 0.8);\n}\n\n/* Responsive breakpoints */\n@media (max-width: 768px) {\n  .react-grid-item {\n    margin-bottom: 16px;\n  }\n  \n  .react-resizable-handle {\n    display: none;\n  }\n}\n\n/* Widget Content Styles */\n.widget-content {\n  padding: 16px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.widget-header {\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #f3f4f6;\n}\n\n.widget-title {\n  font-size: 14px;\n  font-weight: 600;\n  color: #374151;\n  margin: 0;\n}\n\n.widget-body {\n  flex: 1;\n  overflow-y: auto;\n}\n\n/* Loading states */\n.widget-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100px;\n  color: #9ca3af;\n  font-size: 14px;\n}\n\n/* Empty states */\n.widget-empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100px;\n  color: #9ca3af;\n  font-size: 14px;\n  text-align: center;\n}\n\n.widget-empty-icon {\n  width: 24px;\n  height: 24px;\n  margin-bottom: 8px;\n  opacity: 0.5;\n}\n\n/* Chart widget specific styles */\n.recharts-wrapper {\n  font-size: 12px;\n}\n\n.recharts-legend-wrapper {\n  font-size: 11px;\n}\n\n/* Activity feed widget styles */\n.activity-item {\n  padding: 8px 0;\n  border-bottom: 1px solid #f3f4f6;\n}\n\n.activity-item:last-child {\n  border-bottom: none;\n}\n\n/* Quick actions widget styles */\n.quick-action-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 8px;\n  height: 100%;\n  align-items: stretch;\n}\n\n.quick-action-button {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 12px 8px;\n  border-radius: 6px;\n  border: none;\n  cursor: pointer;\n  transition: all 200ms ease;\n  font-size: 11px;\n  font-weight: 500;\n  text-align: center;\n  min-height: 60px;\n}\n\n.quick-action-button:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n/* Dashboard customizer styles */\n.dashboard-customizer {\n  position: fixed;\n  bottom: 24px;\n  right: 24px;\n  z-index: 50;\n}\n\n/* Mobile responsive adjustments */\n@media (max-width: 640px) {\n  .react-grid-layout {\n    margin: 0 -8px;\n  }\n  \n  .react-grid-item {\n    margin: 0 8px 16px;\n    position: static !important;\n    transform: none !important;\n    width: calc(100% - 16px) !important;\n    height: auto !important;\n  }\n  \n  .widget-content {\n    padding: 12px;\n  }\n  \n  .quick-action-grid {\n    grid-template-columns: repeat(2, 1fr);\n    gap: 6px;\n  }\n  \n  .quick-action-button {\n    min-height: 50px;\n    padding: 8px 6px;\n    font-size: 10px;\n  }\n}\n\n/* Animation for new widgets */\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.widget-appear {\n  animation: fadeInUp 300ms ease-out;\n}","size_bytes":4653},"client/src/styles/dashboard-layout-fix.css":{"content":"/* DASHBOARD LAYOUT FIX - Corrigindo layout corrompido */\n\n/* Container principal do dashboard */\n.dashboard-container {\n  width: 100%;\n  min-height: calc(100vh - 80px);\n  padding: 20px;\n  box-sizing: border-box;\n  overflow-x: hidden;\n}\n\n/* Grid responsivo corrigido */\n.react-grid-layout {\n  position: relative;\n  margin: 0 auto;\n  max-width: 100%;\n  overflow-x: visible;\n}\n\n/* Widget containers - tamanhos fixos */\n.react-grid-item {\n  transition: all 200ms ease;\n  transition-property: left, top, width, height;\n  box-sizing: border-box;\n}\n\n.react-grid-item.react-grid-placeholder {\n  background: rgba(59, 130, 246, 0.2);\n  opacity: 0.2;\n  transition-duration: 100ms;\n  z-index: 2;\n  user-select: none;\n  border-radius: 8px;\n}\n\n/* Widget content styling */\n.widget-container {\n  height: 100%;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.widget-container h3 {\n  margin: 0 0 16px 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1f2937;\n  border-bottom: 1px solid #f3f4f6;\n  padding-bottom: 8px;\n}\n\n/* Responsive adjustments */\n@media (max-width: 1200px) {\n  .dashboard-container {\n    padding: 16px;\n  }\n  \n  .widget-container {\n    padding: 16px;\n  }\n  \n  .widget-container h3 {\n    font-size: 1rem;\n    margin-bottom: 12px;\n  }\n}\n\n@media (max-width: 768px) {\n  .dashboard-container {\n    padding: 12px;\n  }\n  \n  .react-grid-layout {\n    margin: 0;\n  }\n  \n  .widget-container {\n    padding: 12px;\n    border-radius: 8px;\n  }\n  \n  .widget-container h3 {\n    font-size: 0.9rem;\n    margin-bottom: 8px;\n  }\n}\n\n@media (max-width: 480px) {\n  .dashboard-container {\n    padding: 8px;\n  }\n  \n  .widget-container {\n    padding: 8px;\n    border-radius: 6px;\n  }\n  \n  .widget-container h3 {\n    font-size: 0.85rem;\n    margin-bottom: 6px;\n  }\n}\n\n/* Drag handle styling */\n.react-grid-item > .react-resizable-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  bottom: 0;\n  right: 0;\n  background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSI2IiB2aWV3Qm94PSIwIDAgNiA2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9IiM5OTkiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGNpcmNsZSBjeD0iNSIgY3k9IjUiIHI9IjEiLz48Y2lyY2xlIGN4PSI1IiBjeT0iMSIgcj0iMSIvPjxjaXJjbGUgY3g9IjEiIGN5PSI1IiByPSIxIi8+PC9nPjwvc3ZnPg==') center center no-repeat;\n  background-size: 6px 6px;\n  padding: 0;\n  cursor: se-resize;\n  border: none;\n  outline: none;\n}\n\n.react-grid-item:hover > .react-resizable-handle {\n  background-color: rgba(59, 130, 246, 0.1);\n  border-radius: 0 0 12px 0;\n}\n\n/* Dragging state */\n.react-grid-item.react-dragging {\n  transition: none;\n  z-index: 3;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n}\n\n.react-grid-item.react-dragging .widget-container {\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n  transform: rotate(2deg);\n}\n\n/* Ensure full height usage */\n.react-grid-layout,\n.react-grid-item,\n.widget-container {\n  box-sizing: border-box;\n}\n\n/* Hide overflow on mobile to prevent horizontal scroll */\n@media (max-width: 768px) {\n  body {\n    overflow-x: hidden;\n  }\n  \n  .dashboard-container {\n    overflow-x: hidden;\n  }\n}\n\n/* Widget specific fixes */\n.widget-container .recharts-wrapper {\n  width: 100% !important;\n  height: auto !important;\n}\n\n.widget-container table {\n  width: 100%;\n  table-layout: fixed;\n}\n\n.widget-container .stat-card {\n  margin: 0;\n  padding: 0;\n}\n\n/* Loading states */\n.widget-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  background: #f9fafb;\n}\n\n/* Error states */\n.widget-error {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  background: #fef2f2;\n  color: #dc2626;\n  text-align: center;\n  padding: 20px;\n}","size_bytes":3802}}}